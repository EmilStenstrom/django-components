(()=>{var y=Array.isArray,p=t=>typeof t=="function",b=t=>t!==null&&typeof t=="object",h=t=>(b(t)||p(t))&&p(t.then)&&p(t.catch);function F(t,a){try{return a?t.apply(null,a):t()}catch(o){f(o)}}function m(t,a){if(p(t)){let o=F(t,a);return o&&h(o)&&o.catch(i=>{f(i)}),[o]}if(y(t)){let o=[];for(let i=0;i<t.length;i++)o.push(m(t[i],a));return o}else console.warn(`[Components] Invalid value type passed to callWithAsyncErrorHandling(): ${typeof t}`)}function f(t){console.error(t)}var u=()=>{let t=new Set,a=new Set,o={},i={},C=e=>{let n=new DOMParser().parseFromString(e,"text/html").querySelector("script");if(!n)throw Error("[Components] Failed to extract <script> tag. Make sure that the string contains <script><\/script> and is a valid HTML");return n},T=e=>{let n=new DOMParser().parseFromString(e,"text/html").querySelector("link");if(!n)throw Error("[Components] Failed to extract <link> tag. Make sure that the string contains <link></link> and is a valid HTML");return n},g=e=>{let n=document.createElement(e.tagName);for(let r of e.attributes)n.setAttributeNode(r.cloneNode());return n};return{callComponent:(e,n,r)=>{let s=o[e];if(!s)throw Error(`[Components] '${e}': No component registered for that name`);let c=Array.from(document.querySelectorAll(`[data-comp-id-${n}]`));if(!c.length)throw Error(`[Components] '${e}': No elements with component ID '${n}' found`);let l=`${e}:${r}`,d=i[l];if(!d)throw Error(`[Components] '${e}': Cannot find input for hash '${r}'`);let x=d(),E={$name:e,$id:n,$data:x,$els:c},[$]=m(s,[E]);return $},registerComponent:(e,n)=>{o[e]=n},registerComponentData:(e,n,r)=>{let s=`${e}:${n}`;i[s]=r},loadScript:(e,n)=>{if(e==="js"){let r=C(n),s=r.getAttribute("src");if(!s||t.has(s))return;t.add(s);let c=g(r);return new Promise((l,d)=>{c.onload=()=>{l()},globalThis.document.body.append(c)})}else if(e==="css"){let r=T(n),s=r.getAttribute("href");if(!s||a.has(s))return;let c=g(r);return globalThis.document.head.append(c),a.add(s),Promise.resolve()}else throw Error(`[Components] loadScript received invalid script type '${e}'. Must be one of 'js', 'css'`)},markScriptLoaded:(e,n)=>{if(e==="js")t.add(n);else if(e==="css")a.add(n);else throw Error(`[Components] markScriptLoaded received invalid script type '${e}'. Must be one of 'js', 'css'`)}}};var M={manager:u(),createComponentsManager:u,unescapeJs:o=>new DOMParser().parseFromString(o,"text/html").documentElement.textContent};globalThis.Components=M;})();
