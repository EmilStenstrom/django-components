<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A way to create simple reusable template components in Django."><link href=https://emilstenstrom.github.io/django-components/latest/ rel=canonical><link href=CHANGELOG/ rel=next><link rel=icon href=assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.16"><title>- Django-Components</title><link rel=stylesheet href=assets/stylesheets/main.bcfcd587.min.css><link rel=stylesheet href=assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=assets/_markdown_exec_pyodide.css><link rel=stylesheet href=assets/_mkdocstrings.css><link rel=stylesheet href=css/timeago.css><script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Index - Django-Components"><meta property=og:description content="A way to create simple reusable template components in Django."><meta property=og:image content=https://emilstenstrom.github.io/django-components/latest/assets/images/social/README.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://emilstenstrom.github.io/django-components/latest/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Index - Django-Components"><meta name=twitter:description content="A way to create simple reusable template components in Django."><meta name=twitter:image content=https://emilstenstrom.github.io/django-components/latest/assets/images/social/README.png></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> 🚨The documentation is still a work in progress. 🚨 </div> </aside> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=. title=Django-Components class="md-header__button md-logo" aria-label=Django-Components data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Django-Components </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> <img src=https://raw.githubusercontent.com/EmilStenstrom/django-components/master/logo/logo-black-on-white.svg alt=django-components style="max-width: 100%; background: white; color: black;"> </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=teal data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/EmilStenstrom/django-components title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> EmilStenstrom/django-components </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=. title=Django-Components class="md-nav__button md-logo" aria-label=Django-Components data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> Django-Components </label> <div class=md-nav__source> <a href=https://github.com/EmilStenstrom/django-components title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> EmilStenstrom/django-components </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <div class="md-nav__link md-nav__container"> <a href=. class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> README </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> README </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=CHANGELOG/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=CODE_OF_CONDUCT/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> <li class=md-nav__item> <a href=license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1_1> <div class="md-nav__link md-nav__container"> <a href=reference/django_components/ class="md-nav__link "> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> django_components </span> </a> <label class="md-nav__link " for=__nav_2_1_1 id=__nav_2_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_1_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1> <span class="md-nav__icon md-icon"></span> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> django_components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=reference/django_components/app_settings/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> app_settings </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/apps/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> apps </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/attributes/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> attributes </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/autodiscover/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> autodiscover </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/component/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> component </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/component_media/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> component_media </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/component_registry/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> component_registry </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/context/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> context </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/expression/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> expression </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/library/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> library </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/logger/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> logger </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1_1_13> <div class="md-nav__link md-nav__container"> <a href=reference/django_components/management/ class="md-nav__link "> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> management </span> </a> <label class="md-nav__link " for=__nav_2_1_1_13 id=__nav_2_1_1_13_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_1_1_13_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1_13> <span class="md-nav__icon md-icon"></span> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> management </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1_1_13_2> <div class="md-nav__link md-nav__container"> <a href=reference/django_components/management/commands/ class="md-nav__link "> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> commands </span> </a> <label class="md-nav__link " for=__nav_2_1_1_13_2 id=__nav_2_1_1_13_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_2_1_1_13_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1_13_2> <span class="md-nav__icon md-icon"></span> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> commands </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=reference/django_components/management/commands/startcomponent/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> startcomponent </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/management/commands/upgradecomponent/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> upgradecomponent </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=reference/django_components/middleware/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> middleware </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/node/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> node </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/provide/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> provide </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1_1_17> <div class="md-nav__link md-nav__container"> <a href=reference/django_components/safer_staticfiles/ class="md-nav__link "> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> safer_staticfiles </span> </a> <label class="md-nav__link " for=__nav_2_1_1_17 id=__nav_2_1_1_17_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_1_1_17_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1_17> <span class="md-nav__icon md-icon"></span> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> safer_staticfiles </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=reference/django_components/safer_staticfiles/apps/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> apps </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=reference/django_components/slots/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> slots </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/tag_formatter/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> tag_formatter </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/template_loader/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> template_loader </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/template_parser/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> template_parser </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_1_1_22> <div class="md-nav__link md-nav__container"> <a href=reference/django_components/templatetags/ class="md-nav__link "> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> templatetags </span> </a> <label class="md-nav__link " for=__nav_2_1_1_22 id=__nav_2_1_1_22_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_1_1_22_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1_1_22> <span class="md-nav__icon md-icon"></span> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> templatetags </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=reference/django_components/templatetags/component_tags/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> component_tags </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=reference/django_components/types/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> types </span> </a> </li> <li class=md-nav__item> <a href=reference/django_components/utils/ class=md-nav__link> <span class=md-ellipsis> <code class="doc-symbol doc-symbol-nav doc-symbol-module"></code> utils </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#features class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=#summary class=md-nav__link> <span class=md-ellipsis> Summary </span> </a> </li> <li class=md-nav__item> <a href=#table-of-contents class=md-nav__link> <span class=md-ellipsis> Table of Contents </span> </a> </li> <li class=md-nav__item> <a href=#release-notes class=md-nav__link> <span class=md-ellipsis> Release notes </span> </a> </li> <li class=md-nav__item> <a href=#security-notes class=md-nav__link> <span class=md-ellipsis> Security notes 🚨 </span> </a> <nav class=md-nav aria-label="Security notes 🚨"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#static-files class=md-nav__link> <span class=md-ellipsis> Static files </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#installation class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> <nav class=md-nav aria-label=Installation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#optional class=md-nav__link> <span class=md-ellipsis> Optional </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#compatibility class=md-nav__link> <span class=md-ellipsis> Compatibility </span> </a> </li> <li class=md-nav__item> <a href=#create-your-first-component class=md-nav__link> <span class=md-ellipsis> Create your first component </span> </a> </li> <li class=md-nav__item> <a href=#using-single-file-components class=md-nav__link> <span class=md-ellipsis> Using single-file components </span> </a> <nav class=md-nav aria-label="Using single-file components"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#syntax-highlight-and-code-assistance class=md-nav__link> <span class=md-ellipsis> Syntax highlight and code assistance </span> </a> <nav class=md-nav aria-label="Syntax highlight and code assistance"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#vscode class=md-nav__link> <span class=md-ellipsis> VSCode </span> </a> </li> <li class=md-nav__item> <a href=#pycharm-or-other-jetbrains-ides class=md-nav__link> <span class=md-ellipsis> Pycharm (or other Jetbrains IDEs) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#use-components-in-templates class=md-nav__link> <span class=md-ellipsis> Use components in templates </span> </a> </li> <li class=md-nav__item> <a href=#use-components-outside-of-templates class=md-nav__link> <span class=md-ellipsis> Use components outside of templates </span> </a> <nav class=md-nav aria-label="Use components outside of templates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#inputs-of-render-and-render_to_response class=md-nav__link> <span class=md-ellipsis> Inputs of render and render_to_response </span> </a> <nav class=md-nav aria-label="Inputs of render and render_to_response"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#slotfunc class=md-nav__link> <span class=md-ellipsis> SlotFunc </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adding-type-hints-with-generics class=md-nav__link> <span class=md-ellipsis> Adding type hints with Generics </span> </a> </li> <li class=md-nav__item> <a href=#response-class-of-render_to_response class=md-nav__link> <span class=md-ellipsis> Response class of render_to_response </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#use-components-as-views class=md-nav__link> <span class=md-ellipsis> Use components as views </span> </a> <nav class=md-nav aria-label="Use components as views"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#component-as-view-example class=md-nav__link> <span class=md-ellipsis> Component as view example </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-view-class class=md-nav__link> <span class=md-ellipsis> Modifying the View class </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#registering-components class=md-nav__link> <span class=md-ellipsis> Registering components </span> </a> <nav class=md-nav aria-label="Registering components"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-componentregistry class=md-nav__link> <span class=md-ellipsis> What is ComponentRegistry </span> </a> </li> <li class=md-nav__item> <a href=#working-with-componentregistry class=md-nav__link> <span class=md-ellipsis> Working with ComponentRegistry </span> </a> </li> <li class=md-nav__item> <a href=#registering-components-to-custom-componentregistry class=md-nav__link> <span class=md-ellipsis> Registering components to custom ComponentRegistry </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#autodiscovery class=md-nav__link> <span class=md-ellipsis> Autodiscovery </span> </a> <nav class=md-nav aria-label=Autodiscovery> <ul class=md-nav__list> <li class=md-nav__item> <a href=#manually-trigger-autodiscovery class=md-nav__link> <span class=md-ellipsis> Manually trigger autodiscovery </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#using-slots-in-templates class=md-nav__link> <span class=md-ellipsis> Using slots in templates </span> </a> <nav class=md-nav aria-label="Using slots in templates"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#default-slot class=md-nav__link> <span class=md-ellipsis> Default slot </span> </a> </li> <li class=md-nav__item> <a href=#render-fill-in-multiple-places class=md-nav__link> <span class=md-ellipsis> Render fill in multiple places </span> </a> <nav class=md-nav aria-label="Render fill in multiple places"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#default-and-required-slots class=md-nav__link> <span class=md-ellipsis> Default and required slots </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#accessing-original-content-of-slots class=md-nav__link> <span class=md-ellipsis> Accessing original content of slots </span> </a> </li> <li class=md-nav__item> <a href=#conditional-slots class=md-nav__link> <span class=md-ellipsis> Conditional slots </span> </a> <nav class=md-nav aria-label="Conditional slots"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#accessing-is_filled-of-slot-names-with-special-characters class=md-nav__link> <span class=md-ellipsis> Accessing is_filled of slot names with special characters </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#scoped-slots class=md-nav__link> <span class=md-ellipsis> Scoped slots </span> </a> <nav class=md-nav aria-label="Scoped slots"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#passing-data-to-slots class=md-nav__link> <span class=md-ellipsis> Passing data to slots </span> </a> </li> <li class=md-nav__item> <a href=#accessing-slot-data-in-fill class=md-nav__link> <span class=md-ellipsis> Accessing slot data in fill </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#passing-data-to-components class=md-nav__link> <span class=md-ellipsis> Passing data to components </span> </a> <nav class=md-nav aria-label="Passing data to components"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#accessing-data-passed-to-the-component class=md-nav__link> <span class=md-ellipsis> Accessing data passed to the component </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rendering-html-attributes class=md-nav__link> <span class=md-ellipsis> Rendering HTML attributes </span> </a> <nav class=md-nav aria-label="Rendering HTML attributes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#removing-atttributes class=md-nav__link> <span class=md-ellipsis> Removing atttributes </span> </a> </li> <li class=md-nav__item> <a href=#boolean-attributes class=md-nav__link> <span class=md-ellipsis> Boolean attributes </span> </a> </li> <li class=md-nav__item> <a href=#default-attributes class=md-nav__link> <span class=md-ellipsis> Default attributes </span> </a> </li> <li class=md-nav__item> <a href=#appending-attributes class=md-nav__link> <span class=md-ellipsis> Appending attributes </span> </a> </li> <li class=md-nav__item> <a href=#rules-for-html_attrs class=md-nav__link> <span class=md-ellipsis> Rules for html_attrs </span> </a> </li> <li class=md-nav__item> <a href=#examples-for-html_attrs class=md-nav__link> <span class=md-ellipsis> Examples for html_attrs </span> </a> </li> <li class=md-nav__item> <a href=#full-example-for-html_attrs class=md-nav__link> <span class=md-ellipsis> Full example for html_attrs </span> </a> </li> <li class=md-nav__item> <a href=#rendering-html-attributes-outside-of-templates class=md-nav__link> <span class=md-ellipsis> Rendering HTML attributes outside of templates </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#template-tag-syntax class=md-nav__link> <span class=md-ellipsis> Template tag syntax </span> </a> <nav class=md-nav aria-label="Template tag syntax"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#special-characters class=md-nav__link> <span class=md-ellipsis> Special characters </span> </a> </li> <li class=md-nav__item> <a href=#spread-operator class=md-nav__link> <span class=md-ellipsis> Spread operator </span> </a> </li> <li class=md-nav__item> <a href=#pass-dictonary-by-its-key-value-pairs class=md-nav__link> <span class=md-ellipsis> Pass dictonary by its key-value pairs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prop-drilling-and-dependency-injection-provide-inject class=md-nav__link> <span class=md-ellipsis> Prop drilling and dependency injection (provide / inject) </span> </a> <nav class=md-nav aria-label="Prop drilling and dependency injection (provide / inject)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-dependency-injection-and-prop-drilling class=md-nav__link> <span class=md-ellipsis> What is "dependency injection" and "prop drilling"? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-use-provide-inject class=md-nav__link> <span class=md-ellipsis> How to use provide / inject </span> </a> </li> <li class=md-nav__item> <a href=#using-provide-tag class=md-nav__link> <span class=md-ellipsis> Using {% provide %} tag </span> </a> </li> <li class=md-nav__item> <a href=#using-inject-method class=md-nav__link> <span class=md-ellipsis> Using inject() method </span> </a> </li> <li class=md-nav__item> <a href=#full-example class=md-nav__link> <span class=md-ellipsis> Full example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#component-context-and-scope class=md-nav__link> <span class=md-ellipsis> Component context and scope </span> </a> </li> <li class=md-nav__item> <a href=#customizing-component-tags-with-tagformatter class=md-nav__link> <span class=md-ellipsis> Customizing component tags with TagFormatter </span> </a> <nav class=md-nav aria-label="Customizing component tags with TagFormatter"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#available-tagformatters class=md-nav__link> <span class=md-ellipsis> Available TagFormatters </span> </a> </li> <li class=md-nav__item> <a href=#writing-your-own-tagformatter class=md-nav__link> <span class=md-ellipsis> Writing your own TagFormatter </span> </a> <nav class=md-nav aria-label="Writing your own TagFormatter"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#background class=md-nav__link> <span class=md-ellipsis> Background </span> </a> </li> <li class=md-nav__item> <a href=#tagformatter class=md-nav__link> <span class=md-ellipsis> TagFormatter </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#defining-htmljscss-files class=md-nav__link> <span class=md-ellipsis> Defining HTML/JS/CSS files </span> </a> <nav class=md-nav aria-label="Defining HTML/JS/CSS files"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#defining-file-paths-relative-to-component-or-static-dirs class=md-nav__link> <span class=md-ellipsis> Defining file paths relative to component or static dirs </span> </a> </li> <li class=md-nav__item> <a href=#defining-multiple-paths class=md-nav__link> <span class=md-ellipsis> Defining multiple paths </span> </a> </li> <li class=md-nav__item> <a href=#configuring-css-media-types class=md-nav__link> <span class=md-ellipsis> Configuring CSS Media Types </span> </a> </li> <li class=md-nav__item> <a href=#supported-types-for-file-paths class=md-nav__link> <span class=md-ellipsis> Supported types for file paths </span> </a> </li> <li class=md-nav__item> <a href=#path-as-objects class=md-nav__link> <span class=md-ellipsis> Path as objects </span> </a> </li> <li class=md-nav__item> <a href=#customize-how-paths-are-rendered-into-html-tags-with-media_class class=md-nav__link> <span class=md-ellipsis> Customize how paths are rendered into HTML tags with media_class </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rendering-jscss-dependencies class=md-nav__link> <span class=md-ellipsis> Rendering JS/CSS dependencies </span> </a> <nav class=md-nav aria-label="Rendering JS/CSS dependencies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#setting-up-componentdependencymiddleware class=md-nav__link> <span class=md-ellipsis> Setting Up ComponentDependencyMiddleware </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#available-settings class=md-nav__link> <span class=md-ellipsis> Available settings </span> </a> <nav class=md-nav aria-label="Available settings"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configure-the-module-where-components-are-loaded-from class=md-nav__link> <span class=md-ellipsis> Configure the module where components are loaded from </span> </a> </li> <li class=md-nav__item> <a href=#disable-autodiscovery class=md-nav__link> <span class=md-ellipsis> Disable autodiscovery </span> </a> </li> <li class=md-nav__item> <a href=#tune-the-template-cache class=md-nav__link> <span class=md-ellipsis> Tune the template cache </span> </a> </li> <li class=md-nav__item> <a href=#context-behavior-setting class=md-nav__link> <span class=md-ellipsis> Context behavior setting </span> </a> <nav class=md-nav aria-label="Context behavior setting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example-django class=md-nav__link> <span class=md-ellipsis> Example "django" </span> </a> </li> <li class=md-nav__item> <a href=#example-isolated class=md-nav__link> <span class=md-ellipsis> Example "isolated" </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tag-formatter-setting class=md-nav__link> <span class=md-ellipsis> Tag formatter setting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#logging-and-debugging class=md-nav__link> <span class=md-ellipsis> Logging and debugging </span> </a> </li> <li class=md-nav__item> <a href=#management-command class=md-nav__link> <span class=md-ellipsis> Management Command </span> </a> <nav class=md-nav aria-label="Management Command"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#management-command-usage class=md-nav__link> <span class=md-ellipsis> Management Command Usage </span> </a> </li> <li class=md-nav__item> <a href=#management-command-examples class=md-nav__link> <span class=md-ellipsis> Management Command Examples </span> </a> </li> <li class=md-nav__item> <a href=#creating-a-component-with-default-settings class=md-nav__link> <span class=md-ellipsis> Creating a Component with Default Settings </span> </a> </li> <li class=md-nav__item> <a href=#creating-a-component-with-custom-settings class=md-nav__link> <span class=md-ellipsis> Creating a Component with Custom Settings </span> </a> </li> <li class=md-nav__item> <a href=#overwriting-an-existing-component class=md-nav__link> <span class=md-ellipsis> Overwriting an Existing Component </span> </a> </li> <li class=md-nav__item> <a href=#simulating-component-creation class=md-nav__link> <span class=md-ellipsis> Simulating Component Creation </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#community-examples class=md-nav__link> <span class=md-ellipsis> Community examples </span> </a> </li> <li class=md-nav__item> <a href=#running-django-components-project-locally class=md-nav__link> <span class=md-ellipsis> Running django-components project locally </span> </a> <nav class=md-nav aria-label="Running django-components project locally"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-locally-and-run-the-tests class=md-nav__link> <span class=md-ellipsis> Install locally and run the tests </span> </a> </li> <li class=md-nav__item> <a href=#developing-against-live-django-app class=md-nav__link> <span class=md-ellipsis> Developing against live Django app </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#development-guides class=md-nav__link> <span class=md-ellipsis> Development guides </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/EmilStenstrom/django-components/edit/master/docs/README.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg> </a> <a href=https://github.com/EmilStenstrom/django-components/raw/master/docs/README.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg> </a> <h1 id=_1><img src=https://raw.githubusercontent.com/EmilStenstrom/django-components/master/logo/logo-black-on-white.svg alt=django-components style="max-width: 100%; background: white; color: black;"><a class=headerlink href=#_1 title="Permanent link">¤</a></h1> <p><a href=https://pypi.org/project/django-components/ ><img alt="PyPI - Version" src=https://img.shields.io/pypi/v/django-components></a> <a href=https://pypi.org/project/django-components/ ><img alt="PyPI - Python Version" src=https://img.shields.io/pypi/pyversions/django-components></a> <a href=https://EmilStenstrom.github.io/django-components/latest/license/ ><img alt="PyPI - License" src=https://img.shields.io/pypi/l/django-components></a> <a href=https://pypistats.org/packages/django-components><img alt="PyPI - Downloads" src=https://img.shields.io/pypi/dm/django-components></a> <a href=https://github.com/EmilStenstrom/django-components/actions/workflows/tests.yml><img alt="GitHub Actions Workflow Status" src=https://img.shields.io/github/actions/workflow/status/EmilStenstrom/django-components/tests.yml></a></p> <p><a href=https://EmilStenstrom.github.io/django-components/latest/ ><strong>Docs (Work in progress)</strong></a></p> <p>Create simple reusable template components in Django</p> <h2 id=features>Features<a class=headerlink href=#features title="Permanent link">¤</a></h2> <!-- FIXME Links --> <ul> <li>✨ <strong>Reusable components</strong>: Create components that can be reused in different parts of your project, or even in different projects.</li> <li>📁 <strong>Single file components</strong>: Keep your Python, CSS, Javascript and HTML in one place (if you wish)</li> <li>🎰 <strong>Slots</strong>: Define slots in your components to make them more flexible.</li> <li>💻 <strong>CLI</strong>: A command line interface to help you create new components.</li> <li>🚀 <strong>Wide compatibility</strong>: Works with <a href=https://emilstenstrom.github.io/django-components/latest/user_guide/requirements_compatibility>modern and LTS versions of Django</a>.</li> <li><strong>Load assets</strong>: Automatically load the right CSS and Javascript files for your components, with <a href=https://emilstenstrom.github.io/django-components/latest/user_guide/creating_using_components/middleware>our middleware</a>.</li> </ul> <h2 id=summary>Summary<a class=headerlink href=#summary title="Permanent link">¤</a></h2> <p>It lets you create "template components", that contains both the template, the Javascript and the CSS needed to generate the front end code you need for a modern app. Use components like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2015-06-19&quot;</span> <span class=cp>%}{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>And this is what gets rendered (plus the CSS and Javascript you've specified):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>Today&#39;s date is <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>2015-06-19<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p><a href=./sampleproject>See the example project</a> or read on to learn about the details!</p> <h2 id=table-of-contents>Table of Contents<a class=headerlink href=#table-of-contents title="Permanent link">¤</a></h2> <ul> <li><a href=#release-notes>Release notes</a></li> <li><a href=#security-notes->Security notes 🚨</a></li> <li><a href=#installation>Installation</a></li> <li><a href=#compatibility>Compatibility</a></li> <li><a href=#create-your-first-component>Create your first component</a></li> <li><a href=#using-single-file-components>Using single-file components</a></li> <li><a href=#use-components-in-templates>Use components in templates</a></li> <li><a href=#use-components-outside-of-templates>Use components outside of templates</a></li> <li><a href=#registering-components>Registering components</a></li> <li><a href=#use-components-as-views>Use components as views</a></li> <li><a href=#autodiscovery>Autodiscovery</a></li> <li><a href=#using-slots-in-templates>Using slots in templates</a></li> <li><a href=#passing-data-to-components>Passing data to components</a></li> <li><a href=#rendering-html-attributes>Rendering HTML attributes</a></li> <li><a href=#template-tag-syntax>Template tag syntax</a></li> <li><a href=#prop-drilling-and-dependency-injection-provide--inject>Prop drilling and dependency injection (provide / inject)</a></li> <li><a href=#component-context-and-scope>Component context and scope</a></li> <li><a href=#customizing-component-tags-with-tagformatter>Customizing component tags with TagFormatter</a></li> <li><a href=#defining-htmljscss-files>Defining HTML/JS/CSS files</a></li> <li><a href=#rendering-jscss-dependencies>Rendering JS/CSS dependencies</a></li> <li><a href=#available-settings>Available settings</a></li> <li><a href=#logging-and-debugging>Logging and debugging</a></li> <li><a href=#management-command>Management Command</a></li> <li><a href=#community-examples>Community examples</a></li> <li><a href=#running-django-components-project-locally>Running django-components project locally</a></li> <li><a href=#development-guides>Development guides</a></li> </ul> <h2 id=release-notes>Release notes<a class=headerlink href=#release-notes title="Permanent link">¤</a></h2> <p>🚨📢 <strong>Version 0.92</strong> - BREAKING CHANGE: <code>Component</code> class is no longer a subclass of <code>View</code>. To configure the <code>View</code> class, set the <code>Component.View</code> nested class. HTTP methods like <code>get</code> or <code>post</code> can still be defined directly on <code>Component</code> class, and <code>Component.as_view()</code> internally calls <code>Component.View.as_view()</code>. (See <a href=#modifying-the-view-class>Modifying the View class</a>)</p> <ul> <li> <p>The inputs (args, kwargs, slots, context, ...) that you pass to <code>Component.render()</code> can be accessed from within <code>get_context_data</code>, <code>get_template_string</code> and <code>get_template_name</code> via <code>self.input</code>. (See <a href=#accessing-data-passed-to-the-component>Accessing data passed to the component</a>)</p> </li> <li> <p>Typing: <code>Component</code> class supports generics that specify types for <code>Component.render</code> (See <a href=#adding-type-hints-with-generics>Adding type hints with Generics</a>)</p> </li> </ul> <p><strong>Version 0.90</strong> - All tags (<code>component</code>, <code>slot</code>, <code>fill</code>, ...) now support "self-closing" or "inline" form, where you can omit the closing tag: <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c>{# Before #}</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=cp>%}{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c>{# After #}</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> - All tags now support the "dictionary key" or "aggregate" syntax (<code>kwarg:key=val</code>): <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=nv>attrs</span><span class=o>:</span><span class=nv>class</span><span class=o>=</span><span class=s2>&quot;hidden&quot;</span> <span class=cp>%}</span>
</code></pre></div> - You can change how the components are written in the template with <a href=#customizing-component-tags-with-tagformatter>TagFormatter</a>.</p> <div class=codehilite><pre><span></span><code>The default is <span class=sb>`django_components.component_formatter`</span>:
```django
{% component &quot;button&quot; href=&quot;...&quot; disabled %}
    Click me!
{% endcomponent %}
```

While <span class=sb>`django_components.shorthand_component_formatter`</span> allows you to write components like so:

```django
{% button href=&quot;...&quot; disabled %}
    Click me!
{% endbutton %}
</code></pre></div> <p>🚨📢 <strong>Version 0.85</strong> Autodiscovery module resolution changed. Following undocumented behavior was removed:</p> <ul> <li>Previously, autodiscovery also imported any <code>[app]/components.py</code> files, and used <code>SETTINGS_MODULE</code> to search for component dirs.</li> <li>To migrate from:<ul> <li><code>[app]/components.py</code> - Define each module in <code>COMPONENTS.libraries</code> setting, or import each module inside the <code>AppConfig.ready()</code> hook in respective <code>apps.py</code> files.</li> <li><code>SETTINGS_MODULE</code> - Define component dirs using <code>STATICFILES_DIRS</code></li> </ul> </li> <li>Previously, autodiscovery handled relative files in <code>STATICFILES_DIRS</code>. To align with Django, <code>STATICFILES_DIRS</code> now must be full paths (<a href=https://docs.djangoproject.com/en/5.0/ref/settings/#std-setting-STATICFILES_DIRS>Django docs</a>).</li> </ul> <p>🚨📢 <strong>Version 0.81</strong> Aligned the <code>render_to_response</code> method with the (now public) <code>render</code> method of <code>Component</code> class. Moreover, slots passed to these can now be rendered also as functions.</p> <ul> <li>BREAKING CHANGE: The order of arguments to <code>render_to_response</code> has changed.</li> </ul> <p><strong>Version 0.80</strong> introduces dependency injection with the <code>{% provide %}</code> tag and <code>inject()</code> method.</p> <p>🚨📢 <strong>Version 0.79</strong></p> <ul> <li>BREAKING CHANGE: Default value for the <code>COMPONENTS.context_behavior</code> setting was changes from <code>"isolated"</code> to <code>"django"</code>. If you did not set this value explicitly before, this may be a breaking change. See the rationale for change <a href=https://github.com/EmilStenstrom/django-components/issues/498>here</a>.</li> </ul> <p>🚨📢 <strong>Version 0.77</strong> CHANGED the syntax for accessing default slot content.</p> <ul> <li>Previously, the syntax was <code>{% fill "my_slot" as "alias" %}</code> and <code>{{ alias.default }}</code>.</li> <li>Now, the syntax is <code>{% fill "my_slot" default="alias" %}</code> and <code>{{ alias }}</code>.</li> </ul> <p><strong>Version 0.74</strong> introduces <code>html_attrs</code> tag and <code>prefix:key=val</code> construct for passing dicts to components.</p> <p>🚨📢 <strong>Version 0.70</strong></p> <ul> <li><code>{% if_filled "my_slot" %}</code> tags were replaced with <code>{{ component_vars.is_filled.my_slot }}</code> variables.</li> <li>Simplified settings - <code>slot_context_behavior</code> and <code>context_behavior</code> were merged. See the <a href=#context-behavior>documentation</a> for more details.</li> </ul> <p><strong>Version 0.67</strong> CHANGED the default way how context variables are resolved in slots. See the <a href=https://github.com/EmilStenstrom/django-components/tree/0.67#isolate-components-slots>documentation</a> for more details.</p> <p>🚨📢 <strong>Version 0.5</strong> CHANGES THE SYNTAX for components. <code>component_block</code> is now <code>component</code>, and <code>component</code> blocks need an ending <code>endcomponent</code> tag. The new <code>python manage.py upgradecomponent</code> command can be used to upgrade a directory (use --path argument to point to each dir) of templates that use components to the new syntax automatically.</p> <p>This change is done to simplify the API in anticipation of a 1.0 release of django_components. After 1.0 we intend to be stricter with big changes like this in point releases.</p> <p><strong>Version 0.34</strong> adds components as views, which allows you to handle requests and render responses from within a component. See the <a href=#use-components-as-views>documentation</a> for more details.</p> <p><strong>Version 0.28</strong> introduces 'implicit' slot filling and the <code>default</code> option for <code>slot</code> tags.</p> <p><strong>Version 0.27</strong> adds a second installable app: <em>django_components.safer_staticfiles</em>. It provides the same behavior as <em>django.contrib.staticfiles</em> but with extra security guarantees (more info below in Security Notes).</p> <p><strong>Version 0.26</strong> changes the syntax for <code>{% slot %}</code> tags. From now on, we separate defining a slot (<code>{% slot %}</code>) from filling a slot with content (<code>{% fill %}</code>). This means you will likely need to change a lot of slot tags to fill. We understand this is annoying, but it's the only way we can get support for nested slots that fill in other slots, which is a very nice featuPpre to have access to. Hoping that this will feel worth it!</p> <p><strong>Version 0.22</strong> starts autoimporting all files inside components subdirectores, to simplify setup. An existing project might start to get AlreadyRegistered-errors because of this. To solve this, either remove your custom loading of components, or set "autodiscover": False in settings.COMPONENTS.</p> <p><strong>Version 0.17</strong> renames <code>Component.context</code> and <code>Component.template</code> to <code>get_context_data</code> and <code>get_template_name</code>. The old methods still work, but emit a deprecation warning. This change was done to sync naming with Django's class based views, and make using django-components more familiar to Django users. <code>Component.context</code> and <code>Component.template</code> will be removed when version 1.0 is released.</p> <h2 id=security-notes>Security notes 🚨<a class=headerlink href=#security-notes title="Permanent link">¤</a></h2> <p><em>You are advised to read this section before using django-components in production.</em></p> <h3 id=static-files>Static files<a class=headerlink href=#static-files title="Permanent link">¤</a></h3> <p>Components can be organized however you prefer. That said, our prefered way is to keep the files of a component close together by bundling them in the same directory. This means that files containing backend logic, such as Python modules and HTML templates, live in the same directory as static files, e.g. JS and CSS.</p> <p>If your are using <em>django.contrib.staticfiles</em> to collect static files, no distinction is made between the different kinds of files. As a result, your Python code and templates may inadvertently become available on your static file server. You probably don't want this, as parts of your backend logic will be exposed, posing a <strong>potential security vulnerability</strong>.</p> <p>As of <em>v0.27</em>, django-components ships with an additional installable app <em>django_components.<strong>safer_staticfiles</strong></em>. It is a drop-in replacement for <em>django.contrib.staticfiles</em>. Its behavior is 100% identical except it ignores .py and .html files, meaning these will not end up on your static files server. To use it, add it to INSTALLED_APPS and remove <em>django.contrib.staticfiles</em>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>    <span class=c1># &#39;django.contrib.staticfiles&#39;,   # &lt;-- REMOVE</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>    <span class=s1>&#39;django_components&#39;</span><span class=p>,</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>    <span class=s1>&#39;django_components.safer_staticfiles&#39;</span>  <span class=c1># &lt;-- ADD</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=p>]</span>
</code></pre></div> <p>If you are on an older version of django-components, your alternatives are a) passing <code>--ignore &lt;pattern&gt;</code> options to the <em>collecstatic</em> CLI command, or b) defining a subclass of StaticFilesConfig. Both routes are described in the official <a href=https://docs.djangoproject.com/en/4.2/ref/contrib/staticfiles/#customizing-the-ignored-pattern-list>docs of the <em>staticfiles</em> app</a>.</p> <p>Note that <code>safer_staticfiles</code> excludes the <code>.py</code> and <code>.html</code> files for <a href=https://docs.djangoproject.com/en/5.0/ref/contrib/staticfiles/#collectstatic>collectstatic command</a>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>python<span class=w> </span>manage.py<span class=w> </span>collectstatic
</code></pre></div> <p>but it is ignored on the <a href=https://docs.djangoproject.com/en/5.0/ref/django-admin/#runserver>development server</a>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>python<span class=w> </span>manage.py<span class=w> </span>runserver
</code></pre></div> <p>For a step-by-step guide on deploying production server with static files, <a href=./sampleproject/README.md>see the demo project</a>.</p> <h2 id=installation>Installation<a class=headerlink href=#installation title="Permanent link">¤</a></h2> <ol> <li>Install the app into your environment:</li> </ol> <blockquote> <p><code>pip install django_components</code></p> </blockquote> <ol> <li>Then add the app into <code>INSTALLED_APPS</code> in settings.py</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=n>INSTALLED_APPS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>   <span class=o>...</span><span class=p>,</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>   <span class=s1>&#39;django_components&#39;</span><span class=p>,</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=p>]</span>
</code></pre></div> <ol> <li>Ensure that <code>BASE_DIR</code> setting is defined in settings.py:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>BASE_DIR</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=vm>__file__</span><span class=p>)</span><span class=o>.</span><span class=n>resolve</span><span class=p>()</span><span class=o>.</span><span class=n>parent</span><span class=o>.</span><span class=n>parent</span>
</code></pre></div> <ol> <li> <p>Modify <code>TEMPLATES</code> section of settings.py as follows:</p> </li> <li> <p><em>Remove <code>'APP_DIRS': True,</code></em></p> </li> <li>Add <code>loaders</code> to <code>OPTIONS</code> list and set it to following value:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=n>TEMPLATES</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>   <span class=p>{</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>      <span class=o>...</span><span class=p>,</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a>      <span class=s1>&#39;OPTIONS&#39;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>            <span class=s1>&#39;context_processors&#39;</span><span class=p>:</span> <span class=p>[</span>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>               <span class=o>...</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a>            <span class=p>],</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>            <span class=s1>&#39;loaders&#39;</span><span class=p>:[(</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>               <span class=s1>&#39;django.template.loaders.cached.Loader&#39;</span><span class=p>,</span> <span class=p>[</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>                  <span class=s1>&#39;django.template.loaders.filesystem.Loader&#39;</span><span class=p>,</span>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>                  <span class=s1>&#39;django.template.loaders.app_directories.Loader&#39;</span><span class=p>,</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a>                  <span class=s1>&#39;django_components.template_loader.Loader&#39;</span><span class=p>,</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a>               <span class=p>]</span>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a>            <span class=p>)],</span>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a>      <span class=p>},</span>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a>   <span class=p>},</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=p>]</span>
</code></pre></div> <ol> <li>Modify <code>STATICFILES_DIRS</code> (or add it if you don't have it) so django can find your static JS and CSS files:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=n>STATICFILES_DIRS</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>   <span class=o>...</span><span class=p>,</span>
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>   <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>BASE_DIR</span><span class=p>,</span> <span class=s2>&quot;components&quot;</span><span class=p>),</span>
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=p>]</span>
</code></pre></div> <p>If <code>STATICFILES_DIRS</code> is omitted or empty, django-components will by default look for <code>{BASE_DIR}/components</code></p> <p>NOTE: The paths in <code>STATICFILES_DIRS</code> must be full paths. <a href=https://docs.djangoproject.com/en/5.0/ref/settings/#staticfiles-dirs>See Django docs</a>.</p> <h3 id=optional>Optional<a class=headerlink href=#optional title="Permanent link">¤</a></h3> <p>To avoid loading the app in each template using <code>{% load component_tags %}</code>, you can add the tag as a 'builtin' in settings.py</p> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=n>TEMPLATES</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>    <span class=p>{</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>        <span class=o>...</span><span class=p>,</span>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>        <span class=s1>&#39;OPTIONS&#39;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>            <span class=s1>&#39;context_processors&#39;</span><span class=p>:</span> <span class=p>[</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>                <span class=o>...</span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>            <span class=p>],</span>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>            <span class=s1>&#39;builtins&#39;</span><span class=p>:</span> <span class=p>[</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>                <span class=s1>&#39;django_components.templatetags.component_tags&#39;</span><span class=p>,</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>            <span class=p>]</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>        <span class=p>},</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>    <span class=p>},</span>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=p>]</span>
</code></pre></div> <p>Read on to find out how to build your first component!</p> <h2 id=compatibility>Compatibility<a class=headerlink href=#compatibility title="Permanent link">¤</a></h2> <p>Django-components supports all supported combinations versions of <a href=https://docs.djangoproject.com/en/dev/faq/install/#what-python-version-can-i-use-with-django>Django</a> and <a href=https://devguide.python.org/versions/#versions>Python</a>.</p> <table> <thead> <tr> <th>Python version</th> <th>Django version</th> </tr> </thead> <tbody> <tr> <td>3.8</td> <td>4.2</td> </tr> <tr> <td>3.9</td> <td>4.2</td> </tr> <tr> <td>3.10</td> <td>4.2, 5.0</td> </tr> <tr> <td>3.11</td> <td>4.2, 5.0</td> </tr> <tr> <td>3.12</td> <td>4.2, 5.0</td> </tr> </tbody> </table> <h2 id=create-your-first-component>Create your first component<a class=headerlink href=#create-your-first-component title="Permanent link">¤</a></h2> <p>A component in django-components is the combination of four things: CSS, Javascript, a Django template, and some Python code to put them all together.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>    sampleproject/
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>    ├── calendarapp/
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>    ├── components/             🆕
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>    │   └── calendar/           🆕
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>    │       ├── calendar.py     🆕
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>    │       ├── script.js       🆕
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>    │       ├── style.css       🆕
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>    │       └── template.html   🆕
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>    ├── sampleproject/
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>    ├── manage.py
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>    └── requirements.txt
</code></pre></div> <p>Start by creating empty files in the structure above.</p> <p>First, you need a CSS file. Be sure to prefix all rules with a unique class so they don't clash with other rules.</p> <div class=highlight><span class=filename>[project root]/components/calendar/style.css</span><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c>/* In a file called [project root]/components/calendar/style.css */</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=p>.</span><span class=nc>calendar-component</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=k>width</span><span class=p>:</span><span class=w> </span><span class=mi>200</span><span class=kt>px</span><span class=p>;</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=k>background</span><span class=p>:</span><span class=w> </span><span class=kc>pink</span><span class=p>;</span>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=p>}</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=p>.</span><span class=nc>calendar-component</span><span class=w> </span><span class=nt>span</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>  </span><span class=k>font-weight</span><span class=p>:</span><span class=w> </span><span class=kc>bold</span><span class=p>;</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=p>}</span>
</code></pre></div> <p>Then you need a javascript file that specifies how you interact with this component. You are free to use any javascript framework you want. A good way to make sure this component doesn't clash with other components is to define all code inside an anonymous function that calls itself. This makes all variables defined only be defined inside this component and not affect other components.</p> <div class=highlight><span class=filename>[project root]/components/calendar/script.js</span><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=cm>/* In a file called [project root]/components/calendar/script.js */</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=p>(</span><span class=kd>function</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&quot;.calendar-component&quot;</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>    </span><span class=nb>document</span><span class=p>.</span><span class=nx>querySelector</span><span class=p>(</span><span class=s2>&quot;.calendar-component&quot;</span><span class=p>).</span><span class=nx>onclick</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>      </span><span class=nx>alert</span><span class=p>(</span><span class=s2>&quot;Clicked calendar!&quot;</span><span class=p>);</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=p>};</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>  </span><span class=p>}</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=p>})();</span>
</code></pre></div> <p>Now you need a Django template for your component. Feel free to define more variables like <code>date</code> in this example. When creating an instance of this component we will send in the values for these variables. The template will be rendered with whatever template backend you've specified in your Django settings file.</p> <div class=highlight><span class=filename>[project root]/components/calendar/calendar.html</span><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c>{# In a file called [project root]/components/calendar/template.html #}</span>
<a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>Today&#39;s date is <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>Finally, we use django-components to tie this together. Start by creating a file called <code>calendar.py</code> in your component calendar directory. It will be auto-detected and loaded by the app.</p> <p>Inside this file we create a Component by inheriting from the Component class and specifying the context method. We also register the global component registry so that we easily can render it anywhere in our templates.</p> <div class=highlight><span class=filename>[project root]/components/calendar/calendar.py</span><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># In a file called [project root]/components/calendar/calendar.py</span>
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>    <span class=c1># Templates inside `[your apps]/components` dir and `[project root]/components` dir</span>
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>    <span class=c1># will be automatically found. To customize which template to use based on context</span>
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>    <span class=c1># you can override method `get_template_name` instead of specifying `template_name`.</span>
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>    <span class=c1>#</span>
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>    <span class=c1># `template_name` can be relative to dir where `calendar.py` is, or relative to STATICFILES_DIRS</span>
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>    <span class=n>template_name</span> <span class=o>=</span> <span class=s2>&quot;template.html&quot;</span>
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>    <span class=c1># This component takes one parameter, a date string to show in the template</span>
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>):</span>
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>date</span><span class=p>,</span>
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a>        <span class=p>}</span>
<a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a>
<a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a>    <span class=c1># Both `css` and `js` can be relative to dir where `calendar.py` is, or relative to STATICFILES_DIRS</span>
<a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a>        <span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;style.css&quot;</span>
<a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a>        <span class=n>js</span> <span class=o>=</span> <span class=s2>&quot;script.js&quot;</span>
</code></pre></div> <p>And voilá!! We've created our first component.</p> <h2 id=using-single-file-components>Using single-file components<a class=headerlink href=#using-single-file-components title="Permanent link">¤</a></h2> <p>Components can also be defined in a single file, which is useful for small components. To do this, you can use the <code>template</code>, <code>js</code>, and <code>css</code> class attributes instead of the <code>template_name</code> and <code>Media</code>. For example, here's the calendar component from above, defined in a single file:</p> <div class=highlight><span class=filename>[project root]/components/calendar.py</span><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># In a file called [project root]/components/calendar.py</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span><span class=p>,</span> <span class=n>types</span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>):</span>
<a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>date</span><span class=p>,</span>
<a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>        <span class=p>}</span>
<a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>
<a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>    <span class=n>template</span><span class=p>:</span> <span class=n>types</span><span class=o>.</span><span class=n>django_html</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=s2>        &lt;div class=&quot;calendar-component&quot;&gt;Today&#39;s date is &lt;span&gt;{{ date }}&lt;/span&gt;&lt;/div&gt;</span>
<a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>
<a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>    <span class=n>css</span><span class=p>:</span> <span class=n>types</span><span class=o>.</span><span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=s2>        .calendar-component { width: 200px; background: pink; }</span>
<a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=s2>        .calendar-component span { font-weight: bold; }</span>
<a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a>
<a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a>    <span class=n>js</span><span class=p>:</span> <span class=n>types</span><span class=o>.</span><span class=n>js</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=s2>        (function(){</span>
<a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a><span class=s2>            if (document.querySelector(&quot;.calendar-component&quot;)) {</span>
<a id=__codelineno-18-23 name=__codelineno-18-23 href=#__codelineno-18-23></a><span class=s2>                document.querySelector(&quot;.calendar-component&quot;).onclick = function(){ alert(&quot;Clicked calendar!&quot;); };</span>
<a id=__codelineno-18-24 name=__codelineno-18-24 href=#__codelineno-18-24></a><span class=s2>            }</span>
<a id=__codelineno-18-25 name=__codelineno-18-25 href=#__codelineno-18-25></a><span class=s2>        })()</span>
<a id=__codelineno-18-26 name=__codelineno-18-26 href=#__codelineno-18-26></a><span class=s2>    &quot;&quot;&quot;</span>
</code></pre></div> <p>This makes it easy to create small components without having to create a separate template, CSS, and JS file.</p> <h3 id=syntax-highlight-and-code-assistance>Syntax highlight and code assistance<a class=headerlink href=#syntax-highlight-and-code-assistance title="Permanent link">¤</a></h3> <h4 id=vscode>VSCode<a class=headerlink href=#vscode title="Permanent link">¤</a></h4> <p>Note, in the above example, that the <code>t.django_html</code>, <code>t.css</code>, and <code>t.js</code> types are used to specify the type of the template, CSS, and JS files, respectively. This is not necessary, but if you're using VSCode with the <a href="https://marketplace.visualstudio.com/items?itemName=samwillis.python-inline-source">Python Inline Source Syntax Highlighting</a> extension, it will give you syntax highlighting for the template, CSS, and JS.</p> <h4 id=pycharm-or-other-jetbrains-ides>Pycharm (or other Jetbrains IDEs)<a class=headerlink href=#pycharm-or-other-jetbrains-ides title="Permanent link">¤</a></h4> <p>If you're a Pycharm user (or any other editor from Jetbrains), you can have coding assistance as well:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>):</span>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>date</span><span class=p>,</span>
<a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>        <span class=p>}</span>
<a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>
<a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>    <span class=c1># language=HTML</span>
<a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>    <span class=n>template</span><span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=s2>        &lt;div class=&quot;calendar-component&quot;&gt;Today&#39;s date is &lt;span&gt;{{ date }}&lt;/span&gt;&lt;/div&gt;</span>
<a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>
<a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a>    <span class=c1># language=CSS</span>
<a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a>    <span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=s2>        .calendar-component { width: 200px; background: pink; }</span>
<a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=s2>        .calendar-component span { font-weight: bold; }</span>
<a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a>
<a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a>    <span class=c1># language=JS</span>
<a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a>    <span class=n>js</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a><span class=s2>        (function(){</span>
<a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a><span class=s2>            if (document.querySelector(&quot;.calendar-component&quot;)) {</span>
<a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a><span class=s2>                document.querySelector(&quot;.calendar-component&quot;).onclick = function(){ alert(&quot;Clicked calendar!&quot;); };</span>
<a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a><span class=s2>            }</span>
<a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a><span class=s2>        })()</span>
<a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a><span class=s2>    &quot;&quot;&quot;</span>
</code></pre></div> <p>You don't need to use <code>types.django_html</code>, <code>types.css</code>, <code>types.js</code> since Pycharm uses <a href=https://www.jetbrains.com/help/pycharm/using-language-injections.html>language injections</a>. You only need to write the comments <code># language=&lt;lang&gt;</code> above the variables.</p> <h2 id=use-components-in-templates>Use components in templates<a class=headerlink href=#use-components-in-templates title="Permanent link">¤</a></h2> <p>First load the <code>component_tags</code> tag library, then use the <code>component_[js/css]_dependencies</code> and <code>component</code> tags to render the component to the page.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=cp>{%</span> <span class=k>load</span> <span class=nv>component_tags</span> <span class=cp>%}</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=cp>&lt;!DOCTYPE html&gt;</span>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>My example calendar<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>    <span class=cp>{%</span> <span class=k>component_css_dependencies</span> <span class=cp>%}</span>
<a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
<a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>    <span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2015-06-19&quot;</span> <span class=cp>%}{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
<a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>    <span class=cp>{%</span> <span class=k>component_js_dependencies</span> <span class=cp>%}</span>
<a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <blockquote> <p>NOTE: Instead of writing <code>{% endcomponent %}</code> at the end, you can use a self-closing tag:</p> <p><code>{% component "calendar" date="2015-06-19" / %}</code></p> </blockquote> <p>The output from the above template will be:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=cp>&lt;!DOCTYPE html&gt;</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>  <span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>    <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>My example calendar<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>    <span class=p>&lt;</span><span class=nt>link</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>      <span class=na>href</span><span class=o>=</span><span class=s>&quot;/static/calendar/style.css&quot;</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>      <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/css&quot;</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>      <span class=na>media</span><span class=o>=</span><span class=s>&quot;all&quot;</span>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>      <span class=na>rel</span><span class=o>=</span><span class=s>&quot;stylesheet&quot;</span>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>    <span class=p>/&gt;</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>  <span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a>  <span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a>      Today&#39;s date is <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>2015-06-19<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
<a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;/static/calendar/script.js&quot;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
<a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a>  <span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
<a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a>  <span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
<a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</code></pre></div> <p>This makes it possible to organize your front-end around reusable components. Instead of relying on template tags and keeping your CSS and Javascript in the static directory.</p> <h2 id=use-components-outside-of-templates>Use components outside of templates<a class=headerlink href=#use-components-outside-of-templates title="Permanent link">¤</a></h2> <p><em>New in version 0.81</em></p> <p>Components can be rendered outside of Django templates, calling them as regular functions ("React-style").</p> <p>The component class defines <code>render</code> and <code>render_to_response</code> class methods. These methods accept positional args, kwargs, and slots, offering the same flexibility as the <code>{% component %}</code> tag:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=k>class</span> <span class=nc>SimpleComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=s2>        {</span><span class=si>% lo</span><span class=s2>ad component_tags %}</span>
<a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=s2>        hello: {{ hello }}</span>
<a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=s2>        foo: {{ foo }}</span>
<a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=s2>        kwargs: {{ kwargs|safe }}</span>
<a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=s2>        slot_first: {</span><span class=si>% s</span><span class=s2>lot &quot;first&quot; required / %}</span>
<a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>
<a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>arg1</span><span class=p>,</span> <span class=n>arg2</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a>            <span class=s2>&quot;hello&quot;</span><span class=p>:</span> <span class=n>arg1</span><span class=p>,</span>
<a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a>            <span class=s2>&quot;foo&quot;</span><span class=p>:</span> <span class=n>arg2</span><span class=p>,</span>
<a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a>            <span class=s2>&quot;kwargs&quot;</span><span class=p>:</span> <span class=n>kwargs</span><span class=p>,</span>
<a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a>        <span class=p>}</span>
<a id=__codelineno-22-16 name=__codelineno-22-16 href=#__codelineno-22-16></a>
<a id=__codelineno-22-17 name=__codelineno-22-17 href=#__codelineno-22-17></a><span class=n>rendered</span> <span class=o>=</span> <span class=n>SimpleComponent</span><span class=o>.</span><span class=n>render</span><span class=p>(</span>
<a id=__codelineno-22-18 name=__codelineno-22-18 href=#__codelineno-22-18></a>    <span class=n>args</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;world&quot;</span><span class=p>,</span> <span class=s2>&quot;bar&quot;</span><span class=p>],</span>
<a id=__codelineno-22-19 name=__codelineno-22-19 href=#__codelineno-22-19></a>    <span class=n>kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;kw1&quot;</span><span class=p>:</span> <span class=s2>&quot;test&quot;</span><span class=p>,</span> <span class=s2>&quot;kw2&quot;</span><span class=p>:</span> <span class=s2>&quot;ooo&quot;</span><span class=p>},</span>
<a id=__codelineno-22-20 name=__codelineno-22-20 href=#__codelineno-22-20></a>    <span class=n>slots</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;first&quot;</span><span class=p>:</span> <span class=s2>&quot;FIRST_SLOT&quot;</span><span class=p>},</span>
<a id=__codelineno-22-21 name=__codelineno-22-21 href=#__codelineno-22-21></a>    <span class=n>context</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;from_context&quot;</span><span class=p>:</span> <span class=mi>98</span><span class=p>},</span>
<a id=__codelineno-22-22 name=__codelineno-22-22 href=#__codelineno-22-22></a><span class=p>)</span>
</code></pre></div> <p>Renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>hello: world
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>foo: bar
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>kwargs: {&#39;kw1&#39;: &#39;test&#39;, &#39;kw2&#39;: &#39;ooo&#39;}
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>slot_first: FIRST_SLOT
</code></pre></div> <h3 id=inputs-of-render-and-render_to_response>Inputs of <code>render</code> and <code>render_to_response</code><a class=headerlink href=#inputs-of-render-and-render_to_response title="Permanent link">¤</a></h3> <p>Both <code>render</code> and <code>render_to_response</code> accept the same input:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=n>Component</span><span class=o>.</span><span class=n>render</span><span class=p>(</span>
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>    <span class=n>context</span><span class=p>:</span> <span class=n>Mapping</span> <span class=o>|</span> <span class=n>django</span><span class=o>.</span><span class=n>template</span><span class=o>.</span><span class=n>Context</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>    <span class=n>args</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a>    <span class=n>kwargs</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>    <span class=n>slots</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>SafeString</span> <span class=o>|</span> <span class=n>SlotFunc</span><span class=p>]</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>    <span class=n>escape_slots_content</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</code></pre></div> <ul> <li> <p><em><code>args</code></em> - Positional args for the component. This is the same as calling the component as <code>{% component "my_comp" arg1 arg2 ... %}</code></p> </li> <li> <p><em><code>kwargs</code></em> - Keyword args for the component. This is the same as calling the component as <code>{% component "my_comp" key1=val1 key2=val2 ... %}</code></p> </li> <li> <p><em><code>slots</code></em> - Component slot fills. This is the same as pasing <code>{% fill %}</code> tags to the component. Accepts a dictionary of <code>{ slot_name: slot_content }</code> where <code>slot_content</code> can be a string or <a href=#slotfunc><code>SlotFunc</code></a>.</p> </li> <li> <p><em><code>escape_slots_content</code></em> - Whether the content from <code>slots</code> should be escaped. <code>True</code> by default to prevent XSS attacks. If you disable escaping, you should make sure that any content you pass to the slots is safe, especially if it comes from user input.</p> </li> <li> <p><em><code>context</code></em> - A context (dictionary or Django's Context) within which the component is rendered. The keys on the context can be accessed from within the template.</p> </li> <li>NOTE: In "isolated" mode, context is NOT accessible, and data MUST be passed via component's args and kwargs.</li> </ul> <h4 id=slotfunc><code>SlotFunc</code><a class=headerlink href=#slotfunc title="Permanent link">¤</a></h4> <p>When rendering components with slots in <code>render</code> or <code>render_to_response</code>, you can pass either a string or a function.</p> <p>The function has following signature:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=k>def</span> <span class=nf>render_func</span><span class=p>(</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>   <span class=n>context</span><span class=p>:</span> <span class=n>Context</span><span class=p>,</span>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>   <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>   <span class=n>slot_ref</span><span class=p>:</span> <span class=n>SlotRef</span><span class=p>,</span>
<a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>SafeString</span><span class=p>:</span>
<a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>    <span class=k>return</span> <span class=n>nodelist</span><span class=o>.</span><span class=n>render</span><span class=p>(</span><span class=n>ctx</span><span class=p>)</span>
</code></pre></div> <ul> <li><em><code>context</code></em> - Django's Context available to the Slot Node.</li> <li><em><code>data</code></em> - Data passed to the <code>{% slot %}</code> tag. See <a href=#scoped-slots>Scoped Slots</a>.</li> <li><em><code>slot_ref</code></em> - The default slot content. See <a href=#accessing-original-content-of-slots>Accessing original content of slots</a>.</li> <li>NOTE: The slot is lazily evaluated. To render the slot, convert it to string with <code>str(slot_ref)</code>.</li> </ul> <p>Example:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=k>def</span> <span class=nf>footer_slot</span><span class=p>(</span><span class=n>ctx</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>slot_ref</span><span class=p>):</span>
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>   <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=s2>      SLOT_DATA: </span><span class=si>{</span><span class=n>data</span><span class=p>[</span><span class=s1>&#39;abc&#39;</span><span class=p>]</span><span class=si>}</span>
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=s2>      ORIGINAL: </span><span class=si>{</span><span class=n>slot_ref</span><span class=si>}</span>
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=s2>   &quot;&quot;&quot;</span>
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=n>MyComponent</span><span class=o>.</span><span class=n>render_to_response</span><span class=p>(</span>
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>    <span class=n>slots</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>        <span class=s2>&quot;footer&quot;</span><span class=p>:</span> <span class=n>footer_slot</span><span class=p>,</span>
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>   <span class=p>},</span>
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a><span class=p>)</span>
</code></pre></div> <h3 id=adding-type-hints-with-generics>Adding type hints with Generics<a class=headerlink href=#adding-type-hints-with-generics title="Permanent link">¤</a></h3> <p>The <code>Component</code> class optionally accepts type parameters that allow you to specify the types of args, kwargs, slots, and data.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=kn>from</span> <span class=nn>typing</span> <span class=kn>import</span> <span class=n>NotRequired</span><span class=p>,</span> <span class=n>Tuple</span><span class=p>,</span> <span class=n>TypedDict</span><span class=p>,</span> <span class=n>SlotFunc</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=c1># Positional inputs - Tuple</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=n>Args</span> <span class=o>=</span> <span class=n>Tuple</span><span class=p>[</span><span class=nb>int</span><span class=p>,</span> <span class=nb>str</span><span class=p>]</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=c1># Kwargs inputs - Mapping</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=k>class</span> <span class=nc>Kwargs</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>    <span class=n>variable</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>    <span class=n>another</span><span class=p>:</span> <span class=nb>int</span>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>    <span class=n>maybe_var</span><span class=p>:</span> <span class=n>NotRequired</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=c1># Data returned from `get_context_data` - Mapping</span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=k>class</span> <span class=nc>Data</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>    <span class=n>variable</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>
<a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a><span class=c1># The data available to the `my_slot` scoped slot</span>
<a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a><span class=k>class</span> <span class=nc>MySlotData</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
<a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>    <span class=n>value</span><span class=p>:</span> <span class=nb>int</span>
<a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a>
<a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a><span class=c1># Slot functions - Mapping</span>
<a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a><span class=k>class</span> <span class=nc>Slots</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
<a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a>    <span class=c1># Use SlotFunc for slot functions.</span>
<a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a>    <span class=c1># The generic specifies the `data` dictionary</span>
<a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a>    <span class=n>my_slot</span><span class=p>:</span> <span class=n>NotRequired</span><span class=p>[</span><span class=n>SlotFunc</span><span class=p>[</span><span class=n>MySlotData</span><span class=p>]]</span>
<a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a>
<a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a><span class=k>class</span> <span class=nc>Button</span><span class=p>(</span><span class=n>Component</span><span class=p>[</span><span class=n>Args</span><span class=p>,</span> <span class=n>Kwargs</span><span class=p>,</span> <span class=n>Data</span><span class=p>,</span> <span class=n>Slots</span><span class=p>]):</span>
<a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>variable</span><span class=p>,</span> <span class=n>another</span><span class=p>):</span>
<a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a>            <span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=n>variable</span><span class=p>,</span>
<a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a>        <span class=p>}</span>
</code></pre></div> <p>When you then call <code>Component.render</code> or <code>Component.render_to_response</code>, you will get type hints:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=n>Button</span><span class=o>.</span><span class=n>render</span><span class=p>(</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>    <span class=c1># Error: First arg must be `int`, got `float`</span>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>    <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=mf>1.25</span><span class=p>,</span> <span class=s2>&quot;abc&quot;</span><span class=p>),</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a>    <span class=c1># Error: Key &quot;another&quot; is missing</span>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>    <span class=n>kwargs</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>        <span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=s2>&quot;text&quot;</span><span class=p>,</span>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a>    <span class=p>},</span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=p>)</span>
</code></pre></div> <h3 id=response-class-of-render_to_response>Response class of <code>render_to_response</code><a class=headerlink href=#response-class-of-render_to_response title="Permanent link">¤</a></h3> <p>While <code>render</code> method returns a plain string, <code>render_to_response</code> wraps the rendered content in a "Response" class. By default, this is <code>django.http.HttpResponse</code>.</p> <p>If you want to use a different Response class in <code>render_to_response</code>, set the <code>Component.response_class</code> attribute:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=k>class</span> <span class=nc>MyResponse</span><span class=p>(</span><span class=n>HttpResponse</span><span class=p>):</span>
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>   <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>      <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>      <span class=c1># Configure response</span>
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>      <span class=bp>self</span><span class=o>.</span><span class=n>headers</span> <span class=o>=</span> <span class=o>...</span>
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>      <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=o>...</span>
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a><span class=k>class</span> <span class=nc>SimpleComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a>   <span class=n>response_class</span> <span class=o>=</span> <span class=n>MyResponse</span>
<a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a>   <span class=n>template</span><span class=p>:</span> <span class=n>types</span><span class=o>.</span><span class=n>django_html</span> <span class=o>=</span> <span class=s2>&quot;HELLO&quot;</span>
<a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a>
<a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=n>response</span> <span class=o>=</span> <span class=n>SimpleComponent</span><span class=o>.</span><span class=n>render_to_response</span><span class=p>()</span>
<a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a><span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>response</span><span class=p>,</span> <span class=n>MyResponse</span><span class=p>)</span>
</code></pre></div> <h2 id=use-components-as-views>Use components as views<a class=headerlink href=#use-components-as-views title="Permanent link">¤</a></h2> <p><em>New in version 0.34</em></p> <p><em>Note: Since 0.92, Component no longer subclasses View. To configure the View class, set the nested <code>Component.View</code> class</em></p> <p>Components can now be used as views: - Components define the <code>Component.as_view()</code> class method that can be used the same as <a href=https://docs.djangoproject.com/en/5.1/ref/class-based-views/base/#django.views.generic.base.View.as_view><code>View.as_view()</code></a>.</p> <ul> <li> <p>By default, you can define GET, POST or other HTTP handlers directly on the Component, same as you do with <a href=https://docs.djangoproject.com/en/5.1/ref/class-based-views/base/#view>View</a>. For example, you can override <code>get</code> and <code>post</code> to handle GET and POST requests, respectively.</p> </li> <li> <p>In addition, <code>Component</code> now has a <a href=#inputs-of-render-and-render_to_response><code>render_to_response</code></a> method that renders the component template based on the provided context and slots' data and returns an <code>HttpResponse</code> object.</p> </li> </ul> <h3 id=component-as-view-example>Component as view example<a class=headerlink href=#component-as-view-example title="Permanent link">¤</a></h3> <p>Here's an example of a calendar component defined as a view:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1># In a file called [project root]/components/calendar.py</span>
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>ComponentView</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=s2>        &lt;div class=&quot;calendar-component&quot;&gt;</span>
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=s2>            &lt;div class=&quot;header&quot;&gt;</span>
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=s2>                {</span><span class=si>% s</span><span class=s2>lot &quot;header&quot; / %}</span>
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=s2>            &lt;/div&gt;</span>
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=s2>            &lt;div class=&quot;body&quot;&gt;</span>
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=s2>                Today&#39;s date is &lt;span&gt;{{ date }}&lt;/span&gt;</span>
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=s2>            &lt;/div&gt;</span>
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=s2>        &lt;/div&gt;</span>
<a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>
<a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a>    <span class=c1># Handle GET requests</span>
<a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a>        <span class=n>context</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>GET</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;date&quot;</span><span class=p>,</span> <span class=s2>&quot;2020-06-06&quot;</span><span class=p>),</span>
<a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a>        <span class=p>}</span>
<a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a>        <span class=n>slots</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a>            <span class=s2>&quot;header&quot;</span><span class=p>:</span> <span class=s2>&quot;Calendar header&quot;</span><span class=p>,</span>
<a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a>        <span class=p>}</span>
<a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a>        <span class=c1># Return HttpResponse with the rendered content</span>
<a id=__codelineno-30-27 name=__codelineno-30-27 href=#__codelineno-30-27></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>render_to_response</span><span class=p>(</span>
<a id=__codelineno-30-28 name=__codelineno-30-28 href=#__codelineno-30-28></a>            <span class=n>context</span><span class=o>=</span><span class=n>context</span><span class=p>,</span>
<a id=__codelineno-30-29 name=__codelineno-30-29 href=#__codelineno-30-29></a>            <span class=n>slots</span><span class=o>=</span><span class=n>slots</span><span class=p>,</span>
<a id=__codelineno-30-30 name=__codelineno-30-30 href=#__codelineno-30-30></a>        <span class=p>)</span>
</code></pre></div> <p>Then, to use this component as a view, you should create a <code>urls.py</code> file in your components directory, and add a path to the component's view:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1># In a file called [project root]/components/urls.py</span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>path</span>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=kn>from</span> <span class=nn>components.calendar.calendar</span> <span class=kn>import</span> <span class=n>Calendar</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a>    <span class=n>path</span><span class=p>(</span><span class=s2>&quot;calendar/&quot;</span><span class=p>,</span> <span class=n>Calendar</span><span class=o>.</span><span class=n>as_view</span><span class=p>()),</span>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=p>]</span>
</code></pre></div> <p><code>Component.as_view()</code> is a shorthand for calling <a href=https://docs.djangoproject.com/en/5.1/ref/class-based-views/base/#django.views.generic.base.View.as_view><code>View.as_view()</code></a> and passing the component instance as one of the arguments.</p> <p>Remember to add <code>__init__.py</code> to your components directory, so that Django can find the <code>urls.py</code> file.</p> <p>Finally, include the component's urls in your project's <code>urls.py</code> file:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1># In a file called [project root]/urls.py</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=kn>from</span> <span class=nn>django.urls</span> <span class=kn>import</span> <span class=n>include</span><span class=p>,</span> <span class=n>path</span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=n>urlpatterns</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>    <span class=n>path</span><span class=p>(</span><span class=s2>&quot;components/&quot;</span><span class=p>,</span> <span class=n>include</span><span class=p>(</span><span class=s2>&quot;components.urls&quot;</span><span class=p>)),</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=p>]</span>
</code></pre></div> <p>Note: Slots content are automatically escaped by default to prevent XSS attacks. To disable escaping, set <code>escape_slots_content=False</code> in the <code>render_to_response</code> method. If you do so, you should make sure that any content you pass to the slots is safe, especially if it comes from user input.</p> <p>If you're planning on passing an HTML string, check Django's use of <a href=https://docs.djangoproject.com/en/5.0/ref/utils/#django.utils.html.format_html><code>format_html</code></a> and <a href=https://docs.djangoproject.com/en/5.0/ref/utils/#django.utils.safestring.mark_safe><code>mark_safe</code></a>.</p> <h3 id=modifying-the-view-class>Modifying the View class<a class=headerlink href=#modifying-the-view-class title="Permanent link">¤</a></h3> <p>The View class that handles the requests is defined on <code>Component.View</code>.</p> <p>When you define a GET or POST handlers on the <code>Component</code> class, like so:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>render_to_response</span><span class=p>(</span>
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a>            <span class=n>context</span><span class=o>=</span><span class=p>{</span>
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>                <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>request</span><span class=o>.</span><span class=n>GET</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;date&quot;</span><span class=p>,</span> <span class=s2>&quot;2020-06-06&quot;</span><span class=p>),</span>
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>            <span class=p>},</span>
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>        <span class=p>)</span>
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HttpResponse</span><span class=p>:</span>
<a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>        <span class=n>variable</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>POST</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;variable&quot;</span><span class=p>)</span>
<a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>render_to_response</span><span class=p>(</span>
<a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>            <span class=n>kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=n>variable</span><span class=p>}</span>
<a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>        <span class=p>)</span>
</code></pre></div> <p>Then the request is still handled by <code>Component.View.get()</code> or <code>Component.View.post()</code> methods. However, by default, <code>Component.View.get()</code> points to <code>Component.get()</code>, and so on.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=k>class</span> <span class=nc>ComponentView</span><span class=p>(</span><span class=n>View</span><span class=p>):</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>    <span class=n>component</span><span class=p>:</span> <span class=n>Component</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>    <span class=o>...</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>    <span class=k>def</span> <span class=nf>get</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>
<a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>
<a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>    <span class=o>...</span>
</code></pre></div> <p>If you want to define your own <code>View</code> class, you need to: 1. Set the class as <code>Component.View</code> 2. Subclass from <code>ComponentView</code>, so the View instance has access to the component class.</p> <p>In the example below, we added extra logic into <code>View.setup()</code>.</p> <p>Note that the POST handler is still defined at the top. This is because <code>View</code> subclasses <code>ComponentView</code>, which defines the <code>post()</code> method that calls <code>Component.post()</code>.</p> <p>If you were to overwrite the <code>View.post()</code> method, then <code>Component.post()</code> would be ignored.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>ComponentView</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>
<a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a>
<a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>    <span class=k>def</span> <span class=nf>post</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>HttpResponse</span><span class=p>:</span>
<a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>        <span class=n>variable</span> <span class=o>=</span> <span class=n>request</span><span class=o>.</span><span class=n>POST</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;variable&quot;</span><span class=p>)</span>
<a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>component</span><span class=o>.</span><span class=n>render_to_response</span><span class=p>(</span>
<a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>            <span class=n>kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=n>variable</span><span class=p>}</span>
<a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a>        <span class=p>)</span>
<a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>
<a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>    <span class=k>class</span> <span class=nc>View</span><span class=p>(</span><span class=n>ComponentView</span><span class=p>):</span>
<a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a>        <span class=k>def</span> <span class=nf>setup</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>            <span class=nb>super</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
<a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a>
<a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>            <span class=n>do_something_extra</span><span class=p>(</span><span class=n>request</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</code></pre></div> <h2 id=registering-components>Registering components<a class=headerlink href=#registering-components title="Permanent link">¤</a></h2> <p>In previous examples you could repeatedly see us using <code>@register()</code> to "register" the components. In this section we dive deeper into what it actually means and how you can manage (add or remove) components.</p> <p>As a reminder, we may have a component like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>    <span class=n>template_name</span> <span class=o>=</span> <span class=s2>&quot;template.html&quot;</span>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>    <span class=c1># This component takes one parameter, a date string to show in the template</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>):</span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>date</span><span class=p>,</span>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>        <span class=p>}</span>
</code></pre></div> <p>which we then render in the template as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;1970-01-01&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>As you can see, <code>@register</code> links up the component class with the <code>{% component %}</code> template tag. So when the template tag comes across a component called <code>"calendar"</code>, it can look up it's class and instantiate it.</p> <h3 id=what-is-componentregistry>What is ComponentRegistry<a class=headerlink href=#what-is-componentregistry title="Permanent link">¤</a></h3> <p>The <code>@register</code> decorator is a shortcut for working with the <code>ComponentRegistry</code>.</p> <p><code>ComponentRegistry</code> manages which components can be used in the template tags.</p> <p>Each <code>ComponentRegistry</code> instance is associated with an instance of Django's <code>Library</code>. And Libraries are inserted into Django template using the <code>{% load %}</code> tags.</p> <p>The <code>@register</code> decorator accepts an optional kwarg <code>registry</code>, which specifies, the <code>ComponentRegistry</code> to register components into. If omitted, the default <code>ComponentRegistry</code> instance defined in django_components is used.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=n>my_registry</span> <span class=o>=</span> <span class=n>ComponentRegistry</span><span class=p>()</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a><span class=nd>@register</span><span class=p>(</span><span class=n>registry</span><span class=o>=</span><span class=n>my_registry</span><span class=p>)</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>    <span class=o>...</span>
</code></pre></div> <p>The default <code>ComponentRegistry</code> is associated with the <code>Library</code> that you load when you call <code>{% load component_tags %}</code> inside your template, or when you add <code>django_components.templatetags.component_tags</code> to the template builtins.</p> <p>So when you register or unregister a component to/from a component registry, then behind the scenes the registry automatically adds/removes the component's template tags to/from the Library, so you can call the component from within the templates such as <code>{% component "my_comp" %}</code>.</p> <h3 id=working-with-componentregistry>Working with ComponentRegistry<a class=headerlink href=#working-with-componentregistry title="Permanent link">¤</a></h3> <p>The default <code>ComponentRegistry</code> instance can be imported as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>registry</span>
</code></pre></div> <p>You can use the registry to manually add/remove/get components:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>registry</span>
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=c1># Register components</span>
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=n>registry</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s2>&quot;button&quot;</span><span class=p>,</span> <span class=n>ButtonComponent</span><span class=p>)</span>
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=n>registry</span><span class=o>.</span><span class=n>register</span><span class=p>(</span><span class=s2>&quot;card&quot;</span><span class=p>,</span> <span class=n>CardComponent</span><span class=p>)</span>
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=c1># Get all or single</span>
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=n>registry</span><span class=o>.</span><span class=n>all</span><span class=p>()</span>  <span class=c1># {&quot;button&quot;: ButtonComponent, &quot;card&quot;: CardComponent}</span>
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=n>registry</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;card&quot;</span><span class=p>)</span>  <span class=c1># CardComponent</span>
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=c1># Unregister single component</span>
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a><span class=n>registry</span><span class=o>.</span><span class=n>unregister</span><span class=p>(</span><span class=s2>&quot;card&quot;</span><span class=p>)</span>
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a><span class=c1># Unregister all components</span>
<a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=n>registry</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</code></pre></div> <h3 id=registering-components-to-custom-componentregistry>Registering components to custom ComponentRegistry<a class=headerlink href=#registering-components-to-custom-componentregistry title="Permanent link">¤</a></h3> <p>In rare cases, you may want to manage your own instance of <code>ComponentRegistry</code>, or register components onto a different <code>Library</code> instance than the default one.</p> <p>The <code>Library</code> instance can be set at instantiation of <code>ComponentRegistry</code>. If omitted, then the default Library instance from django_components is used.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=kn>from</span> <span class=nn>django.template</span> <span class=kn>import</span> <span class=n>Library</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>ComponentRegistry</span>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=n>my_library</span> <span class=o>=</span> <span class=n>Library</span><span class=p>(</span><span class=o>...</span><span class=p>)</span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=n>my_registry</span> <span class=o>=</span> <span class=n>ComponentRegistry</span><span class=p>(</span><span class=n>library</span><span class=o>=</span><span class=n>my_library</span><span class=p>)</span>
</code></pre></div> <p>When you have defined your own <code>ComponentRegistry</code>, you can either register the components with <code>my_registry.register()</code>, or pass the registry to the <code>@component.register()</code> decorator via the <code>registry</code> kwarg:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=kn>from</span> <span class=nn>path.to.my.registry</span> <span class=kn>import</span> <span class=n>my_registry</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;my_component&quot;</span><span class=p>,</span> <span class=n>registry</span><span class=o>=</span><span class=n>my_registry</span><span class=p>)</span>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>    <span class=o>...</span>
</code></pre></div> <p>NOTE: The Library instance can be accessed under <code>library</code> attribute of <code>ComponentRegistry</code>.</p> <h2 id=autodiscovery>Autodiscovery<a class=headerlink href=#autodiscovery title="Permanent link">¤</a></h2> <p>Every component that you want to use in the template with the <code>{% component %}</code> tag needs to be registered with the ComponentRegistry. Normally, we use the <code>@register</code> decorator for that:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>    <span class=o>...</span>
</code></pre></div> <p>But for the component to be registered, the code needs to be executed - the file needs to be imported as a module.</p> <p>One way to do that is by importing all your components in <code>apps.py</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=kn>from</span> <span class=nn>django.apps</span> <span class=kn>import</span> <span class=n>AppConfig</span>
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=k>class</span> <span class=nc>MyAppConfig</span><span class=p>(</span><span class=n>AppConfig</span><span class=p>):</span>
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>    <span class=n>name</span> <span class=o>=</span> <span class=s2>&quot;my_app&quot;</span>
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>    <span class=k>def</span> <span class=nf>ready</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>        <span class=kn>from</span> <span class=nn>components.card.card</span> <span class=kn>import</span> <span class=n>Card</span>
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>        <span class=kn>from</span> <span class=nn>components.list.list</span> <span class=kn>import</span> <span class=n>List</span>
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>        <span class=kn>from</span> <span class=nn>components.menu.menu</span> <span class=kn>import</span> <span class=n>Menu</span>
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>        <span class=kn>from</span> <span class=nn>components.button.button</span> <span class=kn>import</span> <span class=n>Button</span>
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>        <span class=o>...</span>
</code></pre></div> <p>However, there's a simpler way!</p> <p>By default, the Python files in the <code>STATICFILES_DIRS</code> directories are auto-imported in order to auto-register the components.</p> <p>Autodiscovery occurs when Django is loaded, during the <code>ready</code> hook of the <code>apps.py</code> file.</p> <p>If you are using autodiscovery, keep a few points in mind:</p> <ul> <li>Avoid defining any logic on the module-level inside the <code>components</code> dir, that you would not want to run anyway.</li> <li>Components inside the auto-imported files still need to be registered with <code>@register()</code></li> <li>Auto-imported component files must be valid Python modules, they must use suffix <code>.py</code>, and module name should follow <a href=https://peps.python.org/pep-0008/#package-and-module-names>PEP-8</a>.</li> </ul> <p>Autodiscovery can be disabled in the <a href=#disable-autodiscovery>settings</a>.</p> <h3 id=manually-trigger-autodiscovery>Manually trigger autodiscovery<a class=headerlink href=#manually-trigger-autodiscovery title="Permanent link">¤</a></h3> <p>Autodiscovery can be also triggered manually as a function call. This is useful if you want to run autodiscovery at a custom point of the lifecycle:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>autodiscover</span>
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>
<a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=n>autodiscover</span><span class=p>()</span>
</code></pre></div> <h2 id=using-slots-in-templates>Using slots in templates<a class=headerlink href=#using-slots-in-templates title="Permanent link">¤</a></h2> <p><em>New in version 0.26</em>:</p> <ul> <li>The <code>slot</code> tag now serves only to declare new slots inside the component template.</li> <li>To override the content of a declared slot, use the newly introduced <code>fill</code> tag instead.</li> <li>Whereas unfilled slots used to raise a warning, filling a slot is now optional by default.</li> <li>To indicate that a slot must be filled, the new <code>required</code> option should be added at the end of the <code>slot</code> tag.</li> </ul> <hr> <p>Components support something called 'slots'. When a component is used inside another template, slots allow the parent template to override specific parts of the child component by passing in different content. This mechanism makes components more reusable and composable. This behavior is similar to <a href=https://vuejs.org/guide/components/slots.html>slots in Vue</a>.</p> <p>In the example below we introduce two block tags that work hand in hand to make this work. These are...</p> <ul> <li><code>{% slot &lt;name&gt; %}</code>/<code>{% endslot %}</code>: Declares a new slot in the component template.</li> <li><code>{% fill &lt;name&gt; %}</code>/<code>{% endfill %}</code>: (Used inside a <code>component</code> tag pair.) Fills a declared slot with the specified content.</li> </ul> <p>Let's update our calendar component to support more customization. We'll add <code>slot</code> tag pairs to its template, <em>template.html</em>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;header&quot;</span> <span class=cp>%}</span>Calendar header<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;body&quot;</span> <span class=cp>%}</span>Today&#39;s date is <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>When using the component, you specify which slots you want to fill and where you want to use the defaults from the template. It looks like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>    <span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;body&quot;</span> <span class=cp>%}</span>Can you believe it&#39;s already <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>??<span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>Since the 'header' fill is unspecified, it's taken from the base template. If you put this in a template, and pass in <code>date=2020-06-06</code>, this is what gets rendered:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>        Calendar header
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>        Can you believe it&#39;s already <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>2020-06-06<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>??
<a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h3 id=default-slot>Default slot<a class=headerlink href=#default-slot title="Permanent link">¤</a></h3> <p><em>Added in version 0.28</em></p> <p>As you can see, component slots lets you write reusable containers that you fill in when you use a component. This makes for highly reusable components that can be used in different circumstances.</p> <p>It can become tedious to use <code>fill</code> tags everywhere, especially when you're using a component that declares only one slot. To make things easier, <code>slot</code> tags can be marked with an optional keyword: <code>default</code>. When added to the end of the tag (as shown below), this option lets you pass filling content directly in the body of a <code>component</code> tag pair – without using a <code>fill</code> tag. Choose carefully, though: a component template may contain at most one slot that is marked as <code>default</code>. The <code>default</code> option can be combined with other slot options, e.g. <code>required</code>.</p> <p>Here's the same example as before, except with default slots and implicit filling.</p> <p>The template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;header&quot;</span> <span class=cp>%}</span>Calendar header<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;body&quot;</span> <span class=nv>default</span> <span class=cp>%}</span>Today&#39;s date is <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>Including the component (notice how the <code>fill</code> tag is omitted):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>    Can you believe it&#39;s already <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>??
<a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>The rendered result (exactly the same as before):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>Calendar header<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>Can you believe it&#39;s already <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>2020-06-06<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>??<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>You may be tempted to combine implicit fills with explicit <code>fill</code> tags. This will not work. The following component template will raise an error when compiled.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=c>{# DON&#39;T DO THIS #}</span>
<a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>    <span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;header&quot;</span> <span class=cp>%}</span>Totally new header!<span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a>    Can you believe it&#39;s already <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>??
<a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>By contrast, it is permitted to use <code>fill</code> tags in nested components, e.g.:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>    <span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;beautiful-box&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a>        <span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;content&quot;</span> <span class=cp>%}</span> Can you believe it&#39;s already <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span><span class=cp>{{</span> <span class=nv>date</span> <span class=cp>}}</span><span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>?? <span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a>    <span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
<a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>This is fine too:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>    <span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;header&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>        <span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar-header&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>            Super Special Calendar Header
<a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>        <span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
<a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>    <span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <h3 id=render-fill-in-multiple-places>Render fill in multiple places<a class=headerlink href=#render-fill-in-multiple-places title="Permanent link">¤</a></h3> <p><em>Added in version 0.70</em></p> <p>You can render the same content in multiple places by defining multiple slots with identical names:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;image&quot;</span> <span class=cp>%}</span>Image here<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;image&quot;</span> <span class=cp>%}</span>Image here<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>So if used like:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>    <span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;image&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a>        <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;...&quot;</span> <span class=p>/&gt;</span>
<a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a>    <span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>This renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a>        <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;...&quot;</span> <span class=p>/&gt;</span>
<a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>        <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;...&quot;</span> <span class=p>/&gt;</span>
<a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h4 id=default-and-required-slots>Default and required slots<a class=headerlink href=#default-and-required-slots title="Permanent link">¤</a></h4> <p>If you use a slot multiple times, you can still mark the slot as <code>default</code> or <code>required</code>. For that, you must mark ONLY ONE of the identical slots.</p> <p>We recommend to mark the first occurence for consistency, e.g.:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;image&quot;</span> <span class=nv>default</span> <span class=nv>required</span> <span class=cp>%}</span>Image here<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;image&quot;</span> <span class=cp>%}</span>Image here<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>Which you can then use are regular default slot:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;...&quot;</span> <span class=p>/&gt;</span>
<a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <h3 id=accessing-original-content-of-slots>Accessing original content of slots<a class=headerlink href=#accessing-original-content-of-slots title="Permanent link">¤</a></h3> <p><em>Added in version 0.26</em></p> <blockquote> <p>NOTE: In version 0.77, the syntax was changed from</p> <div class=highlight><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;my_slot&quot;</span> <span class=k>as</span> <span class=s2>&quot;alias&quot;</span> <span class=cp>%}</span><span class=x> </span><span class=cp>{{</span> <span class=nv>alias.default</span> <span class=cp>}}</span>
</code></pre></div> <p>to</p> <div class=highlight><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;my_slot&quot;</span> <span class=nv>default</span><span class=o>=</span><span class=s2>&quot;slot_default&quot;</span> <span class=cp>%}</span><span class=x> </span><span class=cp>{{</span> <span class=nv>slot_default</span> <span class=cp>}}</span>
</code></pre></div> </blockquote> <p>Sometimes you may want to keep the original slot, but only wrap or prepend/append content to it. To do so, you can access the default slot via the <code>default</code> kwarg.</p> <p>Similarly to the <code>data</code> attribute, you specify the variable name through which the default slot will be made available.</p> <p>For instance, let's say you're filling a slot called 'body'. To render the original slot, assign it to a variable using the <code>'default'</code> keyword. You then render this variable to insert the default content:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2020-06-06&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>    <span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;body&quot;</span> <span class=nv>default</span><span class=o>=</span><span class=s2>&quot;body_default&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>        <span class=cp>{{</span> <span class=nv>body_default</span> <span class=cp>}}</span>. Have a great day!
<a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a>    <span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>This produces:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;calendar-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;header&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>        Calendar header
<a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;body&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>        Today&#39;s date is <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>2020-06-06<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>. Have a great day!
<a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h3 id=conditional-slots>Conditional slots<a class=headerlink href=#conditional-slots title="Permanent link">¤</a></h3> <p><em>Added in version 0.26.</em></p> <blockquote> <p>NOTE: In version 0.70, <code>{% if_filled %}</code> tags were replaced with <code>{{ component_vars.is_filled }}</code> variables. If your slot name contained special characters, see the section "Accessing slot names with special characters".</p> </blockquote> <p>In certain circumstances, you may want the behavior of slot filling to depend on whether or not a particular slot is filled.</p> <p>For example, suppose we have the following component template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;frontmatter-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;title&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;title&quot;</span> <span class=cp>%}</span>Title<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;subtitle&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;subtitle&quot;</span> <span class=cp>%}</span><span class=c>{# Optional subtitle #}</span><span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>By default the slot named 'subtitle' is empty. Yet when the component is used without explicit fills, the div containing the slot is still rendered, as shown below:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;frontmatter-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;title&quot;</span><span class=p>&gt;</span>Title<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;subtitle&quot;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>This may not be what you want. What if instead the outer 'subtitle' div should only be included when the inner slot is in fact filled?</p> <p>The answer is to use the <code>{{ component_vars.is_filled.&lt;name&gt; }}</code> variable. You can use this together with Django's <code>{% if/elif/else/endif %}</code> tags to define a block whose contents will be rendered only if the component slot with the corresponding 'name' is filled.</p> <p>This is what our example looks like with <code>component_vars.is_filled</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;frontmatter-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;title&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;title&quot;</span> <span class=cp>%}</span>Title<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a>    <span class=cp>{%</span> <span class=k>if</span> <span class=nv>component_vars.is_filled.subtitle</span> <span class=cp>%}</span>
<a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;subtitle&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;subtitle&quot;</span> <span class=cp>%}</span><span class=c>{# Optional subtitle #}</span><span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a>    <span class=cp>{%</span> <span class=k>endif</span> <span class=cp>%}</span>
<a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>Here's our example with more complex branching.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;frontmatter-component&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;title&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;title&quot;</span> <span class=cp>%}</span>Title<span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>    <span class=cp>{%</span> <span class=k>if</span> <span class=nv>component_vars.is_filled.subtitle</span> <span class=cp>%}</span>
<a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;subtitle&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a>        <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;subtitle&quot;</span> <span class=cp>%}</span><span class=c>{# Optional subtitle #}</span><span class=cp>{%</span> <span class=k>endslot</span> <span class=cp>%}</span>
<a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a>    <span class=cp>{%</span> <span class=k>elif</span> <span class=nv>component_vars.is_filled.title</span> <span class=cp>%}</span>
<a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a>        ...
<a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a>    <span class=cp>{%</span> <span class=k>elif</span> <span class=nv>component_vars.is_filled</span><span class=p>.</span><span class=o>&lt;</span><span class=nv>name</span><span class=o>&gt;</span> <span class=cp>%}</span>
<a id=__codelineno-67-12 name=__codelineno-67-12 href=#__codelineno-67-12></a>        ...
<a id=__codelineno-67-13 name=__codelineno-67-13 href=#__codelineno-67-13></a>    <span class=cp>{%</span> <span class=k>endif</span> <span class=cp>%}</span>
<a id=__codelineno-67-14 name=__codelineno-67-14 href=#__codelineno-67-14></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>Sometimes you're not interested in whether a slot is filled, but rather that it <em>isn't</em>. To negate the meaning of <code>component_vars.is_filled</code>, simply treat it as boolean and negate it with <code>not</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=cp>{%</span> <span class=k>if</span> <span class=k>not</span> <span class=nv>component_vars.is_filled.subtitle</span> <span class=cp>%}</span>
<a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;subtitle&quot;</span><span class=p>&gt;</span>
<a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a>    <span class=cp>{%</span> <span class=k>slot</span> <span class=s2>&quot;subtitle&quot;</span> <span class=o>/</span> <span class=cp>%}</span>
<a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a><span class=cp>{%</span> <span class=k>endif</span> <span class=cp>%}</span>
</code></pre></div> <h4 id=accessing-is_filled-of-slot-names-with-special-characters>Accessing <code>is_filled</code> of slot names with special characters<a class=headerlink href=#accessing-is_filled-of-slot-names-with-special-characters title="Permanent link">¤</a></h4> <p>To be able to access a slot name via <code>component_vars.is_filled</code>, the slot name needs to be composed of only alphanumeric characters and underscores (e.g. <code>this__isvalid_123</code>).</p> <p>However, you can still define slots with other special characters. In such case, the slot name in <code>component_vars.is_filled</code> is modified to replace all invalid characters into <code>_</code>.</p> <p>So a slot named <code>"my super-slot :)"</code> will be available as <code>component_vars.is_filled.my_super_slot___</code>.</p> <h3 id=scoped-slots>Scoped slots<a class=headerlink href=#scoped-slots title="Permanent link">¤</a></h3> <p><em>Added in version 0.76</em>:</p> <p>Consider a component with slot(s). This component may do some processing on the inputs, and then use the processed variable in the slot's default template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;my_comp&quot;</span><span class=p>)</span>
<a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a><span class=k>class</span> <span class=nc>MyComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=s2>        &lt;div&gt;</span>
<a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=s2>            {</span><span class=si>% s</span><span class=s2>lot &quot;content&quot; default %}</span>
<a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a><span class=s2>                input: {{ input }}</span>
<a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a><span class=s2>            {</span><span class=si>% e</span><span class=s2>ndslot %}</span>
<a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a><span class=s2>        &lt;/div&gt;</span>
<a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a>
<a id=__codelineno-69-11 name=__codelineno-69-11 href=#__codelineno-69-11></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>input</span><span class=p>):</span>
<a id=__codelineno-69-12 name=__codelineno-69-12 href=#__codelineno-69-12></a>        <span class=n>processed_input</span> <span class=o>=</span> <span class=n>do_something</span><span class=p>(</span><span class=nb>input</span><span class=p>)</span>
<a id=__codelineno-69-13 name=__codelineno-69-13 href=#__codelineno-69-13></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;input&quot;</span><span class=p>:</span> <span class=n>processed_input</span><span class=p>}</span>
</code></pre></div> <p>You may want to design a component so that users of your component can still access the <code>input</code> variable, so they don't have to recompute it.</p> <p>This behavior is called "scoped slots". This is inspired by <a href=https://vuejs.org/guide/components/slots.html#scoped-slots>Vue scoped slots</a> and <a href="https://github.com/Xzya/django-web-components/tree/master?tab=readme-ov-file#scoped-slots">scoped slots of django-web-components</a>.</p> <p>Using scoped slots consists of two steps:</p> <ol> <li>Passing data to <code>slot</code> tag</li> <li>Accessing data in <code>fill</code> tag</li> </ol> <h4 id=passing-data-to-slots>Passing data to slots<a class=headerlink href=#passing-data-to-slots title="Permanent link">¤</a></h4> <p>To pass the data to the <code>slot</code> tag, simply pass them as keyword attributes (<code>key=value</code>):</p> <div class=highlight><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;my_comp&quot;</span><span class=p>)</span>
<a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=k>class</span> <span class=nc>MyComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=s2>        &lt;div&gt;</span>
<a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a><span class=s2>            {</span><span class=si>% s</span><span class=s2>lot &quot;content&quot; default input=input %}</span>
<a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a><span class=s2>                input: {{ input }}</span>
<a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a><span class=s2>            {</span><span class=si>% e</span><span class=s2>ndslot %}</span>
<a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a><span class=s2>        &lt;/div&gt;</span>
<a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-70-10 name=__codelineno-70-10 href=#__codelineno-70-10></a>
<a id=__codelineno-70-11 name=__codelineno-70-11 href=#__codelineno-70-11></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>input</span><span class=p>):</span>
<a id=__codelineno-70-12 name=__codelineno-70-12 href=#__codelineno-70-12></a>        <span class=n>processed_input</span> <span class=o>=</span> <span class=n>do_something</span><span class=p>(</span><span class=nb>input</span><span class=p>)</span>
<a id=__codelineno-70-13 name=__codelineno-70-13 href=#__codelineno-70-13></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-70-14 name=__codelineno-70-14 href=#__codelineno-70-14></a>            <span class=s2>&quot;input&quot;</span><span class=p>:</span> <span class=n>processed_input</span><span class=p>,</span>
<a id=__codelineno-70-15 name=__codelineno-70-15 href=#__codelineno-70-15></a>        <span class=p>}</span>
</code></pre></div> <h4 id=accessing-slot-data-in-fill>Accessing slot data in fill<a class=headerlink href=#accessing-slot-data-in-fill title="Permanent link">¤</a></h4> <p>Next, we head over to where we define a fill for this slot. Here, to access the slot data we set the <code>data</code> attribute to the name of the variable through which we want to access the slot data. In the example below, we set it to <code>data</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;my_comp&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;content&quot;</span> <span class=nv>data</span><span class=o>=</span><span class=s2>&quot;data&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=x>        </span><span class=cp>{{</span> <span class=nv>data.input</span> <span class=cp>}}</span>
<a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=x>    </span><span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>To access slot data on a default slot, you have to explictly define the <code>{% fill %}</code> tags.</p> <p>So this works:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;my_comp&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;content&quot;</span> <span class=nv>data</span><span class=o>=</span><span class=s2>&quot;data&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a><span class=x>        </span><span class=cp>{{</span> <span class=nv>data.input</span> <span class=cp>}}</span>
<a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a><span class=x>    </span><span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>While this does not:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;my_comp&quot;</span> <span class=nv>data</span><span class=o>=</span><span class=s2>&quot;data&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=x>    </span><span class=cp>{{</span> <span class=nv>data.input</span> <span class=cp>}}</span>
<a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>Note: You cannot set the <code>data</code> attribute and <a href=#accessing-original-content-of-slots><code>default</code> attribute)</a> to the same name. This raises an error:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;my_comp&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;content&quot;</span> <span class=nv>data</span><span class=o>=</span><span class=s2>&quot;slot_var&quot;</span> <span class=nv>default</span><span class=o>=</span><span class=s2>&quot;slot_var&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a><span class=x>        </span><span class=cp>{{</span> <span class=nv>slot_var.input</span> <span class=cp>}}</span>
<a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a><span class=x>    </span><span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <h2 id=passing-data-to-components>Passing data to components<a class=headerlink href=#passing-data-to-components title="Permanent link">¤</a></h2> <p>As seen above, you can pass arguments to components like so:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=x>&lt;body&gt;</span>
<a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2015-06-19&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a><span class=x>    </span><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
<a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a><span class=x>&lt;/body&gt;</span>
</code></pre></div> <h3 id=accessing-data-passed-to-the-component>Accessing data passed to the component<a class=headerlink href=#accessing-data-passed-to-the-component title="Permanent link">¤</a></h3> <p>When you call <code>Component.render</code> or <code>Component.render_to_response</code>, the inputs to these methods can be accessed from within the instance under <code>self.input</code>.</p> <p>This means that you can use <code>self.input</code> inside: - <code>get_context_data</code> - <code>get_template_name</code> - <code>get_template_string</code></p> <p><code>self.input</code> is defined only for the duration of <code>Component.render</code>, and returns <code>None</code> when called outside of this.</p> <p><code>self.input</code> has the same fields as the input to <code>Component.render</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=k>class</span> <span class=nc>TestComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>var1</span><span class=p>,</span> <span class=n>var2</span><span class=p>,</span> <span class=n>variable</span><span class=p>,</span> <span class=n>another</span><span class=p>,</span> <span class=o>**</span><span class=n>attrs</span><span class=p>):</span>
<a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a>        <span class=k>assert</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>args</span> <span class=o>==</span> <span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=s2>&quot;str&quot;</span><span class=p>)</span>
<a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a>        <span class=k>assert</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>kwargs</span> <span class=o>==</span> <span class=p>{</span><span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=s2>&quot;test&quot;</span><span class=p>,</span> <span class=s2>&quot;another&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>}</span>
<a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a>        <span class=k>assert</span> <span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>slots</span> <span class=o>==</span> <span class=p>{</span><span class=s2>&quot;my_slot&quot;</span><span class=p>:</span> <span class=s2>&quot;MY_SLOT&quot;</span><span class=p>}</span>
<a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a>        <span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>input</span><span class=o>.</span><span class=n>context</span><span class=p>,</span> <span class=n>Context</span><span class=p>)</span>
<a id=__codelineno-76-7 name=__codelineno-76-7 href=#__codelineno-76-7></a>
<a id=__codelineno-76-8 name=__codelineno-76-8 href=#__codelineno-76-8></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-76-9 name=__codelineno-76-9 href=#__codelineno-76-9></a>            <span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=n>variable</span><span class=p>,</span>
<a id=__codelineno-76-10 name=__codelineno-76-10 href=#__codelineno-76-10></a>        <span class=p>}</span>
<a id=__codelineno-76-11 name=__codelineno-76-11 href=#__codelineno-76-11></a>
<a id=__codelineno-76-12 name=__codelineno-76-12 href=#__codelineno-76-12></a><span class=n>rendered</span> <span class=o>=</span> <span class=n>TestComponent</span><span class=o>.</span><span class=n>render</span><span class=p>(</span>
<a id=__codelineno-76-13 name=__codelineno-76-13 href=#__codelineno-76-13></a>    <span class=n>kwargs</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;variable&quot;</span><span class=p>:</span> <span class=s2>&quot;test&quot;</span><span class=p>,</span> <span class=s2>&quot;another&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>},</span>
<a id=__codelineno-76-14 name=__codelineno-76-14 href=#__codelineno-76-14></a>    <span class=n>args</span><span class=o>=</span><span class=p>(</span><span class=mi>123</span><span class=p>,</span> <span class=s2>&quot;str&quot;</span><span class=p>),</span>
<a id=__codelineno-76-15 name=__codelineno-76-15 href=#__codelineno-76-15></a>    <span class=n>slots</span><span class=o>=</span><span class=p>{</span><span class=s2>&quot;my_slot&quot;</span><span class=p>:</span> <span class=s2>&quot;MY_SLOT&quot;</span><span class=p>},</span>
<a id=__codelineno-76-16 name=__codelineno-76-16 href=#__codelineno-76-16></a><span class=p>)</span>
</code></pre></div> <h2 id=rendering-html-attributes>Rendering HTML attributes<a class=headerlink href=#rendering-html-attributes title="Permanent link">¤</a></h2> <p><em>New in version 0.74</em>:</p> <p>You can use the <code>html_attrs</code> tag to render HTML attributes, given a dictionary of values.</p> <p>So if you have a template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=x>&lt;div class=&quot;</span><span class=cp>{{</span> <span class=nv>classes</span> <span class=cp>}}</span><span class=x>&quot; data-id=&quot;</span><span class=cp>{{</span> <span class=nv>my_id</span> <span class=cp>}}</span><span class=x>&quot;&gt;</span>
<a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>You can simplify it with <code>html_attrs</code> tag:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=x>&lt;div </span><span class=cp>{%</span> <span class=k>html_attrs</span> <span class=nv>attrs</span> <span class=cp>%}</span><span class=x>&gt;</span>
<a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>where <code>attrs</code> is:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=n>classes</span><span class=p>,</span>
<a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a>    <span class=s2>&quot;data-id&quot;</span><span class=p>:</span> <span class=n>my_id</span><span class=p>,</span>
<a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a><span class=p>}</span>
</code></pre></div> <p>This feature is inspired by <a href="https://github.com/Xzya/django-web-components/tree/master?tab=readme-ov-file#default--merged-attributes"><code>merge_attrs</code> tag of django-web-components</a> and <a href=https://vuejs.org/guide/components/attrs>"fallthrough attributes" feature of Vue</a>.</p> <h3 id=removing-atttributes>Removing atttributes<a class=headerlink href=#removing-atttributes title="Permanent link">¤</a></h3> <p>Attributes that are set to <code>None</code> or <code>False</code> are NOT rendered.</p> <p>So given this input:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;text-green&quot;</span><span class=p>,</span>
<a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a>    <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a>    <span class=s2>&quot;data-id&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a><span class=p>}</span>
</code></pre></div> <p>And template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a><span class=x>&lt;div </span><span class=cp>{%</span> <span class=k>html_attrs</span> <span class=nv>attrs</span> <span class=cp>%}</span><span class=x>&gt;</span>
<a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>Then this renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;text-green&quot;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h3 id=boolean-attributes>Boolean attributes<a class=headerlink href=#boolean-attributes title="Permanent link">¤</a></h3> <p>In HTML, boolean attributes are usually rendered with no value. Consider the example below where the first button is disabled and the second is not:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=p>&lt;</span><span class=nt>button</span> <span class=na>disabled</span><span class=p>&gt;</span>Click me!<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>button</span><span class=p>&gt;</span>Click me!<span class=p>&lt;/</span><span class=nt>button</span><span class=p>&gt;</span>
</code></pre></div> <p>HTML rendering with <code>html_attrs</code> tag or <code>attributes_to_string</code> works the same way, where <code>key=True</code> is rendered simply as <code>key</code>, and <code>key=False</code> is not render at all.</p> <p>So given this input:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a>    <span class=s2>&quot;disabled&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-84-3 name=__codelineno-84-3 href=#__codelineno-84-3></a>    <span class=s2>&quot;autofocus&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-84-4 name=__codelineno-84-4 href=#__codelineno-84-4></a><span class=p>}</span>
</code></pre></div> <p>And template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=x>&lt;div </span><span class=cp>{%</span> <span class=k>html_attrs</span> <span class=nv>attrs</span> <span class=cp>%}</span><span class=x>&gt;</span>
<a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>Then this renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>disabled</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h3 id=default-attributes>Default attributes<a class=headerlink href=#default-attributes title="Permanent link">¤</a></h3> <p>Sometimes you may want to specify default values for attributes. You can pass a second argument (or kwarg <code>defaults</code>) to set the defaults.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=x>&lt;div </span><span class=cp>{%</span> <span class=k>html_attrs</span> <span class=nv>attrs</span> <span class=nv>defaults</span> <span class=cp>%}</span><span class=x>&gt;</span>
<a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a><span class=x>    ...</span>
<a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>In the example above, if <code>attrs</code> contains e.g. the <code>class</code> key, <code>html_attrs</code> will render:</p> <p><code>class="{{ attrs.class }}"</code></p> <p>Otherwise, <code>html_attrs</code> will render:</p> <p><code>class="{{ defaults.class }}"</code></p> <h3 id=appending-attributes>Appending attributes<a class=headerlink href=#appending-attributes title="Permanent link">¤</a></h3> <p>For the <code>class</code> HTML attribute, it's common that we want to <em>join</em> multiple values, instead of overriding them. For example, if you're authoring a component, you may want to ensure that the component will ALWAYS have a specific class. Yet, you may want to allow users of your component to supply their own classes.</p> <p>We can achieve this by adding extra kwargs. These values will be appended, instead of overwriting the previous value.</p> <p>So if we have a variable <code>attrs</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;my-class pa-4&quot;</span><span class=p>,</span>
<a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a><span class=p>}</span>
</code></pre></div> <p>And on <code>html_attrs</code> tag, we set the key <code>class</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=x>&lt;div </span><span class=cp>{%</span> <span class=k>html_attrs</span> <span class=nv>attrs</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&quot;some-class&quot;</span> <span class=cp>%}</span><span class=x>&gt;</span>
<a id=__codelineno-89-2 name=__codelineno-89-2 href=#__codelineno-89-2></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>Then these will be merged and rendered as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>data-value</span><span class=o>=</span><span class=s>&quot;my-class pa-4 some-class&quot;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>To simplify merging of variables, you can supply the same key multiple times, and these will be all joined together:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=c>{# my_var = &quot;class-from-var text-red&quot; #}</span>
<a id=__codelineno-91-2 name=__codelineno-91-2 href=#__codelineno-91-2></a><span class=x>&lt;div </span><span class=cp>{%</span> <span class=k>html_attrs</span> <span class=nv>attrs</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&quot;some-class another-class&quot;</span> <span class=nv>class</span><span class=o>=</span><span class=nv>my_var</span> <span class=cp>%}</span><span class=x>&gt;</span>
<a id=__codelineno-91-3 name=__codelineno-91-3 href=#__codelineno-91-3></a><span class=x>&lt;/div&gt;</span>
</code></pre></div> <p>Renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=p>&lt;</span><span class=nt>div</span>
<a id=__codelineno-92-2 name=__codelineno-92-2 href=#__codelineno-92-2></a>  <span class=na>data-value</span><span class=o>=</span><span class=s>&quot;my-class pa-4 some-class another-class class-from-var text-red&quot;</span>
<a id=__codelineno-92-3 name=__codelineno-92-3 href=#__codelineno-92-3></a><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h3 id=rules-for-html_attrs>Rules for <code>html_attrs</code><a class=headerlink href=#rules-for-html_attrs title="Permanent link">¤</a></h3> <ol> <li>Both <code>attrs</code> and <code>defaults</code> can be passed as positional args</li> </ol> <p><code>{% html_attrs attrs defaults key=val %}</code></p> <p>or as kwargs</p> <p><code>{% html_attrs key=val defaults=defaults attrs=attrs %}</code></p> <ol> <li> <p>Both <code>attrs</code> and <code>defaults</code> are optional (can be omitted)</p> </li> <li> <p>Both <code>attrs</code> and <code>defaults</code> are dictionaries, and we can define them the same way <a href=#pass-dictonary-by-its-key-value-pairs>we define dictionaries for the <code>component</code> tag</a>. So either as <code>attrs=attrs</code> or <code>attrs:key=value</code>.</p> </li> <li> <p>All other kwargs are appended and can be repeated.</p> </li> </ol> <h3 id=examples-for-html_attrs>Examples for <code>html_attrs</code><a class=headerlink href=#examples-for-html_attrs title="Permanent link">¤</a></h3> <p>Assuming that:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=n>class_from_var</span> <span class=o>=</span> <span class=s2>&quot;from-var&quot;</span>
<a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a>
<a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;from-attrs&quot;</span><span class=p>,</span>
<a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a>    <span class=s2>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;submit&quot;</span><span class=p>,</span>
<a id=__codelineno-93-6 name=__codelineno-93-6 href=#__codelineno-93-6></a><span class=p>}</span>
<a id=__codelineno-93-7 name=__codelineno-93-7 href=#__codelineno-93-7></a>
<a id=__codelineno-93-8 name=__codelineno-93-8 href=#__codelineno-93-8></a><span class=n>defaults</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-93-9 name=__codelineno-93-9 href=#__codelineno-93-9></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;from-defaults&quot;</span><span class=p>,</span>
<a id=__codelineno-93-10 name=__codelineno-93-10 href=#__codelineno-93-10></a>    <span class=s2>&quot;role&quot;</span><span class=p>:</span> <span class=s2>&quot;button&quot;</span><span class=p>,</span>
<a id=__codelineno-93-11 name=__codelineno-93-11 href=#__codelineno-93-11></a><span class=p>}</span>
</code></pre></div> <p>Then:</p> <ul> <li>Empty tag <br> <code>{% html_attr %}</code></li> </ul> <p>renders (empty string): <br> <code></code></p> <ul> <li>Only kwargs <br> <code>{% html_attr class="some-class" class=class_from_var data-id="123" %}</code></li> </ul> <p>renders: <br> <code>class="some-class from-var" data-id="123"</code></p> <ul> <li>Only attrs <br> <code>{% html_attr attrs %}</code></li> </ul> <p>renders: <br> <code>class="from-attrs" type="submit"</code></p> <ul> <li>Attrs as kwarg <br> <code>{% html_attr attrs=attrs %}</code></li> </ul> <p>renders: <br> <code>class="from-attrs" type="submit"</code></p> <ul> <li>Only defaults (as kwarg) <br> <code>{% html_attr defaults=defaults %}</code></li> </ul> <p>renders: <br> <code>class="from-defaults" role="button"</code></p> <ul> <li>Attrs using the <code>prefix:key=value</code> construct <br> <code>{% html_attr attrs:class="from-attrs" attrs:type="submit" %}</code></li> </ul> <p>renders: <br> <code>class="from-attrs" type="submit"</code></p> <ul> <li>Defaults using the <code>prefix:key=value</code> construct <br> <code>{% html_attr defaults:class="from-defaults" %}</code></li> </ul> <p>renders: <br> <code>class="from-defaults" role="button"</code></p> <ul> <li>All together (1) - attrs and defaults as positional args: <br> <code>{% html_attrs attrs defaults class="added_class" class=class_from_var data-id=123 %}</code></li> </ul> <p>renders: <br> <code>class="from-attrs added_class from-var" type="submit" role="button" data-id=123</code></p> <ul> <li>All together (2) - attrs and defaults as kwargs args: <br> <code>{% html_attrs class="added_class" class=class_from_var data-id=123 attrs=attrs defaults=defaults %}</code></li> </ul> <p>renders: <br> <code>class="from-attrs added_class from-var" type="submit" role="button" data-id=123</code></p> <ul> <li>All together (3) - mixed: <br> <code>{% html_attrs attrs defaults:class="default-class" class="added_class" class=class_from_var data-id=123 %}</code></li> </ul> <p>renders: <br> <code>class="from-attrs added_class from-var" type="submit" data-id=123</code></p> <h3 id=full-example-for-html_attrs>Full example for <code>html_attrs</code><a class=headerlink href=#full-example-for-html_attrs title="Permanent link">¤</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;my_comp&quot;</span><span class=p>)</span>
<a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a><span class=k>class</span> <span class=nc>MyComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a>    <span class=n>template</span><span class=p>:</span> <span class=n>t</span><span class=o>.</span><span class=n>django_html</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a><span class=s2>        &lt;div</span>
<a id=__codelineno-94-5 name=__codelineno-94-5 href=#__codelineno-94-5></a><span class=s2>            {% html_attrs attrs</span>
<a id=__codelineno-94-6 name=__codelineno-94-6 href=#__codelineno-94-6></a><span class=s2>                defaults:class=&quot;pa-4 text-red&quot;</span>
<a id=__codelineno-94-7 name=__codelineno-94-7 href=#__codelineno-94-7></a><span class=s2>                class=&quot;my-comp-date&quot;</span>
<a id=__codelineno-94-8 name=__codelineno-94-8 href=#__codelineno-94-8></a><span class=s2>                class=class_from_var</span>
<a id=__codelineno-94-9 name=__codelineno-94-9 href=#__codelineno-94-9></a><span class=s2>                data-id=&quot;123&quot;</span>
<a id=__codelineno-94-10 name=__codelineno-94-10 href=#__codelineno-94-10></a><span class=s2>            %}</span>
<a id=__codelineno-94-11 name=__codelineno-94-11 href=#__codelineno-94-11></a><span class=s2>        &gt;</span>
<a id=__codelineno-94-12 name=__codelineno-94-12 href=#__codelineno-94-12></a><span class=s2>            Today&#39;s date is &lt;span&gt;{{ date }}&lt;/span&gt;</span>
<a id=__codelineno-94-13 name=__codelineno-94-13 href=#__codelineno-94-13></a><span class=s2>        &lt;/div&gt;</span>
<a id=__codelineno-94-14 name=__codelineno-94-14 href=#__codelineno-94-14></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-94-15 name=__codelineno-94-15 href=#__codelineno-94-15></a>
<a id=__codelineno-94-16 name=__codelineno-94-16 href=#__codelineno-94-16></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>:</span> <span class=n>Date</span><span class=p>,</span> <span class=n>attrs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>):</span>
<a id=__codelineno-94-17 name=__codelineno-94-17 href=#__codelineno-94-17></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-94-18 name=__codelineno-94-18 href=#__codelineno-94-18></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>date</span><span class=p>,</span>
<a id=__codelineno-94-19 name=__codelineno-94-19 href=#__codelineno-94-19></a>            <span class=s2>&quot;attrs&quot;</span><span class=p>:</span> <span class=n>attrs</span><span class=p>,</span>
<a id=__codelineno-94-20 name=__codelineno-94-20 href=#__codelineno-94-20></a>            <span class=s2>&quot;class_from_var&quot;</span><span class=p>:</span> <span class=s2>&quot;extra-class&quot;</span>
<a id=__codelineno-94-21 name=__codelineno-94-21 href=#__codelineno-94-21></a>        <span class=p>}</span>
<a id=__codelineno-94-22 name=__codelineno-94-22 href=#__codelineno-94-22></a>
<a id=__codelineno-94-23 name=__codelineno-94-23 href=#__codelineno-94-23></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;parent&quot;</span><span class=p>)</span>
<a id=__codelineno-94-24 name=__codelineno-94-24 href=#__codelineno-94-24></a><span class=k>class</span> <span class=nc>Parent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-94-25 name=__codelineno-94-25 href=#__codelineno-94-25></a>    <span class=n>template</span><span class=p>:</span> <span class=n>t</span><span class=o>.</span><span class=n>django_html</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-94-26 name=__codelineno-94-26 href=#__codelineno-94-26></a><span class=s2>        {</span><span class=si>% c</span><span class=s2>omponent &quot;my_comp&quot;</span>
<a id=__codelineno-94-27 name=__codelineno-94-27 href=#__codelineno-94-27></a><span class=s2>            date=date</span>
<a id=__codelineno-94-28 name=__codelineno-94-28 href=#__codelineno-94-28></a><span class=s2>            attrs:class=&quot;pa-0 border-solid border-red&quot;</span>
<a id=__codelineno-94-29 name=__codelineno-94-29 href=#__codelineno-94-29></a><span class=s2>            attrs:data-json=json_data</span>
<a id=__codelineno-94-30 name=__codelineno-94-30 href=#__codelineno-94-30></a><span class=s2>            attrs:@click=&quot;(e) =&gt; onClick(e, &#39;from_parent&#39;)&quot;</span>
<a id=__codelineno-94-31 name=__codelineno-94-31 href=#__codelineno-94-31></a><span class=s2>        / %}</span>
<a id=__codelineno-94-32 name=__codelineno-94-32 href=#__codelineno-94-32></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-94-33 name=__codelineno-94-33 href=#__codelineno-94-33></a>
<a id=__codelineno-94-34 name=__codelineno-94-34 href=#__codelineno-94-34></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>:</span> <span class=n>Date</span><span class=p>):</span>
<a id=__codelineno-94-35 name=__codelineno-94-35 href=#__codelineno-94-35></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-94-36 name=__codelineno-94-36 href=#__codelineno-94-36></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>datetime</span><span class=o>.</span><span class=n>now</span><span class=p>(),</span>
<a id=__codelineno-94-37 name=__codelineno-94-37 href=#__codelineno-94-37></a>            <span class=s2>&quot;json_data&quot;</span><span class=p>:</span> <span class=n>json</span><span class=o>.</span><span class=n>dumps</span><span class=p>({</span><span class=s2>&quot;value&quot;</span><span class=p>:</span> <span class=mi>456</span><span class=p>})</span>
<a id=__codelineno-94-38 name=__codelineno-94-38 href=#__codelineno-94-38></a>        <span class=p>}</span>
</code></pre></div> <p>Note: For readability, we've split the tags across multiple lines.</p> <p>Inside <code>MyComp</code>, we defined a default attribute</p> <p><code>defaults:class="pa-4 text-red"</code></p> <p>So if <code>attrs</code> includes key <code>class</code>, the default above will be ignored.</p> <p><code>MyComp</code> also defines <code>class</code> key twice. It means that whether the <code>class</code> attribute is taken from <code>attrs</code> or <code>defaults</code>, the two <code>class</code> values will be appended to it.</p> <p>So by default, <code>MyComp</code> renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;pa-4 text-red my-comp-date extra-class&quot;</span> <span class=na>data-id</span><span class=o>=</span><span class=s>&quot;123&quot;</span><span class=p>&gt;</span>...<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <p>Next, let's consider what will be rendered when we call <code>MyComp</code> from <code>Parent</code> component.</p> <p><code>MyComp</code> accepts a <code>attrs</code> dictionary, that is passed to <code>html_attrs</code>, so the contents of that dictionary are rendered as the HTML attributes.</p> <p>In <code>Parent</code>, we make use of passing dictionary key-value pairs as kwargs to define individual attributes as if they were regular kwargs.</p> <p>So all kwargs that start with <code>attrs:</code> will be collected into an <code>attrs</code> dict.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a><span class=x>    attrs:class=&quot;pa-0 border-solid border-red&quot;</span>
<a id=__codelineno-96-2 name=__codelineno-96-2 href=#__codelineno-96-2></a><span class=x>    attrs:data-json=json_data</span>
<a id=__codelineno-96-3 name=__codelineno-96-3 href=#__codelineno-96-3></a><span class=x>    attrs:@click=&quot;(e) =&gt; onClick(e, &#39;from_parent&#39;)&quot;</span>
</code></pre></div> <p>And <code>get_context_data</code> of <code>MyComp</code> will receive <code>attrs</code> input with following keys:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-97-2 name=__codelineno-97-2 href=#__codelineno-97-2></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;pa-0 border-solid&quot;</span><span class=p>,</span>
<a id=__codelineno-97-3 name=__codelineno-97-3 href=#__codelineno-97-3></a>    <span class=s2>&quot;data-json&quot;</span><span class=p>:</span> <span class=s1>&#39;{&quot;value&quot;: 456}&#39;</span><span class=p>,</span>
<a id=__codelineno-97-4 name=__codelineno-97-4 href=#__codelineno-97-4></a>    <span class=s2>&quot;@click&quot;</span><span class=p>:</span> <span class=s2>&quot;(e) =&gt; onClick(e, &#39;from_parent&#39;)&quot;</span><span class=p>,</span>
<a id=__codelineno-97-5 name=__codelineno-97-5 href=#__codelineno-97-5></a><span class=p>}</span>
</code></pre></div> <p><code>attrs["class"]</code> overrides the default value for <code>class</code>, whereas other keys will be merged.</p> <p>So in the end <code>MyComp</code> will render:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=p>&lt;</span><span class=nt>div</span>
<a id=__codelineno-98-2 name=__codelineno-98-2 href=#__codelineno-98-2></a>  <span class=na>class</span><span class=o>=</span><span class=s>&quot;pa-0 border-solid my-comp-date extra-class&quot;</span>
<a id=__codelineno-98-3 name=__codelineno-98-3 href=#__codelineno-98-3></a>  <span class=na>data-id</span><span class=o>=</span><span class=s>&quot;123&quot;</span>
<a id=__codelineno-98-4 name=__codelineno-98-4 href=#__codelineno-98-4></a>  <span class=na>data-json</span><span class=o>=</span><span class=s>&#39;{&quot;value&quot;: 456}&#39;</span>
<a id=__codelineno-98-5 name=__codelineno-98-5 href=#__codelineno-98-5></a>  <span class=err>@</span><span class=na>click</span><span class=o>=</span><span class=s>&quot;(e) =&gt; onClick(e, &#39;from_parent&#39;)&quot;</span>
<a id=__codelineno-98-6 name=__codelineno-98-6 href=#__codelineno-98-6></a><span class=p>&gt;</span>
<a id=__codelineno-98-7 name=__codelineno-98-7 href=#__codelineno-98-7></a>  ...
<a id=__codelineno-98-8 name=__codelineno-98-8 href=#__codelineno-98-8></a><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h3 id=rendering-html-attributes-outside-of-templates>Rendering HTML attributes outside of templates<a class=headerlink href=#rendering-html-attributes-outside-of-templates title="Permanent link">¤</a></h3> <p>If you need to use serialize HTML attributes outside of Django template and the <code>html_attrs</code> tag, you can use <code>attributes_to_string</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a><span class=kn>from</span> <span class=nn>django_components.attributes</span> <span class=kn>import</span> <span class=n>attributes_to_string</span>
<a id=__codelineno-99-2 name=__codelineno-99-2 href=#__codelineno-99-2></a>
<a id=__codelineno-99-3 name=__codelineno-99-3 href=#__codelineno-99-3></a><span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-99-4 name=__codelineno-99-4 href=#__codelineno-99-4></a>    <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;my-class text-red pa-4&quot;</span><span class=p>,</span>
<a id=__codelineno-99-5 name=__codelineno-99-5 href=#__codelineno-99-5></a>    <span class=s2>&quot;data-id&quot;</span><span class=p>:</span> <span class=mi>123</span><span class=p>,</span>
<a id=__codelineno-99-6 name=__codelineno-99-6 href=#__codelineno-99-6></a>    <span class=s2>&quot;required&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-99-7 name=__codelineno-99-7 href=#__codelineno-99-7></a>    <span class=s2>&quot;disabled&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-99-8 name=__codelineno-99-8 href=#__codelineno-99-8></a>    <span class=s2>&quot;ignored-attr&quot;</span><span class=p>:</span> <span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-99-9 name=__codelineno-99-9 href=#__codelineno-99-9></a><span class=p>}</span>
<a id=__codelineno-99-10 name=__codelineno-99-10 href=#__codelineno-99-10></a>
<a id=__codelineno-99-11 name=__codelineno-99-11 href=#__codelineno-99-11></a><span class=n>attributes_to_string</span><span class=p>(</span><span class=n>attrs</span><span class=p>)</span>
<a id=__codelineno-99-12 name=__codelineno-99-12 href=#__codelineno-99-12></a><span class=c1># &#39;class=&quot;my-class text-red pa-4&quot; data-id=&quot;123&quot; required&#39;</span>
</code></pre></div> <h2 id=template-tag-syntax>Template tag syntax<a class=headerlink href=#template-tag-syntax title="Permanent link">¤</a></h2> <p>All template tags in django_component, like <code>{% component %}</code> or <code>{% slot %}</code>, and so on, support extra syntax that makes it possible to write components like in Vue or React.</p> <h3 id=special-characters>Special characters<a class=headerlink href=#special-characters title="Permanent link">¤</a></h3> <p><em>New in version 0.71</em>:</p> <p>Keyword arguments can contain special characters <code># @ . - _</code>, so keywords like so are still valid:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a><span class=x>&lt;body&gt;</span>
<a id=__codelineno-100-2 name=__codelineno-100-2 href=#__codelineno-100-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>my-date</span><span class=o>=</span><span class=s2>&quot;2015-06-19&quot;</span> <span class=p>@</span><span class=nv>click.native</span><span class=o>=</span><span class=nv>do_something</span> <span class=p>#</span><span class=nv>some_id</span><span class=o>=</span><span class=kp>True</span> <span class=o>/</span> <span class=cp>%}</span>
<a id=__codelineno-100-3 name=__codelineno-100-3 href=#__codelineno-100-3></a><span class=x>&lt;/body&gt;</span>
</code></pre></div> <p>These can then be accessed inside <code>get_context_data</code> so:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-101-2 name=__codelineno-101-2 href=#__codelineno-101-2></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-101-3 name=__codelineno-101-3 href=#__codelineno-101-3></a>    <span class=c1># Since # . @ - are not valid identifiers, we have to</span>
<a id=__codelineno-101-4 name=__codelineno-101-4 href=#__codelineno-101-4></a>    <span class=c1># use `**kwargs` so the method can accept these args.</span>
<a id=__codelineno-101-5 name=__codelineno-101-5 href=#__codelineno-101-5></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>
<a id=__codelineno-101-6 name=__codelineno-101-6 href=#__codelineno-101-6></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-101-7 name=__codelineno-101-7 href=#__codelineno-101-7></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;my-date&quot;</span><span class=p>],</span>
<a id=__codelineno-101-8 name=__codelineno-101-8 href=#__codelineno-101-8></a>            <span class=s2>&quot;id&quot;</span><span class=p>:</span> <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;#some_id&quot;</span><span class=p>],</span>
<a id=__codelineno-101-9 name=__codelineno-101-9 href=#__codelineno-101-9></a>            <span class=s2>&quot;on_click&quot;</span><span class=p>:</span> <span class=n>kwargs</span><span class=p>[</span><span class=s2>&quot;@click.native&quot;</span><span class=p>]</span>
<a id=__codelineno-101-10 name=__codelineno-101-10 href=#__codelineno-101-10></a>        <span class=p>}</span>
</code></pre></div> <h3 id=spread-operator>Spread operator<a class=headerlink href=#spread-operator title="Permanent link">¤</a></h3> <p><em>New in version 0.93</em>:</p> <p>Instead of passing keyword arguments one-by-one:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>title</span><span class=o>=</span><span class=s2>&quot;How to abc&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2015-06-19&quot;</span> <span class=nv>author</span><span class=o>=</span><span class=s2>&quot;John Wick&quot;</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> <p>You can use a spread operator <code>...dict</code> to apply key-value pairs from a dictionary:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=n>post_data</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-103-2 name=__codelineno-103-2 href=#__codelineno-103-2></a>    <span class=s2>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;How to...&quot;</span><span class=p>,</span>
<a id=__codelineno-103-3 name=__codelineno-103-3 href=#__codelineno-103-3></a>    <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=s2>&quot;2015-06-19&quot;</span><span class=p>,</span>
<a id=__codelineno-103-4 name=__codelineno-103-4 href=#__codelineno-103-4></a>    <span class=s2>&quot;author&quot;</span><span class=p>:</span> <span class=s2>&quot;John Wick&quot;</span><span class=p>,</span>
<a id=__codelineno-103-5 name=__codelineno-103-5 href=#__codelineno-103-5></a><span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=p>..</span><span class=nv>.post_data</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> <p>This behaves similar to <a href=https://kevinyckim33.medium.com/jsx-spread-operator-component-props-meaning-3c9bcadd2493>JSX's spread operator</a> or <a href=https://vuejs.org/api/built-in-directives.html#v-bind>Vue's <code>v-bind</code></a>.</p> <p>Spread operators are treated as keyword arguments, which means that: 1. Spread operators must come after positional arguments. 2. You cannot use spread operators for <a href=https://martinxpn.medium.com/positional-only-and-keyword-only-arguments-in-python-37-100-days-of-python-310c311657b0>positional-only arguments</a>.</p> <p>Other than that, you can use spread operators multiple times, and even put keyword arguments in-between or after them:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=p>..</span><span class=nv>.post_data</span> <span class=nv>id</span><span class=o>=</span><span class=nv>post.id</span> <span class=p>..</span><span class=nv>.extra</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> <p>In a case of conflicts, the values added later (right-most) overwrite previous values.</p> <h3 id=pass-dictonary-by-its-key-value-pairs>Pass dictonary by its key-value pairs<a class=headerlink href=#pass-dictonary-by-its-key-value-pairs title="Permanent link">¤</a></h3> <p><em>New in version 0.74</em>:</p> <p>Sometimes, a component may expect a dictionary as one of its inputs.</p> <p>Most commonly, this happens when a component accepts a dictionary of HTML attributes (usually called <code>attrs</code>) to pass to the underlying template.</p> <p>In such cases, we may want to define some HTML attributes statically, and other dynamically. But for that, we need to define this dictionary on Python side:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;my_comp&quot;</span><span class=p>)</span>
<a id=__codelineno-106-2 name=__codelineno-106-2 href=#__codelineno-106-2></a><span class=k>class</span> <span class=nc>MyComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-106-3 name=__codelineno-106-3 href=#__codelineno-106-3></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-106-4 name=__codelineno-106-4 href=#__codelineno-106-4></a><span class=s2>        {</span><span class=si>% c</span><span class=s2>omponent &quot;other&quot; attrs=attrs / %}</span>
<a id=__codelineno-106-5 name=__codelineno-106-5 href=#__codelineno-106-5></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-106-6 name=__codelineno-106-6 href=#__codelineno-106-6></a>
<a id=__codelineno-106-7 name=__codelineno-106-7 href=#__codelineno-106-7></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>some_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-106-8 name=__codelineno-106-8 href=#__codelineno-106-8></a>        <span class=n>attrs</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-106-9 name=__codelineno-106-9 href=#__codelineno-106-9></a>            <span class=s2>&quot;class&quot;</span><span class=p>:</span> <span class=s2>&quot;pa-4 flex&quot;</span><span class=p>,</span>
<a id=__codelineno-106-10 name=__codelineno-106-10 href=#__codelineno-106-10></a>            <span class=s2>&quot;data-some-id&quot;</span><span class=p>:</span> <span class=n>some_id</span><span class=p>,</span>
<a id=__codelineno-106-11 name=__codelineno-106-11 href=#__codelineno-106-11></a>            <span class=s2>&quot;@click.stop&quot;</span><span class=p>:</span> <span class=s2>&quot;onClickHandler&quot;</span><span class=p>,</span>
<a id=__codelineno-106-12 name=__codelineno-106-12 href=#__codelineno-106-12></a>        <span class=p>}</span>
<a id=__codelineno-106-13 name=__codelineno-106-13 href=#__codelineno-106-13></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;attrs&quot;</span><span class=p>:</span> <span class=n>attrs</span><span class=p>}</span>
</code></pre></div> <p>But as you can see in the case above, the event handler <code>@click.stop</code> and styling <code>pa-4 flex</code> are disconnected from the template. If the component grew in size and we moved the HTML to a separate file, we would have hard time reasoning about the component's template.</p> <p>Luckily, there's a better way.</p> <p>When we want to pass a dictionary to a component, we can define individual key-value pairs as component kwargs, so we can keep all the relevant information in the template. For that, we prefix the key with the name of the dict and <code>:</code>. So key <code>class</code> of input <code>attrs</code> becomes <code>attrs:class</code>. And our example becomes:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-107-1 name=__codelineno-107-1 href=#__codelineno-107-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;my_comp&quot;</span><span class=p>)</span>
<a id=__codelineno-107-2 name=__codelineno-107-2 href=#__codelineno-107-2></a><span class=k>class</span> <span class=nc>MyComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-107-3 name=__codelineno-107-3 href=#__codelineno-107-3></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-107-4 name=__codelineno-107-4 href=#__codelineno-107-4></a><span class=s2>        {</span><span class=si>% c</span><span class=s2>omponent &quot;other&quot;</span>
<a id=__codelineno-107-5 name=__codelineno-107-5 href=#__codelineno-107-5></a><span class=s2>            attrs:class=&quot;pa-4 flex&quot;</span>
<a id=__codelineno-107-6 name=__codelineno-107-6 href=#__codelineno-107-6></a><span class=s2>            attrs:data-some-id=some_id</span>
<a id=__codelineno-107-7 name=__codelineno-107-7 href=#__codelineno-107-7></a><span class=s2>            attrs:@click.stop=&quot;onClickHandler&quot;</span>
<a id=__codelineno-107-8 name=__codelineno-107-8 href=#__codelineno-107-8></a><span class=s2>        / %}</span>
<a id=__codelineno-107-9 name=__codelineno-107-9 href=#__codelineno-107-9></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-107-10 name=__codelineno-107-10 href=#__codelineno-107-10></a>
<a id=__codelineno-107-11 name=__codelineno-107-11 href=#__codelineno-107-11></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>some_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
<a id=__codelineno-107-12 name=__codelineno-107-12 href=#__codelineno-107-12></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;some_id&quot;</span><span class=p>:</span> <span class=n>some_id</span><span class=p>}</span>
</code></pre></div> <p>Sweet! Now all the relevant HTML is inside the template, and we can move it to a separate file with confidence:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-108-1 name=__codelineno-108-1 href=#__codelineno-108-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;other&quot;</span>
<a id=__codelineno-108-2 name=__codelineno-108-2 href=#__codelineno-108-2></a>    <span class=nv>attrs</span><span class=o>:</span><span class=nv>class</span><span class=o>=</span><span class=s2>&quot;pa-4 flex&quot;</span>
<a id=__codelineno-108-3 name=__codelineno-108-3 href=#__codelineno-108-3></a>    <span class=nv>attrs</span><span class=o>:</span><span class=nv>data-some-id</span><span class=o>=</span><span class=nv>some_id</span>
<a id=__codelineno-108-4 name=__codelineno-108-4 href=#__codelineno-108-4></a>    <span class=nv>attrs</span><span class=o>:</span><span class=p>@</span><span class=nv>click.stop</span><span class=o>=</span><span class=s2>&quot;onClickHandler&quot;</span>
<a id=__codelineno-108-5 name=__codelineno-108-5 href=#__codelineno-108-5></a><span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> <blockquote> <p>Note: It is NOT possible to define nested dictionaries, so <code>attrs:my_key:two=2</code> would be interpreted as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-109-1 name=__codelineno-109-1 href=#__codelineno-109-1></a><span class=p>{</span><span class=s2>&quot;attrs&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;my_key:two&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>}}</span>
</code></pre></div> </blockquote> <h2 id=prop-drilling-and-dependency-injection-provide-inject>Prop drilling and dependency injection (provide / inject)<a class=headerlink href=#prop-drilling-and-dependency-injection-provide-inject title="Permanent link">¤</a></h2> <p><em>New in version 0.80</em>:</p> <p>Django components supports dependency injection with the combination of:</p> <ol> <li><code>{% provide %}</code> tag</li> <li><code>inject()</code> method of the <code>Component</code> class</li> </ol> <h3 id=what-is-dependency-injection-and-prop-drilling>What is "dependency injection" and "prop drilling"?<a class=headerlink href=#what-is-dependency-injection-and-prop-drilling title="Permanent link">¤</a></h3> <p>Prop drilling refers to a scenario in UI development where you need to pass data through many layers of a component tree to reach the nested components that actually need the data.</p> <p>Normally, you'd use props to send data from a parent component to its children. However, this straightforward method becomes cumbersome and inefficient if the data has to travel through many levels or if several components scattered at different depths all need the same piece of information.</p> <p>This results in a situation where the intermediate components, which don't need the data for their own functioning, end up having to manage and pass along these props. This clutters the component tree and makes the code verbose and harder to manage.</p> <p>A neat solution to avoid prop drilling is using the "provide and inject" technique, AKA dependency injection.</p> <p>With dependency injection, a parent component acts like a data hub for all its descendants. This setup allows any component, no matter how deeply nested it is, to access the required data directly from this centralized provider without having to messily pass props down the chain. This approach significantly cleans up the code and makes it easier to maintain.</p> <p>This feature is inspired by Vue's <a href=https://vuejs.org/guide/components/provide-inject>Provide / Inject</a> and React's <a href=https://react.dev/learn/passing-data-deeply-with-context>Context / useContext</a>.</p> <h3 id=how-to-use-provide-inject>How to use provide / inject<a class=headerlink href=#how-to-use-provide-inject title="Permanent link">¤</a></h3> <p>As the name suggest, using provide / inject consists of 2 steps</p> <ol> <li>Providing data</li> <li>Injecting provided data</li> </ol> <p>For examples of advanced uses of provide / inject, <a href=https://github.com/EmilStenstrom/django-components/pull/506#issuecomment-2132102584>see this discussion</a>.</p> <h3 id=using-provide-tag>Using <code>{% provide %}</code> tag<a class=headerlink href=#using-provide-tag title="Permanent link">¤</a></h3> <p>First we use the <code>{% provide %}</code> tag to define the data we want to "provide" (make available).</p> <div class=highlight><pre><span></span><code><a id=__codelineno-110-1 name=__codelineno-110-1 href=#__codelineno-110-1></a><span class=cp>{%</span> <span class=k>provide</span> <span class=s2>&quot;my_data&quot;</span> <span class=nv>key</span><span class=o>=</span><span class=s2>&quot;hi&quot;</span> <span class=nv>another</span><span class=o>=</span><span class=m>123</span> <span class=cp>%}</span>
<a id=__codelineno-110-2 name=__codelineno-110-2 href=#__codelineno-110-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;child&quot;</span> <span class=o>/</span> <span class=cp>%}</span><span class=x>  &lt;--- Can access &quot;my_data&quot;</span>
<a id=__codelineno-110-3 name=__codelineno-110-3 href=#__codelineno-110-3></a><span class=cp>{%</span> <span class=k>endprovide</span> <span class=cp>%}</span>
<a id=__codelineno-110-4 name=__codelineno-110-4 href=#__codelineno-110-4></a>
<a id=__codelineno-110-5 name=__codelineno-110-5 href=#__codelineno-110-5></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;child&quot;</span> <span class=o>/</span> <span class=cp>%}</span><span class=x>  &lt;--- Cannot access &quot;my_data&quot;</span>
</code></pre></div> <p>Notice that the <code>provide</code> tag REQUIRES a name as a first argument. This is the <em>key</em> by which we can then access the data passed to this tag.</p> <p><code>provide</code> tag <em>key</em>, similarly to the <em>name</em> argument in <code>component</code> or <code>slot</code> tags, has these requirements:</p> <ul> <li>The <em>key</em> must be a string literal</li> <li>It must be a valid identifier (AKA a valid Python variable name)</li> </ul> <p>Once you've set the name, you define the data you want to "provide" by passing it as keyword arguments. This is similar to how you pass data to the <code>{% with %}</code> tag.</p> <blockquote> <p>NOTE: Kwargs passed to <code>{% provide %}</code> are NOT added to the context. In the example below, the <code>{{ key }}</code> won't render anything:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-111-1 name=__codelineno-111-1 href=#__codelineno-111-1></a><span class=cp>{%</span> <span class=k>provide</span> <span class=s2>&quot;my_data&quot;</span> <span class=nv>key</span><span class=o>=</span><span class=s2>&quot;hi&quot;</span> <span class=nv>another</span><span class=o>=</span><span class=m>123</span> <span class=cp>%}</span>
<a id=__codelineno-111-2 name=__codelineno-111-2 href=#__codelineno-111-2></a><span class=x>    </span><span class=cp>{{</span> <span class=nv>key</span> <span class=cp>}}</span>
<a id=__codelineno-111-3 name=__codelineno-111-3 href=#__codelineno-111-3></a><span class=cp>{%</span> <span class=k>endprovide</span> <span class=cp>%}</span>
</code></pre></div> </blockquote> <h3 id=using-inject-method>Using <code>inject()</code> method<a class=headerlink href=#using-inject-method title="Permanent link">¤</a></h3> <p>To "inject" (access) the data defined on the <code>provide</code> tag, you can use the <code>inject()</code> method inside of <code>get_context_data()</code>.</p> <p>For a component to be able to "inject" some data, the component (<code>{% component %}</code> tag) must be nested inside the <code>{% provide %}</code> tag.</p> <p>In the example from previous section, we've defined two kwargs: <code>key="hi" another=123</code>. That means that if we now inject <code>"my_data"</code>, we get an object with 2 attributes - <code>key</code> and <code>another</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-112-1 name=__codelineno-112-1 href=#__codelineno-112-1></a><span class=k>class</span> <span class=nc>ChildComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-112-2 name=__codelineno-112-2 href=#__codelineno-112-2></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-112-3 name=__codelineno-112-3 href=#__codelineno-112-3></a>        <span class=n>my_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>inject</span><span class=p>(</span><span class=s2>&quot;my_data&quot;</span><span class=p>)</span>
<a id=__codelineno-112-4 name=__codelineno-112-4 href=#__codelineno-112-4></a>        <span class=nb>print</span><span class=p>(</span><span class=n>my_data</span><span class=o>.</span><span class=n>key</span><span class=p>)</span>     <span class=c1># hi</span>
<a id=__codelineno-112-5 name=__codelineno-112-5 href=#__codelineno-112-5></a>        <span class=nb>print</span><span class=p>(</span><span class=n>my_data</span><span class=o>.</span><span class=n>another</span><span class=p>)</span> <span class=c1># 123</span>
<a id=__codelineno-112-6 name=__codelineno-112-6 href=#__codelineno-112-6></a>        <span class=k>return</span> <span class=p>{}</span>
</code></pre></div> <p>First argument to <code>inject</code> is the <em>key</em> of the provided data. This must match the string that you used in the <code>provide</code> tag. If no provider with given key is found, <code>inject</code> raises a <code>KeyError</code>.</p> <p>To avoid the error, you can pass a second argument to <code>inject</code> to which will act as a default value, similar to <code>dict.get(key, default)</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-113-1 name=__codelineno-113-1 href=#__codelineno-113-1></a><span class=k>class</span> <span class=nc>ChildComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-113-2 name=__codelineno-113-2 href=#__codelineno-113-2></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-113-3 name=__codelineno-113-3 href=#__codelineno-113-3></a>        <span class=n>my_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>inject</span><span class=p>(</span><span class=s2>&quot;invalid_key&quot;</span><span class=p>,</span> <span class=n>DEFAULT_DATA</span><span class=p>)</span>
<a id=__codelineno-113-4 name=__codelineno-113-4 href=#__codelineno-113-4></a>        <span class=k>assert</span> <span class=n>my_data</span> <span class=o>==</span> <span class=n>DEFAUKT_DATA</span>
<a id=__codelineno-113-5 name=__codelineno-113-5 href=#__codelineno-113-5></a>        <span class=k>return</span> <span class=p>{}</span>
</code></pre></div> <p>The instance returned from <code>inject()</code> is a subclass of <code>NamedTuple</code>, so the instance is immutable. This ensures that the data returned from <code>inject</code> will always have all the keys that were passed to the <code>provide</code> tag.</p> <blockquote> <p>NOTE: <code>inject()</code> works strictly only in <code>get_context_data</code>. If you try to call it from elsewhere, it will raise an error.</p> </blockquote> <h3 id=full-example>Full example<a class=headerlink href=#full-example title="Permanent link">¤</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-114-1 name=__codelineno-114-1 href=#__codelineno-114-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;child&quot;</span><span class=p>)</span>
<a id=__codelineno-114-2 name=__codelineno-114-2 href=#__codelineno-114-2></a><span class=k>class</span> <span class=nc>ChildComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-114-3 name=__codelineno-114-3 href=#__codelineno-114-3></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-114-4 name=__codelineno-114-4 href=#__codelineno-114-4></a><span class=s2>        &lt;div&gt; {{ my_data.key }} &lt;/div&gt;</span>
<a id=__codelineno-114-5 name=__codelineno-114-5 href=#__codelineno-114-5></a><span class=s2>        &lt;div&gt; {{ my_data.another }} &lt;/div&gt;</span>
<a id=__codelineno-114-6 name=__codelineno-114-6 href=#__codelineno-114-6></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-114-7 name=__codelineno-114-7 href=#__codelineno-114-7></a>
<a id=__codelineno-114-8 name=__codelineno-114-8 href=#__codelineno-114-8></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-114-9 name=__codelineno-114-9 href=#__codelineno-114-9></a>        <span class=n>my_data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>inject</span><span class=p>(</span><span class=s2>&quot;my_data&quot;</span><span class=p>,</span> <span class=s2>&quot;default&quot;</span><span class=p>)</span>
<a id=__codelineno-114-10 name=__codelineno-114-10 href=#__codelineno-114-10></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;my_data&quot;</span><span class=p>:</span> <span class=n>my_data</span><span class=p>}</span>
<a id=__codelineno-114-11 name=__codelineno-114-11 href=#__codelineno-114-11></a>
<a id=__codelineno-114-12 name=__codelineno-114-12 href=#__codelineno-114-12></a><span class=n>template_str</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-114-13 name=__codelineno-114-13 href=#__codelineno-114-13></a><span class=s2>    {</span><span class=si>% lo</span><span class=s2>ad component_tags %}</span>
<a id=__codelineno-114-14 name=__codelineno-114-14 href=#__codelineno-114-14></a><span class=s2>    {% provide &quot;my_data&quot; key=&quot;hi&quot; another=123 %}</span>
<a id=__codelineno-114-15 name=__codelineno-114-15 href=#__codelineno-114-15></a><span class=s2>        {</span><span class=si>% c</span><span class=s2>omponent &quot;child&quot; / %}</span>
<a id=__codelineno-114-16 name=__codelineno-114-16 href=#__codelineno-114-16></a><span class=s2>    {</span><span class=si>% e</span><span class=s2>ndprovide %}</span>
<a id=__codelineno-114-17 name=__codelineno-114-17 href=#__codelineno-114-17></a><span class=s2>&quot;&quot;&quot;</span>
</code></pre></div> <p>renders:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-115-1 name=__codelineno-115-1 href=#__codelineno-115-1></a><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>hi<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
<a id=__codelineno-115-2 name=__codelineno-115-2 href=#__codelineno-115-2></a><span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>123<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</code></pre></div> <h2 id=component-context-and-scope>Component context and scope<a class=headerlink href=#component-context-and-scope title="Permanent link">¤</a></h2> <p>By default, context variables are passed down the template as in regular Django - deeper scopes can access the variables from the outer scopes. So if you have several nested forloops, then inside the deep-most loop you can access variables defined by all previous loops.</p> <p>With this in mind, the <code>{% component %}</code> tag behaves similarly to <code>{% include %}</code> tag - inside the component tag, you can access all variables that were defined outside of it.</p> <p>And just like with <code>{% include %}</code>, if you don't want a specific component template to have access to the parent context, add <code>only</code> to the <code>{% component %}</code> tag:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-116-1 name=__codelineno-116-1 href=#__codelineno-116-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;calendar&quot;</span> <span class=nv>date</span><span class=o>=</span><span class=s2>&quot;2015-06-19&quot;</span> <span class=nv>only</span> <span class=cp>%}{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div> <p>NOTE: <code>{% csrf_token %}</code> tags need access to the top-level context, and they will not function properly if they are rendered in a component that is called with the <code>only</code> modifier.</p> <p>If you find yourself using the <code>only</code> modifier often, you can set the <a href=#context-behavior>context_behavior</a> option to <code>"isolated"</code>, which automatically applies the <code>only</code> modifier. This is useful if you want to make sure that components don't accidentally access the outer context.</p> <p>Components can also access the outer context in their context methods like <code>get_context_data</code> by accessing the property <code>self.outer_context</code>.</p> <h2 id=customizing-component-tags-with-tagformatter>Customizing component tags with TagFormatter<a class=headerlink href=#customizing-component-tags-with-tagformatter title="Permanent link">¤</a></h2> <p><em>New in version 0.89</em></p> <p>By default, components are rendered using the pair of <code>{% component %}</code> / <code>{% endcomponent %}</code> template tags:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-117-1 name=__codelineno-117-1 href=#__codelineno-117-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=nv>disabled</span> <span class=cp>%}</span>
<a id=__codelineno-117-2 name=__codelineno-117-2 href=#__codelineno-117-2></a><span class=x>Click me!</span>
<a id=__codelineno-117-3 name=__codelineno-117-3 href=#__codelineno-117-3></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
<a id=__codelineno-117-4 name=__codelineno-117-4 href=#__codelineno-117-4></a>
<a id=__codelineno-117-5 name=__codelineno-117-5 href=#__codelineno-117-5></a><span class=c>{# or #}</span>
<a id=__codelineno-117-6 name=__codelineno-117-6 href=#__codelineno-117-6></a>
<a id=__codelineno-117-7 name=__codelineno-117-7 href=#__codelineno-117-7></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=nv>disabled</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> <p>You can change this behaviour in the settings under the <a href=#tag-formatter-setting><code>COMPONENTS.tag_formatter</code></a>.</p> <p>For example, if you set the tag formatter to <code>django_components.shorthand_component_formatter</code>, the components will use their name as the template tags:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-118-1 name=__codelineno-118-1 href=#__codelineno-118-1></a><span class=cp>{%</span> <span class=k>button</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=nv>disabled</span> <span class=cp>%}</span>
<a id=__codelineno-118-2 name=__codelineno-118-2 href=#__codelineno-118-2></a><span class=x>  Click me!</span>
<a id=__codelineno-118-3 name=__codelineno-118-3 href=#__codelineno-118-3></a><span class=cp>{%</span> <span class=k>endbutton</span> <span class=cp>%}</span>
<a id=__codelineno-118-4 name=__codelineno-118-4 href=#__codelineno-118-4></a>
<a id=__codelineno-118-5 name=__codelineno-118-5 href=#__codelineno-118-5></a><span class=c>{# or #}</span>
<a id=__codelineno-118-6 name=__codelineno-118-6 href=#__codelineno-118-6></a>
<a id=__codelineno-118-7 name=__codelineno-118-7 href=#__codelineno-118-7></a><span class=cp>{%</span> <span class=k>button</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=nv>disabled</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div> <h3 id=available-tagformatters>Available TagFormatters<a class=headerlink href=#available-tagformatters title="Permanent link">¤</a></h3> <p>django_components provides following predefined TagFormatters:</p> <ul> <li> <p><strong><code>ComponentFormatter</code> (<code>django_components.component_formatter</code>)</strong></p> <p>Default</p> <p>Uses the <code>component</code> and <code>endcomponent</code> tags, and the component name is gives as the first positional argument.</p> <p>Example as block: <div class=highlight><pre><span></span><code><a id=__codelineno-119-1 name=__codelineno-119-1 href=#__codelineno-119-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-119-2 name=__codelineno-119-2 href=#__codelineno-119-2></a><span class=x>    </span><span class=cp>{%</span> <span class=k>fill</span> <span class=s2>&quot;content&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-119-3 name=__codelineno-119-3 href=#__codelineno-119-3></a><span class=x>        ...</span>
<a id=__codelineno-119-4 name=__codelineno-119-4 href=#__codelineno-119-4></a><span class=x>    </span><span class=cp>{%</span> <span class=k>endfill</span> <span class=cp>%}</span>
<a id=__codelineno-119-5 name=__codelineno-119-5 href=#__codelineno-119-5></a><span class=cp>{%</span> <span class=k>endcomponent</span> <span class=cp>%}</span>
</code></pre></div></p> <p>Example as inlined tag: <div class=highlight><pre><span></span><code><a id=__codelineno-120-1 name=__codelineno-120-1 href=#__codelineno-120-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=s2>&quot;button&quot;</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div></p> </li> <li> <p><strong><code>ShorthandComponentFormatter</code> (<code>django_components.shorthand_component_formatter</code>)</strong></p> <p>Uses the component name as start tag, and <code>end&lt;component_name&gt;</code> as an end tag.</p> <p>Example as block: <div class=highlight><pre><span></span><code><a id=__codelineno-121-1 name=__codelineno-121-1 href=#__codelineno-121-1></a><span class=cp>{%</span> <span class=k>button</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=cp>%}</span>
<a id=__codelineno-121-2 name=__codelineno-121-2 href=#__codelineno-121-2></a><span class=x>    Click me!</span>
<a id=__codelineno-121-3 name=__codelineno-121-3 href=#__codelineno-121-3></a><span class=cp>{%</span> <span class=k>endbutton</span> <span class=cp>%}</span>
</code></pre></div></p> <p>Example as inlined tag: <div class=highlight><pre><span></span><code><a id=__codelineno-122-1 name=__codelineno-122-1 href=#__codelineno-122-1></a><span class=cp>{%</span> <span class=k>button</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=o>/</span> <span class=cp>%}</span>
</code></pre></div></p> </li> </ul> <h3 id=writing-your-own-tagformatter>Writing your own TagFormatter<a class=headerlink href=#writing-your-own-tagformatter title="Permanent link">¤</a></h3> <h4 id=background>Background<a class=headerlink href=#background title="Permanent link">¤</a></h4> <p>First, let's discuss how TagFormatters work, and how components are rendered in django_components.</p> <p>When you render a component with <code>{% component %}</code> (or your own tag), the following happens: 1. <code>component</code> must be registered as a Django's template tag 2. Django triggers django_components's tag handler for tag <code>component</code>. 3. The tag handler passes the tag contents for pre-processing to <code>TagFormatter.parse()</code>.</p> <div class=codehilite><pre><span></span><code><span class=nv>So</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nv>you</span><span class=w> </span><span class=nv>render</span><span class=w> </span><span class=nv>this</span>:
```<span class=nv>django</span>
{<span class=o>%</span><span class=w> </span><span class=nv>component</span><span class=w> </span><span class=s2>&quot;button&quot;</span><span class=w> </span><span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span><span class=w> </span><span class=nv>disabled</span><span class=w> </span><span class=o>%</span>}
{<span class=o>%</span><span class=w> </span><span class=nv>endcomponent</span><span class=w> </span><span class=o>%</span>}
```

<span class=k>Then</span><span class=w> </span>`<span class=nv>TagFormatter</span>.<span class=nv>parse</span><span class=ss>()</span>`<span class=w> </span><span class=nv>will</span><span class=w> </span><span class=nv>receive</span><span class=w> </span><span class=nv>a</span><span class=w> </span><span class=nv>following</span><span class=w> </span><span class=nv>input</span>:
```<span class=nv>py</span>
[<span class=s2>&quot;component&quot;</span>,<span class=w> </span><span class=s1>&#39;&quot;button&quot;&#39;</span>,<span class=w> </span><span class=s1>&#39;href=&quot;...&quot;&#39;</span>,<span class=w> </span><span class=s1>&#39;disabled&#39;</span>]
```
</code></pre></div> <ol> <li> <p><code>TagFormatter</code> extracts the component name and the remaining input.</p> <p>So, given the above, <code>TagFormatter.parse()</code> returns the following: <div class=highlight><pre><span></span><code><a id=__codelineno-125-1 name=__codelineno-125-1 href=#__codelineno-125-1></a><span class=n>TagResult</span><span class=p>(</span>
<a id=__codelineno-125-2 name=__codelineno-125-2 href=#__codelineno-125-2></a>    <span class=n>component_name</span><span class=o>=</span><span class=s2>&quot;button&quot;</span><span class=p>,</span>
<a id=__codelineno-125-3 name=__codelineno-125-3 href=#__codelineno-125-3></a>    <span class=n>tokens</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;href=&quot;...&quot;&#39;</span><span class=p>,</span> <span class=s1>&#39;disabled&#39;</span><span class=p>]</span>
<a id=__codelineno-125-4 name=__codelineno-125-4 href=#__codelineno-125-4></a><span class=p>)</span>
</code></pre></div> 5. The tag handler resumes, using the tokens returned from <code>TagFormatter</code>.</p> <p>So, continuing the example, at this point the tag handler practically behaves as if you rendered: <div class=highlight><pre><span></span><code><a id=__codelineno-126-1 name=__codelineno-126-1 href=#__codelineno-126-1></a><span class=cp>{%</span> <span class=k>component</span> <span class=nv>href</span><span class=o>=</span><span class=s2>&quot;...&quot;</span> <span class=nv>disabled</span> <span class=cp>%}</span>
</code></pre></div> 6. Tag handler looks up the component <code>button</code>, and passes the args, kwargs, and slots to it.</p> </li> </ol> <h4 id=tagformatter>TagFormatter<a class=headerlink href=#tagformatter title="Permanent link">¤</a></h4> <p><code>TagFormatter</code> handles following parts of the process above: - Generates start/end tags, given a component. This is what you then call from within your template as <code>{% component %}</code>.</p> <ul> <li>When you <code>{% component %}</code>, tag formatter pre-processes the tag contents, so it can link back the custom template tag to the right component.</li> </ul> <p>To do so, subclass from <code>TagFormatterABC</code> and implement following method: - <code>start_tag</code> - <code>end_tag</code> - <code>parse</code></p> <p>For example, this is the implementation of <a href=#available-tagformatters><code>ShorthandComponentFormatter</code></a></p> <div class=highlight><pre><span></span><code><a id=__codelineno-127-1 name=__codelineno-127-1 href=#__codelineno-127-1></a><span class=k>class</span> <span class=nc>ShorthandComponentFormatter</span><span class=p>(</span><span class=n>TagFormatterABC</span><span class=p>):</span>
<a id=__codelineno-127-2 name=__codelineno-127-2 href=#__codelineno-127-2></a>    <span class=c1># Given a component name, generate the start template tag</span>
<a id=__codelineno-127-3 name=__codelineno-127-3 href=#__codelineno-127-3></a>    <span class=k>def</span> <span class=nf>start_tag</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-127-4 name=__codelineno-127-4 href=#__codelineno-127-4></a>        <span class=k>return</span> <span class=n>name</span>  <span class=c1># e.g. &#39;button&#39;</span>
<a id=__codelineno-127-5 name=__codelineno-127-5 href=#__codelineno-127-5></a>
<a id=__codelineno-127-6 name=__codelineno-127-6 href=#__codelineno-127-6></a>    <span class=c1># Given a component name, generate the start template tag</span>
<a id=__codelineno-127-7 name=__codelineno-127-7 href=#__codelineno-127-7></a>    <span class=k>def</span> <span class=nf>end_tag</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-127-8 name=__codelineno-127-8 href=#__codelineno-127-8></a>        <span class=k>return</span> <span class=sa>f</span><span class=s2>&quot;end</span><span class=si>{</span><span class=n>name</span><span class=si>}</span><span class=s2>&quot;</span>  <span class=c1># e.g. &#39;endbutton&#39;</span>
<a id=__codelineno-127-9 name=__codelineno-127-9 href=#__codelineno-127-9></a>
<a id=__codelineno-127-10 name=__codelineno-127-10 href=#__codelineno-127-10></a>    <span class=c1># Given a tag, e.g.</span>
<a id=__codelineno-127-11 name=__codelineno-127-11 href=#__codelineno-127-11></a>    <span class=c1># `{% button href=&quot;...&quot; disabled %}`</span>
<a id=__codelineno-127-12 name=__codelineno-127-12 href=#__codelineno-127-12></a>    <span class=c1>#</span>
<a id=__codelineno-127-13 name=__codelineno-127-13 href=#__codelineno-127-13></a>    <span class=c1># The parser receives:</span>
<a id=__codelineno-127-14 name=__codelineno-127-14 href=#__codelineno-127-14></a>    <span class=c1># `[&#39;button&#39;, &#39;href=&quot;...&quot;&#39;, &#39;disabled&#39;]`</span>
<a id=__codelineno-127-15 name=__codelineno-127-15 href=#__codelineno-127-15></a>    <span class=k>def</span> <span class=nf>parse</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>tokens</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>TagResult</span><span class=p>:</span>
<a id=__codelineno-127-16 name=__codelineno-127-16 href=#__codelineno-127-16></a>        <span class=n>tokens</span> <span class=o>=</span> <span class=p>[</span><span class=o>*</span><span class=n>tokens</span><span class=p>]</span>
<a id=__codelineno-127-17 name=__codelineno-127-17 href=#__codelineno-127-17></a>        <span class=n>name</span> <span class=o>=</span> <span class=n>tokens</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-127-18 name=__codelineno-127-18 href=#__codelineno-127-18></a>        <span class=k>return</span> <span class=n>TagResult</span><span class=p>(</span>
<a id=__codelineno-127-19 name=__codelineno-127-19 href=#__codelineno-127-19></a>            <span class=n>name</span><span class=p>,</span>  <span class=c1># e.g. &#39;button&#39;</span>
<a id=__codelineno-127-20 name=__codelineno-127-20 href=#__codelineno-127-20></a>            <span class=n>tokens</span>  <span class=c1># e.g. [&#39;href=&quot;...&quot;&#39;, &#39;disabled&#39;]</span>
<a id=__codelineno-127-21 name=__codelineno-127-21 href=#__codelineno-127-21></a>        <span class=p>)</span>
</code></pre></div> <p>That's it! And once your <code>TagFormatter</code> is ready, don't forget to update the settings!</p> <h2 id=defining-htmljscss-files>Defining HTML/JS/CSS files<a class=headerlink href=#defining-htmljscss-files title="Permanent link">¤</a></h2> <p>django_component's management of files builds on top of <a href=https://docs.djangoproject.com/en/5.0/topics/forms/media/ >Django's <code>Media</code> class</a>.</p> <p>To be familiar with how Django handles static files, we recommend reading also:</p> <ul> <li><a href=https://docs.djangoproject.com/en/5.0/howto/static-files/ >How to manage static files (e.g. images, JavaScript, CSS)</a></li> </ul> <h3 id=defining-file-paths-relative-to-component-or-static-dirs>Defining file paths relative to component or static dirs<a class=headerlink href=#defining-file-paths-relative-to-component-or-static-dirs title="Permanent link">¤</a></h3> <p>As seen in the <a href=#create-your-first-component>getting started example</a>, to associate HTML/JS/CSS files with a component, you set them as <code>template_name</code>, <code>Media.js</code> and <code>Media.css</code> respectively:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-128-1 name=__codelineno-128-1 href=#__codelineno-128-1></a><span class=c1># In a file [project root]/components/calendar/calendar.py</span>
<a id=__codelineno-128-2 name=__codelineno-128-2 href=#__codelineno-128-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-128-3 name=__codelineno-128-3 href=#__codelineno-128-3></a>
<a id=__codelineno-128-4 name=__codelineno-128-4 href=#__codelineno-128-4></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-128-5 name=__codelineno-128-5 href=#__codelineno-128-5></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-128-6 name=__codelineno-128-6 href=#__codelineno-128-6></a>    <span class=n>template_name</span> <span class=o>=</span> <span class=s2>&quot;template.html&quot;</span>
<a id=__codelineno-128-7 name=__codelineno-128-7 href=#__codelineno-128-7></a>
<a id=__codelineno-128-8 name=__codelineno-128-8 href=#__codelineno-128-8></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-128-9 name=__codelineno-128-9 href=#__codelineno-128-9></a>        <span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;style.css&quot;</span>
<a id=__codelineno-128-10 name=__codelineno-128-10 href=#__codelineno-128-10></a>        <span class=n>js</span> <span class=o>=</span> <span class=s2>&quot;script.js&quot;</span>
</code></pre></div> <p>In the example above, the files are defined relative to the directory where <code>component.py</code> is.</p> <p>Alternatively, you can specify the file paths relative to the directories set in <code>STATICFILES_DIRS</code>.</p> <p>Assuming that <code>STATICFILES_DIRS</code> contains path <code>[project root]/components</code>, we can rewrite the example as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-129-1 name=__codelineno-129-1 href=#__codelineno-129-1></a><span class=c1># In a file [project root]/components/calendar/calendar.py</span>
<a id=__codelineno-129-2 name=__codelineno-129-2 href=#__codelineno-129-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-129-3 name=__codelineno-129-3 href=#__codelineno-129-3></a>
<a id=__codelineno-129-4 name=__codelineno-129-4 href=#__codelineno-129-4></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-129-5 name=__codelineno-129-5 href=#__codelineno-129-5></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-129-6 name=__codelineno-129-6 href=#__codelineno-129-6></a>    <span class=n>template_name</span> <span class=o>=</span> <span class=s2>&quot;calendar/template.html&quot;</span>
<a id=__codelineno-129-7 name=__codelineno-129-7 href=#__codelineno-129-7></a>
<a id=__codelineno-129-8 name=__codelineno-129-8 href=#__codelineno-129-8></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-129-9 name=__codelineno-129-9 href=#__codelineno-129-9></a>        <span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;calendar/style.css&quot;</span>
<a id=__codelineno-129-10 name=__codelineno-129-10 href=#__codelineno-129-10></a>        <span class=n>js</span> <span class=o>=</span> <span class=s2>&quot;calendar/script.js&quot;</span>
</code></pre></div> <p>NOTE: In case of conflict, the preference goes to resolving the files relative to the component's directory.</p> <h3 id=defining-multiple-paths>Defining multiple paths<a class=headerlink href=#defining-multiple-paths title="Permanent link">¤</a></h3> <p>Each component can have only a single template. However, you can define as many JS or CSS files as you want using a list.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-130-1 name=__codelineno-130-1 href=#__codelineno-130-1></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-130-2 name=__codelineno-130-2 href=#__codelineno-130-2></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-130-3 name=__codelineno-130-3 href=#__codelineno-130-3></a>        <span class=n>js</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;path/to/script1.js&quot;</span><span class=p>,</span> <span class=s2>&quot;path/to/script2.js&quot;</span><span class=p>]</span>
<a id=__codelineno-130-4 name=__codelineno-130-4 href=#__codelineno-130-4></a>        <span class=n>css</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;path/to/style1.css&quot;</span><span class=p>,</span> <span class=s2>&quot;path/to/style2.css&quot;</span><span class=p>]</span>
</code></pre></div> <h3 id=configuring-css-media-types>Configuring CSS Media Types<a class=headerlink href=#configuring-css-media-types title="Permanent link">¤</a></h3> <p>You can define which stylesheets will be associated with which <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_media_queries/Using_media_queries#targeting_media_types>CSS Media types</a>. You do so by defining CSS files as a dictionary.</p> <p>See the corresponding <a href=https://docs.djangoproject.com/en/5.0/topics/forms/media/#css>Django Documentation</a>.</p> <p>Again, you can set either a single file or a list of files per media type:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-131-1 name=__codelineno-131-1 href=#__codelineno-131-1></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-131-2 name=__codelineno-131-2 href=#__codelineno-131-2></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-131-3 name=__codelineno-131-3 href=#__codelineno-131-3></a>        <span class=n>css</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-131-4 name=__codelineno-131-4 href=#__codelineno-131-4></a>            <span class=s2>&quot;all&quot;</span><span class=p>:</span> <span class=s2>&quot;path/to/style1.css&quot;</span><span class=p>,</span>
<a id=__codelineno-131-5 name=__codelineno-131-5 href=#__codelineno-131-5></a>            <span class=s2>&quot;print&quot;</span><span class=p>:</span> <span class=s2>&quot;path/to/style2.css&quot;</span><span class=p>,</span>
<a id=__codelineno-131-6 name=__codelineno-131-6 href=#__codelineno-131-6></a>        <span class=p>}</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-132-1 name=__codelineno-132-1 href=#__codelineno-132-1></a><span class=k>class</span> <span class=nc>MyComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-132-2 name=__codelineno-132-2 href=#__codelineno-132-2></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-132-3 name=__codelineno-132-3 href=#__codelineno-132-3></a>        <span class=n>css</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-132-4 name=__codelineno-132-4 href=#__codelineno-132-4></a>            <span class=s2>&quot;all&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;path/to/style1.css&quot;</span><span class=p>,</span> <span class=s2>&quot;path/to/style2.css&quot;</span><span class=p>],</span>
<a id=__codelineno-132-5 name=__codelineno-132-5 href=#__codelineno-132-5></a>            <span class=s2>&quot;print&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;path/to/style3.css&quot;</span><span class=p>,</span> <span class=s2>&quot;path/to/style4.css&quot;</span><span class=p>],</span>
<a id=__codelineno-132-6 name=__codelineno-132-6 href=#__codelineno-132-6></a>        <span class=p>}</span>
</code></pre></div> <p>NOTE: When you define CSS as a string or a list, the <code>all</code> media type is implied.</p> <h3 id=supported-types-for-file-paths>Supported types for file paths<a class=headerlink href=#supported-types-for-file-paths title="Permanent link">¤</a></h3> <p>File paths can be any of:</p> <ul> <li><code>str</code></li> <li><code>bytes</code></li> <li><code>PathLike</code> (<code>__fspath__</code> method)</li> <li><code>SafeData</code> (<code>__html__</code> method)</li> <li><code>Callable</code> that returns any of the above, evaluated at class creation (<code>__new__</code>)</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-133-1 name=__codelineno-133-1 href=#__codelineno-133-1></a><span class=kn>from</span> <span class=nn>pathlib</span> <span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-133-2 name=__codelineno-133-2 href=#__codelineno-133-2></a>
<a id=__codelineno-133-3 name=__codelineno-133-3 href=#__codelineno-133-3></a><span class=kn>from</span> <span class=nn>django.utils.safestring</span> <span class=kn>import</span> <span class=n>mark_safe</span>
<a id=__codelineno-133-4 name=__codelineno-133-4 href=#__codelineno-133-4></a>
<a id=__codelineno-133-5 name=__codelineno-133-5 href=#__codelineno-133-5></a><span class=k>class</span> <span class=nc>SimpleComponent</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-133-6 name=__codelineno-133-6 href=#__codelineno-133-6></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-133-7 name=__codelineno-133-7 href=#__codelineno-133-7></a>        <span class=n>css</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-133-8 name=__codelineno-133-8 href=#__codelineno-133-8></a>            <span class=n>mark_safe</span><span class=p>(</span><span class=s1>&#39;&lt;link href=&quot;/static/calendar/style.css&quot; rel=&quot;stylesheet&quot; /&gt;&#39;</span><span class=p>),</span>
<a id=__codelineno-133-9 name=__codelineno-133-9 href=#__codelineno-133-9></a>            <span class=n>Path</span><span class=p>(</span><span class=s2>&quot;calendar/style1.css&quot;</span><span class=p>),</span>
<a id=__codelineno-133-10 name=__codelineno-133-10 href=#__codelineno-133-10></a>            <span class=s2>&quot;calendar/style2.css&quot;</span><span class=p>,</span>
<a id=__codelineno-133-11 name=__codelineno-133-11 href=#__codelineno-133-11></a>            <span class=sa>b</span><span class=s2>&quot;calendar/style3.css&quot;</span><span class=p>,</span>
<a id=__codelineno-133-12 name=__codelineno-133-12 href=#__codelineno-133-12></a>            <span class=k>lambda</span><span class=p>:</span> <span class=s2>&quot;calendar/style4.css&quot;</span><span class=p>,</span>
<a id=__codelineno-133-13 name=__codelineno-133-13 href=#__codelineno-133-13></a>        <span class=p>]</span>
<a id=__codelineno-133-14 name=__codelineno-133-14 href=#__codelineno-133-14></a>        <span class=n>js</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-133-15 name=__codelineno-133-15 href=#__codelineno-133-15></a>            <span class=n>mark_safe</span><span class=p>(</span><span class=s1>&#39;&lt;script src=&quot;/static/calendar/script.js&quot;&gt;&lt;/script&gt;&#39;</span><span class=p>),</span>
<a id=__codelineno-133-16 name=__codelineno-133-16 href=#__codelineno-133-16></a>            <span class=n>Path</span><span class=p>(</span><span class=s2>&quot;calendar/script1.js&quot;</span><span class=p>),</span>
<a id=__codelineno-133-17 name=__codelineno-133-17 href=#__codelineno-133-17></a>            <span class=s2>&quot;calendar/script2.js&quot;</span><span class=p>,</span>
<a id=__codelineno-133-18 name=__codelineno-133-18 href=#__codelineno-133-18></a>            <span class=sa>b</span><span class=s2>&quot;calendar/script3.js&quot;</span><span class=p>,</span>
<a id=__codelineno-133-19 name=__codelineno-133-19 href=#__codelineno-133-19></a>            <span class=k>lambda</span><span class=p>:</span> <span class=s2>&quot;calendar/script4.js&quot;</span><span class=p>,</span>
<a id=__codelineno-133-20 name=__codelineno-133-20 href=#__codelineno-133-20></a>        <span class=p>]</span>
</code></pre></div> <h3 id=path-as-objects>Path as objects<a class=headerlink href=#path-as-objects title="Permanent link">¤</a></h3> <p>In the example <a href=#supported-types-for-file-paths>above</a>, you could see that when we used <code>mark_safe</code> to mark a string as a <code>SafeString</code>, we had to define the full <code>&lt;script&gt;</code>/<code>&lt;link&gt;</code> tag.</p> <p>This is an extension of Django's <a href=https://docs.djangoproject.com/en/5.0/topics/forms/media/#paths-as-objects>Paths as objects</a> feature, where "safe" strings are taken as is, and accessed only at render time.</p> <p>Because of that, the paths defined as "safe" strings are NEVER resolved, neither relative to component's directory, nor relative to <code>STATICFILES_DIRS</code>.</p> <p>"Safe" strings can be used to lazily resolve a path, or to customize the <code>&lt;script&gt;</code> or <code>&lt;link&gt;</code> tag for individual paths:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-134-1 name=__codelineno-134-1 href=#__codelineno-134-1></a><span class=k>class</span> <span class=nc>LazyJsPath</span><span class=p>:</span>
<a id=__codelineno-134-2 name=__codelineno-134-2 href=#__codelineno-134-2></a>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>static_path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-134-3 name=__codelineno-134-3 href=#__codelineno-134-3></a>        <span class=bp>self</span><span class=o>.</span><span class=n>static_path</span> <span class=o>=</span> <span class=n>static_path</span>
<a id=__codelineno-134-4 name=__codelineno-134-4 href=#__codelineno-134-4></a>
<a id=__codelineno-134-5 name=__codelineno-134-5 href=#__codelineno-134-5></a>    <span class=k>def</span> <span class=nf>__html__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-134-6 name=__codelineno-134-6 href=#__codelineno-134-6></a>        <span class=n>full_path</span> <span class=o>=</span> <span class=n>static</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>static_path</span><span class=p>)</span>
<a id=__codelineno-134-7 name=__codelineno-134-7 href=#__codelineno-134-7></a>        <span class=k>return</span> <span class=n>format_html</span><span class=p>(</span>
<a id=__codelineno-134-8 name=__codelineno-134-8 href=#__codelineno-134-8></a>            <span class=sa>f</span><span class=s1>&#39;&lt;script type=&quot;module&quot; src=&quot;</span><span class=si>{</span><span class=n>full_path</span><span class=si>}</span><span class=s1>&quot;&gt;&lt;/script&gt;&#39;</span>
<a id=__codelineno-134-9 name=__codelineno-134-9 href=#__codelineno-134-9></a>        <span class=p>)</span>
<a id=__codelineno-134-10 name=__codelineno-134-10 href=#__codelineno-134-10></a>
<a id=__codelineno-134-11 name=__codelineno-134-11 href=#__codelineno-134-11></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-134-12 name=__codelineno-134-12 href=#__codelineno-134-12></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-134-13 name=__codelineno-134-13 href=#__codelineno-134-13></a>    <span class=n>template_name</span> <span class=o>=</span> <span class=s2>&quot;calendar/template.html&quot;</span>
<a id=__codelineno-134-14 name=__codelineno-134-14 href=#__codelineno-134-14></a>
<a id=__codelineno-134-15 name=__codelineno-134-15 href=#__codelineno-134-15></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>date</span><span class=p>):</span>
<a id=__codelineno-134-16 name=__codelineno-134-16 href=#__codelineno-134-16></a>        <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-134-17 name=__codelineno-134-17 href=#__codelineno-134-17></a>            <span class=s2>&quot;date&quot;</span><span class=p>:</span> <span class=n>date</span><span class=p>,</span>
<a id=__codelineno-134-18 name=__codelineno-134-18 href=#__codelineno-134-18></a>        <span class=p>}</span>
<a id=__codelineno-134-19 name=__codelineno-134-19 href=#__codelineno-134-19></a>
<a id=__codelineno-134-20 name=__codelineno-134-20 href=#__codelineno-134-20></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-134-21 name=__codelineno-134-21 href=#__codelineno-134-21></a>        <span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;calendar/style.css&quot;</span>
<a id=__codelineno-134-22 name=__codelineno-134-22 href=#__codelineno-134-22></a>        <span class=n>js</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-134-23 name=__codelineno-134-23 href=#__codelineno-134-23></a>            <span class=c1># &lt;script&gt; tag constructed by Media class</span>
<a id=__codelineno-134-24 name=__codelineno-134-24 href=#__codelineno-134-24></a>            <span class=s2>&quot;calendar/script1.js&quot;</span><span class=p>,</span>
<a id=__codelineno-134-25 name=__codelineno-134-25 href=#__codelineno-134-25></a>            <span class=c1># Custom &lt;script&gt; tag</span>
<a id=__codelineno-134-26 name=__codelineno-134-26 href=#__codelineno-134-26></a>            <span class=n>LazyJsPath</span><span class=p>(</span><span class=s2>&quot;calendar/script2.js&quot;</span><span class=p>),</span>
<a id=__codelineno-134-27 name=__codelineno-134-27 href=#__codelineno-134-27></a>        <span class=p>]</span>
</code></pre></div> <h3 id=customize-how-paths-are-rendered-into-html-tags-with-media_class>Customize how paths are rendered into HTML tags with <code>media_class</code><a class=headerlink href=#customize-how-paths-are-rendered-into-html-tags-with-media_class title="Permanent link">¤</a></h3> <p>Sometimes you may need to change how all CSS <code>&lt;link&gt;</code> or JS <code>&lt;script&gt;</code> tags are rendered for a given component. You can achieve this by providing your own subclass of <a href=https://docs.djangoproject.com/en/5.0/topics/forms/media>Django's <code>Media</code> class</a> to component's <code>media_class</code> attribute.</p> <p>Normally, the JS and CSS paths are passed to <code>Media</code> class, which decides how the paths are resolved and how the <code>&lt;link&gt;</code> and <code>&lt;script&gt;</code> tags are constructed.</p> <p>To change how the tags are constructed, you can override the <a href=https://github.com/django/django/blob/fa7848146738a9fe1d415ee4808664e54739eeb7/django/forms/widgets.py#L102><code>Media.render_js</code> and <code>Media.render_css</code> methods</a>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-135-1 name=__codelineno-135-1 href=#__codelineno-135-1></a><span class=kn>from</span> <span class=nn>django.forms.widgets</span> <span class=kn>import</span> <span class=n>Media</span>
<a id=__codelineno-135-2 name=__codelineno-135-2 href=#__codelineno-135-2></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>Component</span><span class=p>,</span> <span class=n>register</span>
<a id=__codelineno-135-3 name=__codelineno-135-3 href=#__codelineno-135-3></a>
<a id=__codelineno-135-4 name=__codelineno-135-4 href=#__codelineno-135-4></a><span class=k>class</span> <span class=nc>MyMedia</span><span class=p>(</span><span class=n>Media</span><span class=p>):</span>
<a id=__codelineno-135-5 name=__codelineno-135-5 href=#__codelineno-135-5></a>    <span class=c1># Same as original Media.render_js, except</span>
<a id=__codelineno-135-6 name=__codelineno-135-6 href=#__codelineno-135-6></a>    <span class=c1># the `&lt;script&gt;` tag has also `type=&quot;module&quot;`</span>
<a id=__codelineno-135-7 name=__codelineno-135-7 href=#__codelineno-135-7></a>    <span class=k>def</span> <span class=nf>render_js</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-135-8 name=__codelineno-135-8 href=#__codelineno-135-8></a>        <span class=n>tags</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-135-9 name=__codelineno-135-9 href=#__codelineno-135-9></a>        <span class=k>for</span> <span class=n>path</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>_js</span><span class=p>:</span>
<a id=__codelineno-135-10 name=__codelineno-135-10 href=#__codelineno-135-10></a>            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s2>&quot;__html__&quot;</span><span class=p>):</span>
<a id=__codelineno-135-11 name=__codelineno-135-11 href=#__codelineno-135-11></a>                <span class=n>tag</span> <span class=o>=</span> <span class=n>path</span><span class=o>.</span><span class=n>__html__</span><span class=p>()</span>
<a id=__codelineno-135-12 name=__codelineno-135-12 href=#__codelineno-135-12></a>            <span class=k>else</span><span class=p>:</span>
<a id=__codelineno-135-13 name=__codelineno-135-13 href=#__codelineno-135-13></a>                <span class=n>tag</span> <span class=o>=</span> <span class=n>format_html</span><span class=p>(</span>
<a id=__codelineno-135-14 name=__codelineno-135-14 href=#__codelineno-135-14></a>                    <span class=s1>&#39;&lt;script type=&quot;module&quot; src=&quot;</span><span class=si>{}</span><span class=s1>&quot;&gt;&lt;/script&gt;&#39;</span><span class=p>,</span>
<a id=__codelineno-135-15 name=__codelineno-135-15 href=#__codelineno-135-15></a>                    <span class=bp>self</span><span class=o>.</span><span class=n>absolute_path</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
<a id=__codelineno-135-16 name=__codelineno-135-16 href=#__codelineno-135-16></a>                <span class=p>)</span>
<a id=__codelineno-135-17 name=__codelineno-135-17 href=#__codelineno-135-17></a>        <span class=k>return</span> <span class=n>tags</span>
<a id=__codelineno-135-18 name=__codelineno-135-18 href=#__codelineno-135-18></a>
<a id=__codelineno-135-19 name=__codelineno-135-19 href=#__codelineno-135-19></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;calendar&quot;</span><span class=p>)</span>
<a id=__codelineno-135-20 name=__codelineno-135-20 href=#__codelineno-135-20></a><span class=k>class</span> <span class=nc>Calendar</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-135-21 name=__codelineno-135-21 href=#__codelineno-135-21></a>    <span class=n>template_name</span> <span class=o>=</span> <span class=s2>&quot;calendar/template.html&quot;</span>
<a id=__codelineno-135-22 name=__codelineno-135-22 href=#__codelineno-135-22></a>
<a id=__codelineno-135-23 name=__codelineno-135-23 href=#__codelineno-135-23></a>    <span class=k>class</span> <span class=nc>Media</span><span class=p>:</span>
<a id=__codelineno-135-24 name=__codelineno-135-24 href=#__codelineno-135-24></a>        <span class=n>css</span> <span class=o>=</span> <span class=s2>&quot;calendar/style.css&quot;</span>
<a id=__codelineno-135-25 name=__codelineno-135-25 href=#__codelineno-135-25></a>        <span class=n>js</span> <span class=o>=</span> <span class=s2>&quot;calendar/script.js&quot;</span>
<a id=__codelineno-135-26 name=__codelineno-135-26 href=#__codelineno-135-26></a>
<a id=__codelineno-135-27 name=__codelineno-135-27 href=#__codelineno-135-27></a>    <span class=c1># Override the behavior of Media class</span>
<a id=__codelineno-135-28 name=__codelineno-135-28 href=#__codelineno-135-28></a>    <span class=n>media_class</span> <span class=o>=</span> <span class=n>MyMedia</span>
</code></pre></div> <p>NOTE: The instance of the <code>Media</code> class (or it's subclass) is available under <code>Component.media</code> after the class creation (<code>__new__</code>).</p> <h2 id=rendering-jscss-dependencies>Rendering JS/CSS dependencies<a class=headerlink href=#rendering-jscss-dependencies title="Permanent link">¤</a></h2> <p>The JS and CSS files included in components are not automatically rendered. Instead, use the following tags to specify where to render the dependencies:</p> <ul> <li><code>component_dependencies</code> - Renders both JS and CSS</li> <li><code>component_js_dependencies</code> - Renders only JS</li> <li><code>component_css_dependencies</code> - Reneders only CSS</li> </ul> <p>JS files are rendered as <code>&lt;script&gt;</code> tags.<br> CSS files are rendered as <code>&lt;style&gt;</code> tags.</p> <h3 id=setting-up-componentdependencymiddleware>Setting Up <code>ComponentDependencyMiddleware</code><a class=headerlink href=#setting-up-componentdependencymiddleware title="Permanent link">¤</a></h3> <p><code>ComponentDependencyMiddleware</code> is a Django middleware designed to manage and inject CSS/JS dependencies for rendered components dynamically. It ensures that only the necessary stylesheets and scripts are loaded in your HTML responses, based on the components used in your Django templates.</p> <p>To set it up, add the middleware to your <code>MIDDLEWARE</code> in settings.py:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-136-1 name=__codelineno-136-1 href=#__codelineno-136-1></a><span class=n>MIDDLEWARE</span> <span class=o>=</span> <span class=p>[</span>
<a id=__codelineno-136-2 name=__codelineno-136-2 href=#__codelineno-136-2></a>    <span class=c1># ... other middleware classes ...</span>
<a id=__codelineno-136-3 name=__codelineno-136-3 href=#__codelineno-136-3></a>    <span class=s1>&#39;django_components.middleware.ComponentDependencyMiddleware&#39;</span>
<a id=__codelineno-136-4 name=__codelineno-136-4 href=#__codelineno-136-4></a>    <span class=c1># ... other middleware classes ...</span>
<a id=__codelineno-136-5 name=__codelineno-136-5 href=#__codelineno-136-5></a><span class=p>]</span>
</code></pre></div> <p>Then, enable <code>RENDER_DEPENDENCIES</code> in setting.py:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-137-1 name=__codelineno-137-1 href=#__codelineno-137-1></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-137-2 name=__codelineno-137-2 href=#__codelineno-137-2></a>    <span class=s2>&quot;RENDER_DEPENDENCIES&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
<a id=__codelineno-137-3 name=__codelineno-137-3 href=#__codelineno-137-3></a>    <span class=c1># ... other component settings ...</span>
<a id=__codelineno-137-4 name=__codelineno-137-4 href=#__codelineno-137-4></a><span class=p>}</span>
</code></pre></div> <h2 id=available-settings>Available settings<a class=headerlink href=#available-settings title="Permanent link">¤</a></h2> <p>All library settings are handled from a global <code>COMPONENTS</code> variable that is read from <code>settings.py</code>. By default you don't need it set, there are resonable defaults.</p> <h3 id=configure-the-module-where-components-are-loaded-from>Configure the module where components are loaded from<a class=headerlink href=#configure-the-module-where-components-are-loaded-from title="Permanent link">¤</a></h3> <p>Configure the location where components are loaded. To do this, add a <code>COMPONENTS</code> variable to you <code>settings.py</code> with a list of python paths to load. This allows you to build a structure of components that are independent from your apps.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-138-1 name=__codelineno-138-1 href=#__codelineno-138-1></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-138-2 name=__codelineno-138-2 href=#__codelineno-138-2></a>    <span class=s2>&quot;libraries&quot;</span><span class=p>:</span> <span class=p>[</span>
<a id=__codelineno-138-3 name=__codelineno-138-3 href=#__codelineno-138-3></a>        <span class=s2>&quot;mysite.components.forms&quot;</span><span class=p>,</span>
<a id=__codelineno-138-4 name=__codelineno-138-4 href=#__codelineno-138-4></a>        <span class=s2>&quot;mysite.components.buttons&quot;</span><span class=p>,</span>
<a id=__codelineno-138-5 name=__codelineno-138-5 href=#__codelineno-138-5></a>        <span class=s2>&quot;mysite.components.cards&quot;</span><span class=p>,</span>
<a id=__codelineno-138-6 name=__codelineno-138-6 href=#__codelineno-138-6></a>    <span class=p>],</span>
<a id=__codelineno-138-7 name=__codelineno-138-7 href=#__codelineno-138-7></a><span class=p>}</span>
</code></pre></div> <p>Where <code>mysite/components/forms.py</code> may look like this:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-139-1 name=__codelineno-139-1 href=#__codelineno-139-1></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;form_simple&quot;</span><span class=p>)</span>
<a id=__codelineno-139-2 name=__codelineno-139-2 href=#__codelineno-139-2></a><span class=k>class</span> <span class=nc>FormSimple</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-139-3 name=__codelineno-139-3 href=#__codelineno-139-3></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-139-4 name=__codelineno-139-4 href=#__codelineno-139-4></a><span class=s2>        &lt;form&gt;</span>
<a id=__codelineno-139-5 name=__codelineno-139-5 href=#__codelineno-139-5></a><span class=s2>            ...</span>
<a id=__codelineno-139-6 name=__codelineno-139-6 href=#__codelineno-139-6></a><span class=s2>        &lt;/form&gt;</span>
<a id=__codelineno-139-7 name=__codelineno-139-7 href=#__codelineno-139-7></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-139-8 name=__codelineno-139-8 href=#__codelineno-139-8></a>
<a id=__codelineno-139-9 name=__codelineno-139-9 href=#__codelineno-139-9></a><span class=nd>@register</span><span class=p>(</span><span class=s2>&quot;form_other&quot;</span><span class=p>)</span>
<a id=__codelineno-139-10 name=__codelineno-139-10 href=#__codelineno-139-10></a><span class=k>class</span> <span class=nc>FormOther</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-139-11 name=__codelineno-139-11 href=#__codelineno-139-11></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-139-12 name=__codelineno-139-12 href=#__codelineno-139-12></a><span class=s2>        &lt;form&gt;</span>
<a id=__codelineno-139-13 name=__codelineno-139-13 href=#__codelineno-139-13></a><span class=s2>            ...</span>
<a id=__codelineno-139-14 name=__codelineno-139-14 href=#__codelineno-139-14></a><span class=s2>        &lt;/form&gt;</span>
<a id=__codelineno-139-15 name=__codelineno-139-15 href=#__codelineno-139-15></a><span class=s2>    &quot;&quot;&quot;</span>
</code></pre></div> <p>In the rare cases when you need to manually trigger the import of libraries, you can use the <code>import_libraries</code> function:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-140-1 name=__codelineno-140-1 href=#__codelineno-140-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>import_libraries</span>
<a id=__codelineno-140-2 name=__codelineno-140-2 href=#__codelineno-140-2></a>
<a id=__codelineno-140-3 name=__codelineno-140-3 href=#__codelineno-140-3></a><span class=n>import_libraries</span><span class=p>()</span>
</code></pre></div> <h3 id=disable-autodiscovery>Disable autodiscovery<a class=headerlink href=#disable-autodiscovery title="Permanent link">¤</a></h3> <p>If you specify all the component locations with the setting above and have a lot of apps, you can (very) slightly speed things up by disabling autodiscovery.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-141-1 name=__codelineno-141-1 href=#__codelineno-141-1></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-141-2 name=__codelineno-141-2 href=#__codelineno-141-2></a>    <span class=s2>&quot;autodiscover&quot;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-141-3 name=__codelineno-141-3 href=#__codelineno-141-3></a><span class=p>}</span>
</code></pre></div> <h3 id=tune-the-template-cache>Tune the template cache<a class=headerlink href=#tune-the-template-cache title="Permanent link">¤</a></h3> <p>Each time a template is rendered it is cached to a global in-memory cache (using Python's lru_cache decorator). This speeds up the next render of the component. As the same component is often used many times on the same page, these savings add up. By default the cache holds 128 component templates in memory, which should be enough for most sites. But if you have a lot of components, or if you are using the <code>template</code> method of a component to render lots of dynamic templates, you can increase this number. To remove the cache limit altogether and cache everything, set template_cache_size to <code>None</code>.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-142-1 name=__codelineno-142-1 href=#__codelineno-142-1></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-142-2 name=__codelineno-142-2 href=#__codelineno-142-2></a>    <span class=s2>&quot;template_cache_size&quot;</span><span class=p>:</span> <span class=mi>256</span><span class=p>,</span>
<a id=__codelineno-142-3 name=__codelineno-142-3 href=#__codelineno-142-3></a><span class=p>}</span>
</code></pre></div> <h3 id=context-behavior-setting>Context behavior setting<a class=headerlink href=#context-behavior-setting title="Permanent link">¤</a></h3> <blockquote> <p>NOTE: <code>context_behavior</code> and <code>slot_context_behavior</code> options were merged in v0.70.</p> <p>If you are migrating from BEFORE v0.67, set <code>context_behavior</code> to <code>"django"</code>. From v0.67 to v0.78 (incl) the default value was <code>"isolated"</code>.</p> <p>For v0.79 and later, the default is again <code>"django"</code>. See the rationale for change <a href=https://github.com/EmilStenstrom/django-components/issues/498>here</a>.</p> </blockquote> <p>You can configure what variables are available inside the <code>{% fill %}</code> tags. See <a href=#component-context-and-scope>Component context and scope</a>.</p> <p>This has two modes:</p> <ul> <li><code>"django"</code> - Default - The default Django template behavior.</li> </ul> <p>Inside the <code>{% fill %}</code> tag, the context variables you can access are a union of:</p> <ul> <li>All the variables that were OUTSIDE the fill tag, including any loops or with tag</li> <li> <p>Data returned from <code>get_context_data()</code> of the component that wraps the fill tag.</p> </li> <li> <p><code>"isolated"</code> - Similar behavior to <a href=https://vuejs.org/guide/components/slots.html#render-scope>Vue</a> or React, this is useful if you want to make sure that components don't accidentally access variables defined outside of the component.</p> </li> </ul> <p>Inside the <code>{% fill %}</code> tag, you can ONLY access variables from 2 places:</p> <ul> <li><code>get_context_data()</code> of the component which defined the template (AKA the "root" component)</li> <li>Any loops (<code>{% for ... %}</code>) that the <code>{% fill %}</code> tag is part of.</li> </ul> <div class=highlight><pre><span></span><code><a id=__codelineno-143-1 name=__codelineno-143-1 href=#__codelineno-143-1></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-143-2 name=__codelineno-143-2 href=#__codelineno-143-2></a>    <span class=s2>&quot;context_behavior&quot;</span><span class=p>:</span> <span class=s2>&quot;isolated&quot;</span><span class=p>,</span>
<a id=__codelineno-143-3 name=__codelineno-143-3 href=#__codelineno-143-3></a><span class=p>}</span>
</code></pre></div> <h4 id=example-django>Example "django"<a class=headerlink href=#example-django title="Permanent link">¤</a></h4> <p>Given this template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-144-1 name=__codelineno-144-1 href=#__codelineno-144-1></a><span class=k>class</span> <span class=nc>RootComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-144-2 name=__codelineno-144-2 href=#__codelineno-144-2></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-144-3 name=__codelineno-144-3 href=#__codelineno-144-3></a><span class=s2>        {% with cheese=&quot;feta&quot; %}</span>
<a id=__codelineno-144-4 name=__codelineno-144-4 href=#__codelineno-144-4></a><span class=s2>            {</span><span class=si>% c</span><span class=s2>omponent &#39;my_comp&#39; %}</span>
<a id=__codelineno-144-5 name=__codelineno-144-5 href=#__codelineno-144-5></a><span class=s2>                {{ my_var }}  # my_var</span>
<a id=__codelineno-144-6 name=__codelineno-144-6 href=#__codelineno-144-6></a><span class=s2>                {{ cheese }}  # cheese</span>
<a id=__codelineno-144-7 name=__codelineno-144-7 href=#__codelineno-144-7></a><span class=s2>            {</span><span class=si>% e</span><span class=s2>ndcomponent %}</span>
<a id=__codelineno-144-8 name=__codelineno-144-8 href=#__codelineno-144-8></a><span class=s2>        {</span><span class=si>% e</span><span class=s2>ndwith %}</span>
<a id=__codelineno-144-9 name=__codelineno-144-9 href=#__codelineno-144-9></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-144-10 name=__codelineno-144-10 href=#__codelineno-144-10></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-144-11 name=__codelineno-144-11 href=#__codelineno-144-11></a>        <span class=k>return</span> <span class=p>{</span> <span class=s2>&quot;my_var&quot;</span><span class=p>:</span> <span class=mi>123</span> <span class=p>}</span>
</code></pre></div> <p>Then if <code>get_context_data()</code> of the component <code>"my_comp"</code> returns following data:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-145-1 name=__codelineno-145-1 href=#__codelineno-145-1></a><span class=p>{</span> <span class=s2>&quot;my_var&quot;</span><span class=p>:</span> <span class=mi>456</span> <span class=p>}</span>
</code></pre></div> <p>Then the template will be rendered as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-146-1 name=__codelineno-146-1 href=#__codelineno-146-1></a><span class=x>456   # my_var</span>
<a id=__codelineno-146-2 name=__codelineno-146-2 href=#__codelineno-146-2></a><span class=x>feta  # cheese</span>
</code></pre></div> <p>Because <code>"my_comp"</code> overshadows the variable <code>"my_var"</code>, so <code>{{ my_var }}</code> equals <code>456</code>.</p> <p>And variable <code>"cheese"</code> equals <code>feta</code>, because the fill CAN access all the data defined in the outer layers, like the <code>{% with %}</code> tag.</p> <h4 id=example-isolated>Example "isolated"<a class=headerlink href=#example-isolated title="Permanent link">¤</a></h4> <p>Given this template:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-147-1 name=__codelineno-147-1 href=#__codelineno-147-1></a><span class=k>class</span> <span class=nc>RootComp</span><span class=p>(</span><span class=n>Component</span><span class=p>):</span>
<a id=__codelineno-147-2 name=__codelineno-147-2 href=#__codelineno-147-2></a>    <span class=n>template</span> <span class=o>=</span> <span class=s2>&quot;&quot;&quot;</span>
<a id=__codelineno-147-3 name=__codelineno-147-3 href=#__codelineno-147-3></a><span class=s2>        {% with cheese=&quot;feta&quot; %}</span>
<a id=__codelineno-147-4 name=__codelineno-147-4 href=#__codelineno-147-4></a><span class=s2>            {</span><span class=si>% c</span><span class=s2>omponent &#39;my_comp&#39; %}</span>
<a id=__codelineno-147-5 name=__codelineno-147-5 href=#__codelineno-147-5></a><span class=s2>                {{ my_var }}  # my_var</span>
<a id=__codelineno-147-6 name=__codelineno-147-6 href=#__codelineno-147-6></a><span class=s2>                {{ cheese }}  # cheese</span>
<a id=__codelineno-147-7 name=__codelineno-147-7 href=#__codelineno-147-7></a><span class=s2>            {</span><span class=si>% e</span><span class=s2>ndcomponent %}</span>
<a id=__codelineno-147-8 name=__codelineno-147-8 href=#__codelineno-147-8></a><span class=s2>        {</span><span class=si>% e</span><span class=s2>ndwith %}</span>
<a id=__codelineno-147-9 name=__codelineno-147-9 href=#__codelineno-147-9></a><span class=s2>    &quot;&quot;&quot;</span>
<a id=__codelineno-147-10 name=__codelineno-147-10 href=#__codelineno-147-10></a>    <span class=k>def</span> <span class=nf>get_context_data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-147-11 name=__codelineno-147-11 href=#__codelineno-147-11></a>        <span class=k>return</span> <span class=p>{</span> <span class=s2>&quot;my_var&quot;</span><span class=p>:</span> <span class=mi>123</span> <span class=p>}</span>
</code></pre></div> <p>Then if <code>get_context_data()</code> of the component <code>"my_comp"</code> returns following data:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-148-1 name=__codelineno-148-1 href=#__codelineno-148-1></a><span class=p>{</span> <span class=s2>&quot;my_var&quot;</span><span class=p>:</span> <span class=mi>456</span> <span class=p>}</span>
</code></pre></div> <p>Then the template will be rendered as:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-149-1 name=__codelineno-149-1 href=#__codelineno-149-1></a><span class=x>123   # my_var</span>
<a id=__codelineno-149-2 name=__codelineno-149-2 href=#__codelineno-149-2></a><span class=x>      # cheese</span>
</code></pre></div> <p>Because variables <code>"my_var"</code> and <code>"cheese"</code> are searched only inside <code>RootComponent.get_context_data()</code>. But since <code>"cheese"</code> is not defined there, it's empty.</p> <p>Notice that the variables defined with the <code>{% with %}</code> tag are ignored inside the <code>{% fill %}</code> tag with the <code>"isolated"</code> mode.</p> <h3 id=tag-formatter-setting>Tag formatter setting<a class=headerlink href=#tag-formatter-setting title="Permanent link">¤</a></h3> <p>Set the <a href=#available-tagformatters><code>TagFormatter</code></a> instance.</p> <p>Can be set either as direct reference, or as an import string;</p> <div class=highlight><pre><span></span><code><a id=__codelineno-150-1 name=__codelineno-150-1 href=#__codelineno-150-1></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-150-2 name=__codelineno-150-2 href=#__codelineno-150-2></a>    <span class=s2>&quot;tag_formatter&quot;</span><span class=p>:</span> <span class=s2>&quot;django_components.component_formatter&quot;</span>
<a id=__codelineno-150-3 name=__codelineno-150-3 href=#__codelineno-150-3></a><span class=p>}</span>
</code></pre></div> <p>Or</p> <div class=highlight><pre><span></span><code><a id=__codelineno-151-1 name=__codelineno-151-1 href=#__codelineno-151-1></a><span class=kn>from</span> <span class=nn>django_components</span> <span class=kn>import</span> <span class=n>component_formatter</span>
<a id=__codelineno-151-2 name=__codelineno-151-2 href=#__codelineno-151-2></a>
<a id=__codelineno-151-3 name=__codelineno-151-3 href=#__codelineno-151-3></a><span class=n>COMPONENTS</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-151-4 name=__codelineno-151-4 href=#__codelineno-151-4></a>    <span class=s2>&quot;tag_formatter&quot;</span><span class=p>:</span> <span class=n>component_formatter</span>
<a id=__codelineno-151-5 name=__codelineno-151-5 href=#__codelineno-151-5></a><span class=p>}</span>
</code></pre></div> <h2 id=logging-and-debugging>Logging and debugging<a class=headerlink href=#logging-and-debugging title="Permanent link">¤</a></h2> <p>Django components supports <a href=https://docs.djangoproject.com/en/5.0/howto/logging/#logging-how-to>logging with Django</a>. This can help with troubleshooting.</p> <p>To configure logging for Django components, set the <code>django_components</code> logger in <code>LOGGING</code> in <code>settings.py</code> (below).</p> <p>Also see the <a href=https://github.com/EmilStenstrom/django-components/blob/master/sampleproject/sampleproject/settings.py><code>settings.py</code> file in sampleproject</a> for a real-life example.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-152-1 name=__codelineno-152-1 href=#__codelineno-152-1></a><span class=kn>import</span> <span class=nn>logging</span>
<a id=__codelineno-152-2 name=__codelineno-152-2 href=#__codelineno-152-2></a><span class=kn>import</span> <span class=nn>sys</span>
<a id=__codelineno-152-3 name=__codelineno-152-3 href=#__codelineno-152-3></a>
<a id=__codelineno-152-4 name=__codelineno-152-4 href=#__codelineno-152-4></a><span class=n>LOGGING</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-152-5 name=__codelineno-152-5 href=#__codelineno-152-5></a>    <span class=s1>&#39;version&#39;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-152-6 name=__codelineno-152-6 href=#__codelineno-152-6></a>    <span class=s1>&#39;disable_existing_loggers&#39;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
<a id=__codelineno-152-7 name=__codelineno-152-7 href=#__codelineno-152-7></a>    <span class=s2>&quot;handlers&quot;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-152-8 name=__codelineno-152-8 href=#__codelineno-152-8></a>        <span class=s2>&quot;console&quot;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-152-9 name=__codelineno-152-9 href=#__codelineno-152-9></a>            <span class=s1>&#39;class&#39;</span><span class=p>:</span> <span class=s1>&#39;logging.StreamHandler&#39;</span><span class=p>,</span>
<a id=__codelineno-152-10 name=__codelineno-152-10 href=#__codelineno-152-10></a>            <span class=s1>&#39;stream&#39;</span><span class=p>:</span> <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=p>,</span>
<a id=__codelineno-152-11 name=__codelineno-152-11 href=#__codelineno-152-11></a>        <span class=p>},</span>
<a id=__codelineno-152-12 name=__codelineno-152-12 href=#__codelineno-152-12></a>    <span class=p>},</span>
<a id=__codelineno-152-13 name=__codelineno-152-13 href=#__codelineno-152-13></a>    <span class=s2>&quot;loggers&quot;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-152-14 name=__codelineno-152-14 href=#__codelineno-152-14></a>        <span class=s2>&quot;django_components&quot;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-152-15 name=__codelineno-152-15 href=#__codelineno-152-15></a>            <span class=s2>&quot;level&quot;</span><span class=p>:</span> <span class=n>logging</span><span class=o>.</span><span class=n>DEBUG</span><span class=p>,</span>
<a id=__codelineno-152-16 name=__codelineno-152-16 href=#__codelineno-152-16></a>            <span class=s2>&quot;handlers&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;console&quot;</span><span class=p>],</span>
<a id=__codelineno-152-17 name=__codelineno-152-17 href=#__codelineno-152-17></a>        <span class=p>},</span>
<a id=__codelineno-152-18 name=__codelineno-152-18 href=#__codelineno-152-18></a>    <span class=p>},</span>
<a id=__codelineno-152-19 name=__codelineno-152-19 href=#__codelineno-152-19></a><span class=p>}</span>
</code></pre></div> <h2 id=management-command>Management Command<a class=headerlink href=#management-command title="Permanent link">¤</a></h2> <p>You can use the built-in management command <code>startcomponent</code> to create a django component. The command accepts the following arguments and options:</p> <ul> <li> <p><code>name</code>: The name of the component to create. This is a required argument.</p> </li> <li> <p><code>--path</code>: The path to the components directory. This is an optional argument. If not provided, the command will use the <code>BASE_DIR</code> setting from your Django settings.</p> </li> <li> <p><code>--js</code>: The name of the JavaScript file. This is an optional argument. The default value is <code>script.js</code>.</p> </li> <li> <p><code>--css</code>: The name of the CSS file. This is an optional argument. The default value is <code>style.css</code>.</p> </li> <li> <p><code>--template</code>: The name of the template file. This is an optional argument. The default value is <code>template.html</code>.</p> </li> <li> <p><code>--force</code>: This option allows you to overwrite existing files if they exist. This is an optional argument.</p> </li> <li> <p><code>--verbose</code>: This option allows the command to print additional information during component creation. This is an optional argument.</p> </li> <li> <p><code>--dry-run</code>: This option allows you to simulate component creation without actually creating any files. This is an optional argument. The default value is <code>False</code>.</p> </li> </ul> <h3 id=management-command-usage>Management Command Usage<a class=headerlink href=#management-command-usage title="Permanent link">¤</a></h3> <p>To use the command, run the following command in your terminal:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-153-1 name=__codelineno-153-1 href=#__codelineno-153-1></a>python<span class=w> </span>manage.py<span class=w> </span>startcomponent<span class=w> </span>&lt;name&gt;<span class=w> </span>--path<span class=w> </span>&lt;path&gt;<span class=w> </span>--js<span class=w> </span>&lt;js_filename&gt;<span class=w> </span>--css<span class=w> </span>&lt;css_filename&gt;<span class=w> </span>--template<span class=w> </span>&lt;template_filename&gt;<span class=w> </span>--force<span class=w> </span>--verbose<span class=w> </span>--dry-run
</code></pre></div> <p>Replace <code>&lt;name&gt;</code>, <code>&lt;path&gt;</code>, <code>&lt;js_filename&gt;</code>, <code>&lt;css_filename&gt;</code>, and <code>&lt;template_filename&gt;</code> with your desired values.</p> <h3 id=management-command-examples>Management Command Examples<a class=headerlink href=#management-command-examples title="Permanent link">¤</a></h3> <p>Here are some examples of how you can use the command:</p> <h3 id=creating-a-component-with-default-settings>Creating a Component with Default Settings<a class=headerlink href=#creating-a-component-with-default-settings title="Permanent link">¤</a></h3> <p>To create a component with the default settings, you only need to provide the name of the component:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-154-1 name=__codelineno-154-1 href=#__codelineno-154-1></a>python<span class=w> </span>manage.py<span class=w> </span>startcomponent<span class=w> </span>my_component
</code></pre></div> <p>This will create a new component named <code>my_component</code> in the <code>components</code> directory of your Django project. The JavaScript, CSS, and template files will be named <code>script.js</code>, <code>style.css</code>, and <code>template.html</code>, respectively.</p> <h3 id=creating-a-component-with-custom-settings>Creating a Component with Custom Settings<a class=headerlink href=#creating-a-component-with-custom-settings title="Permanent link">¤</a></h3> <p>You can also create a component with custom settings by providing additional arguments:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-155-1 name=__codelineno-155-1 href=#__codelineno-155-1></a>python<span class=w> </span>manage.py<span class=w> </span>startcomponent<span class=w> </span>new_component<span class=w> </span>--path<span class=w> </span>my_components<span class=w> </span>--js<span class=w> </span>my_script.js<span class=w> </span>--css<span class=w> </span>my_style.css<span class=w> </span>--template<span class=w> </span>my_template.html
</code></pre></div> <p>This will create a new component named <code>new_component</code> in the <code>my_components</code> directory. The JavaScript, CSS, and template files will be named <code>my_script.js</code>, <code>my_style.css</code>, and <code>my_template.html</code>, respectively.</p> <h3 id=overwriting-an-existing-component>Overwriting an Existing Component<a class=headerlink href=#overwriting-an-existing-component title="Permanent link">¤</a></h3> <p>If you want to overwrite an existing component, you can use the <code>--force</code> option:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-156-1 name=__codelineno-156-1 href=#__codelineno-156-1></a>python<span class=w> </span>manage.py<span class=w> </span>startcomponent<span class=w> </span>my_component<span class=w> </span>--force
</code></pre></div> <p>This will overwrite the existing <code>my_component</code> if it exists.</p> <h3 id=simulating-component-creation>Simulating Component Creation<a class=headerlink href=#simulating-component-creation title="Permanent link">¤</a></h3> <p>If you want to simulate the creation of a component without actually creating any files, you can use the <code>--dry-run</code> option:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-157-1 name=__codelineno-157-1 href=#__codelineno-157-1></a>python<span class=w> </span>manage.py<span class=w> </span>startcomponent<span class=w> </span>my_component<span class=w> </span>--dry-run
</code></pre></div> <p>This will simulate the creation of <code>my_component</code> without creating any files.</p> <h2 id=community-examples>Community examples<a class=headerlink href=#community-examples title="Permanent link">¤</a></h2> <p>One of our goals with <code>django-components</code> is to make it easy to share components between projects. If you have a set of components that you think would be useful to others, please open a pull request to add them to the list below.</p> <ul> <li><a href=https://github.com/iwanalabs/django-htmx-components>django-htmx-components</a>: A set of components for use with <a href=https://htmx.org/ >htmx</a>. Try out the <a href=https://dhc.iwanalabs.com/ >live demo</a>.</li> </ul> <h2 id=running-django-components-project-locally>Running django-components project locally<a class=headerlink href=#running-django-components-project-locally title="Permanent link">¤</a></h2> <h3 id=install-locally-and-run-the-tests>Install locally and run the tests<a class=headerlink href=#install-locally-and-run-the-tests title="Permanent link">¤</a></h3> <p>Start by forking the project by clicking the <strong>Fork button</strong> up in the right corner in the GitHub . This makes a copy of the repository in your own name. Now you can clone this repository locally and start adding features:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-158-1 name=__codelineno-158-1 href=#__codelineno-158-1></a>git<span class=w> </span>clone<span class=w> </span>https://github.com/&lt;your<span class=w> </span>GitHub<span class=w> </span>username&gt;/django-components.git
</code></pre></div> <p>To quickly run the tests install the local dependencies by running:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-159-1 name=__codelineno-159-1 href=#__codelineno-159-1></a>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements-dev.txt
</code></pre></div> <p>Now you can run the tests to make sure everything works as expected:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-160-1 name=__codelineno-160-1 href=#__codelineno-160-1></a>pytest
</code></pre></div> <p>The library is also tested across many versions of Python and Django. To run tests that way:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-161-1 name=__codelineno-161-1 href=#__codelineno-161-1></a>pyenv<span class=w> </span>install<span class=w> </span>-s<span class=w> </span><span class=m>3</span>.8
<a id=__codelineno-161-2 name=__codelineno-161-2 href=#__codelineno-161-2></a>pyenv<span class=w> </span>install<span class=w> </span>-s<span class=w> </span><span class=m>3</span>.9
<a id=__codelineno-161-3 name=__codelineno-161-3 href=#__codelineno-161-3></a>pyenv<span class=w> </span>install<span class=w> </span>-s<span class=w> </span><span class=m>3</span>.10
<a id=__codelineno-161-4 name=__codelineno-161-4 href=#__codelineno-161-4></a>pyenv<span class=w> </span>install<span class=w> </span>-s<span class=w> </span><span class=m>3</span>.11
<a id=__codelineno-161-5 name=__codelineno-161-5 href=#__codelineno-161-5></a>pyenv<span class=w> </span>install<span class=w> </span>-s<span class=w> </span><span class=m>3</span>.12
<a id=__codelineno-161-6 name=__codelineno-161-6 href=#__codelineno-161-6></a>pyenv<span class=w> </span><span class=nb>local</span><span class=w> </span><span class=m>3</span>.8<span class=w> </span><span class=m>3</span>.9<span class=w> </span><span class=m>3</span>.10<span class=w> </span><span class=m>3</span>.11<span class=w> </span><span class=m>3</span>.12
<a id=__codelineno-161-7 name=__codelineno-161-7 href=#__codelineno-161-7></a>tox<span class=w> </span>-p
</code></pre></div> <h3 id=developing-against-live-django-app>Developing against live Django app<a class=headerlink href=#developing-against-live-django-app title="Permanent link">¤</a></h3> <p>How do you check that your changes to django-components project will work in an actual Django project?</p> <p>Use the <a href=https://github.com/EmilStenstrom/django-components/tree/master/sampleproject/ >sampleproject</a> demo project to validate the changes:</p> <ol> <li>Navigate to <a href=https://github.com/EmilStenstrom/django-components/tree/master/sampleproject/ >sampleproject</a> directory:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-162-1 name=__codelineno-162-1 href=#__codelineno-162-1></a><span class=nb>cd</span><span class=w> </span>sampleproject
</code></pre></div> <ol> <li>Install dependencies from the <a href=https://github.com/EmilStenstrom/django-components/blob/master/sampleproject/requirements.txt>requirements.txt</a> file:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-163-1 name=__codelineno-163-1 href=#__codelineno-163-1></a>pip<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>requirements.txt
</code></pre></div> <ol> <li>Link to your local version of django-components:</li> </ol> <div class=highlight><pre><span></span><code><a id=__codelineno-164-1 name=__codelineno-164-1 href=#__codelineno-164-1></a>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>..
</code></pre></div> <p>NOTE: The path (in this case <code>..</code>) must point to the directory that has the <code>setup.py</code> file.</p> <ol> <li>Start Django server <div class=highlight><pre><span></span><code><a id=__codelineno-165-1 name=__codelineno-165-1 href=#__codelineno-165-1></a>python<span class=w> </span>manage.py<span class=w> </span>runserver
</code></pre></div></li> </ol> <p>Once the server is up, it should be available at <a href=http://127.0.0.1:8000>http://127.0.0.1:8000</a>.</p> <p>To display individual components, add them to the <code>urls.py</code>, like in the case of <a href=http://127.0.0.1:8000/greeting>http://127.0.0.1:8000/greeting</a></p> <h2 id=development-guides>Development guides<a class=headerlink href=#development-guides title="Permanent link">¤</a></h2> <ul> <li><a href=https://github.com/EmilStenstrom/django-components/blob/master/docs/slot_rendering.md>Slot rendering flot</a></li> </ul> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2024-08-02T21:06:55+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-08-02</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Contributors> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"/></svg> </span> <nav> <a href=mailto:git@dugny.me>Gabriel Dugny</a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=CHANGELOG/ class="md-footer__link md-footer__link--next" aria-label="Next: Changelog"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Changelog </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/EmilStenstrom/django-components target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://pypi.org/project/django-components/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": ".", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tabs.link", "navigation.expand", "navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.indexes", "navigation.sections", "navigation.tracking", "navigation.top", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": ["latest", "dev"], "provider": "mike"}}</script> <script src=assets/javascripts/bundle.bd41221c.min.js></script> <script src=assets/_markdown_exec_pyodide.js></script> <script src=js/timeago.min.js></script> <script src=js/timeago_mkdocs_material.js></script> </body> </html>